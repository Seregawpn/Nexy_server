# ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–≤–æ—Ç–æ–π Gemini API

## üìã –†–µ–∑—é–º–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞ Gemini API (Free tier: 20 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å)  
**–°–∏–º–ø—Ç–æ–º—ã:** –ó–∞–ø—Ä–æ—Å—ã –∑–∞–Ω–∏–º–∞–ª–∏ 35+ —Å–µ–∫—É–Ω–¥ –±–µ–∑ –æ—Ç–≤–µ—Ç–∞  
**–ü—Ä–∏—á–∏–Ω–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry –ø–æ–ø—ã—Ç–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `google.genai` –ø—Ä–∏ –æ—à–∏–±–∫–µ 429  
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ API –∫–ª—é—á–∞ –Ω–∞ –Ω–æ–≤—ã–π —Å –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –∫–≤–æ—Ç–æ–π  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–æ 3-5 —Å–µ–∫—É–Ω–¥  

---

## üîç –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:

1. **–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞ Free tier Gemini API**
   - –õ–∏–º–∏—Ç: **20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å
   - –ü–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è: –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **429 RESOURCE_EXHAUSTED**

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry –ø–æ–ø—ã—Ç–∫–∏**
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `google.genai` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ 429
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: **69 —Ä–∞–∑** (–∏–∑ –ª–æ–≥–æ–≤)
   - –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 33s, 2.9s, 1.5s, 59s, 55s, 46s...
   - **–ò—Ç–æ–≥–æ: 35+ —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è**

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**
   - –ù–µ—Ç text_chunk (LLM –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç)
   - –ù–µ—Ç audio_chunk (–Ω–µ—Ç —Ç–µ–∫—Å—Ç–∞ –¥–ª—è TTS)
   - –ö–ª–∏–µ–Ω—Ç –∂–¥–µ—Ç 35 —Å–µ–∫—É–Ω–¥ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
   - `sent_any: false` –≤ –ª–æ–≥–∞—Ö

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ó–∞–º–µ–Ω–∞ API –∫–ª—é—á–∞

**–°—Ç–∞—Ä—ã–π –∫–ª—é—á:** `AIzaSyCr0k17xwJ7JAOZFA6NUNkMQ9hpVd_FJI4` (–∫–≤–æ—Ç–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∞)  
**–ù–æ–≤—ã–π –∫–ª—é—á:** `AIzaSyBWlrc99NRGLA-IUMI4hWAAcrw340zYICM` (–∫–≤–æ—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞)

**–î–∞—Ç–∞ –∑–∞–º–µ–Ω—ã:** 2026-01-11

**–ú–µ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: `server/config.env`
- ‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: `/home/azureuser/voice-assistant/server/config.env`
- ‚úÖ –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –∫–ª—é—á–∞

### –î–æ –∑–∞–º–µ–Ω—ã (—Å –ø—Ä–µ–≤—ã—à–µ–Ω–Ω–æ–π –∫–≤–æ—Ç–æ–π):
- ‚è±Ô∏è –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: **35+ —Å–µ–∫—É–Ω–¥**
- ‚ùå Text chunks: **0**
- ‚ùå Audio chunks: **0**
- ‚ùå –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: **0%**

### –ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã (—Å –Ω–æ–≤—ã–º –∫–ª—é—á–æ–º):
- ‚è±Ô∏è –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: **3-5 —Å–µ–∫—É–Ω–¥** ‚úÖ
- ‚úÖ Text chunks: **2-3**
- ‚úÖ Audio chunks: **130-270**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: **100%**

### –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–∏–∑ —Ç–µ—Å—Ç–æ–≤):

**–¢–µ—Å—Ç 1: "Hello"**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: 3.70ms
- –ü–µ—Ä–≤—ã–π text_chunk: 2060.47ms (~2.06 —Å–µ–∫)
- –ü–µ—Ä–≤—ã–π audio_chunk: 2659.23ms (~2.66 —Å–µ–∫)
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 4299.17ms (~4.30 —Å–µ–∫)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: 3 text chunks, 272 audio chunks, 1057.50 KB

**–¢–µ—Å—Ç 2: "What is the weather?"**
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 8615.81ms (~8.62 —Å–µ–∫)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: 2 text chunks, 170 audio chunks

**–¢–µ—Å—Ç 3: "Tell me a joke"**
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 2533.60ms (~2.53 —Å–µ–∫)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: 2 text chunks, 133 audio chunks

**–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:** 4591.79ms (~4.59 —Å–µ–∫)

---

## üéØ –í—ã–≤–æ–¥—ã

### –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –∏–∑-–∑–∞ –ª–∏–º–∏—Ç–æ–≤:

1. ‚úÖ **Free tier Gemini API**: –õ–∏–º–∏—Ç 20 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
2. ‚úÖ **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–≤–æ—Ç—ã**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ 20-–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ 429
3. ‚úÖ **Retry –º–µ—Ö–∞–Ω–∏–∑–º**: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–µ–ª–∞–ª–∞ 69 –ø–æ–ø—ã—Ç–æ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
4. ‚úÖ **–ò—Ç–æ–≥**: 35+ —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –†–µ—à–µ–Ω–∏–µ:

1. ‚úÖ **–ó–∞–º–µ–Ω–∞ API –∫–ª—é—á–∞**: –ù–æ–≤—ã–π –∫–ª—é—á —Å –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –∫–≤–æ—Ç–æ–π
2. ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ—Ä–Ω—É–ª–æ—Å—å –∫ 3-5 —Å–µ–∫—É–Ω–¥–∞–º
3. ‚úÖ **100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å**: –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–≤–æ—Ç—ã**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API
- ‚úÖ **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**: –£–≤–µ–¥–æ–º–ª—è—Ç—å –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É (15/20 –∑–∞–ø—Ä–æ—Å–æ–≤)

### –í –±—É–¥—É—â–µ–º:
1. **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω Gemini API**
   - –£–≤–µ–ª–∏—á–∏—Ç –∫–≤–æ—Ç—É –¥–æ —Ç—ã—Å—è—á –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
   - –£—Å—Ç—Ä–∞–Ω–∏—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –ª–∏–º–∏—Ç–∞–º–∏

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 429**
   - –û–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å 429 –æ—à–∏–±–∫—É —Å—Ä–∞–∑—É
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É –∫–ª–∏–µ–Ω—Ç—É –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
   - –ù–µ –¥–µ–ª–∞—Ç—å retry –¥–ª—è –∫–≤–æ—Ç—ã (–æ–Ω–∞ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã)

3. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Gemini
   - –ò–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π

4. **Rate limiting –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞**
   - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–æ 20/–¥–µ–Ω—å (–¥–ª—è free tier)
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –ª–∏–º–∏—Ç–µ

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `Docs/PERFORMANCE_BOTTLENECK_ANALYSIS.md` - –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `Docs/RETRY_MECHANISM_ANALYSIS.md` - –ê–Ω–∞–ª–∏–∑ –º–µ—Ö–∞–Ω–∏–∑–º–∞ retry
- `Docs/CLIENT_REQUEST_LOGS_ANALYSIS.md` - –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞:** 2026-01-11  
**–í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –∫–ª—é—á–∞  
**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (3-5 —Å–µ–∫)  
**–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 100% (–≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç)
