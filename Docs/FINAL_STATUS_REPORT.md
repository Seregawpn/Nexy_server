# –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: –õ–æ–≥–∏–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏

## ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é

### 1. AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚úÖ

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
- ‚úÖ –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "System Default Input", "Sergiy's AirPods")
- ‚úÖ UID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ –∞—É–¥–∏–æ (sample_rate, channels, bit_depth)
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ø–µ—Ä–≤—ã–π —á–∞–Ω–∫, RMS, min/max –∑–Ω–∞—á–µ–Ω–∏—è)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- AVF –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–∞ ~1 —Å–µ–∫—É–Ω–¥—É
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- AVF –¥–µ–∑–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `self._avf_device_info`

**–ö–æ–¥:** `_get_device_info_via_avf()` (—Å—Ç—Ä–æ–∫–∏ 1282-1340)

---

### 2. Google –∑–∞–ø–∏—Å—å –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ ‚úÖ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ Google –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω —á–µ—Ä–µ–∑ `listen_in_background()`
- ‚úÖ –ó–∞–ø–∏—Å—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ó–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ `voice.recording_stop`
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ö–æ–¥:**
- `_on_recording_start()` (—Å—Ç—Ä–æ–∫–∏ 724-808) - –∞–∫—Ç–∏–≤–∞—Ü–∏—è
- `_on_recording_stop()` (—Å—Ç—Ä–æ–∫–∏ 943-1001) - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- `_recognize_google_audio()` (—Å—Ç—Ä–æ–∫–∏ 1342-1407) - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

---

### 3. –ü–µ—Ä–µ–¥–∞—á–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ ‚úÖ

**–ß—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è:**
```python
{
    "device_info": {
        "name": "System Default Input",
        "uid": "...",
        "is_input": True
    },
    "input_format": {
        "sample_rate": 24000,
        "channels": 1,
        "bit_depth": 16
    },
    "diagnostics": {...}
}
```

**–ì–¥–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è:**
- ‚úÖ –í —Å–æ–±—ã—Ç–∏–∏ `voice.recognition_completed`
- ‚úÖ –í —Å–æ–±—ã—Ç–∏–∏ `voice.recognition_failed`

**–ö–æ–¥:** –°—Ç—Ä–æ–∫–∏ 1378-1385, 1389-1393, 1396-1400

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ‚úÖ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** "hey what's up" —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ
- **–†–∞–∑–º–µ—Ä –∞—É–¥–∏–æ:** 196608 bytes
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

### –¢–µ—Å—Ç 2: –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ ‚úÖ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** "how do you" —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ
- **–†–∞–∑–º–µ—Ä –∞—É–¥–∏–æ:** 231424 bytes (–∏–∑ 2 —á–∞–Ω–∫–æ–≤)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –ó–∞–ø–∏—Å—å –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞—Å—å –¥–æ `voice.recording_stop`

### –¢–µ—Å—Ç 3: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ ‚úÖ
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞:** ‚úÖ
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:** ‚úÖ
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ —Å–æ–±—ã—Ç–∏–µ:** ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

---

## üìä –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
1. voice.recording_start
   ‚îÇ
   ‚îú‚îÄ‚ñ∫ AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (~1 —Å–µ–∫—É–Ω–¥–∞)
   ‚îÇ   ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç: device_info, format, diagnostics
   ‚îÇ   ‚îî‚îÄ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ self._avf_device_info
   ‚îÇ
   ‚îú‚îÄ‚ñ∫ –ü–∞—É–∑–∞ 0.2 —Å–µ–∫
   ‚îÇ
   ‚îî‚îÄ‚ñ∫ Google –∞–∫—Ç–∏–≤–∞—Ü–∏—è
       ‚îú‚îÄ listen_in_background() –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
       ‚îî‚îÄ –ó–∞–ø–∏—Å—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç
   ‚îÇ
   ‚îî‚îÄ‚ñ∫ Google –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ listen_in_background()

3. voice.recording_stop
   ‚îÇ
   ‚îú‚îÄ‚ñ∫ stop_listening() –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å
   ‚îÇ
   ‚îú‚îÄ‚ñ∫ –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —á–∞–Ω–∫–æ–≤
   ‚îÇ
   ‚îú‚îÄ‚ñ∫ _recognize_google_audio()
   ‚îÇ   ‚îú‚îÄ recognize_google()
   ‚îÇ   ‚îî‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç voice.recognition_completed
   ‚îÇ       ‚îî‚îÄ –° device_info –æ—Ç AVF
   ‚îÇ
   ‚îî‚îÄ‚ñ∫ –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚úÖ
   - AVF –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω –ø–æ–¥–∫–ª—é—á—ë–Ω
   - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É** ‚úÖ
   - AVF –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
   - Google –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ä–µ—á–∏
   - –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

3. **–ó–∞–ø–∏—Å—å —Ä–µ—á–∏** ‚úÖ
   - Google –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   - –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ voice.recording_stop

4. **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** ‚úÖ
   - Google —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä–µ—á—å
   - –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

5. **–ü–µ—Ä–µ–¥–∞—á–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** ‚úÖ
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ —Å–æ–±—ã—Ç–∏—è
   - –î–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö

---

## üéØ –ò—Ç–æ–≥

**–õ–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!** ‚úÖ

- ‚úÖ AVF –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
- ‚úÖ Google –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ—á—å
- ‚úÖ Google —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä–µ—á—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚úÖ –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–∏—Å–∏
- ‚úÖ –ó–∞–ø–∏—Å—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–∞–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è)

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!** üöÄ







