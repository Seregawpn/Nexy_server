# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

## üìä –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –æ—Ç AVF

### 1. device_info ‚úÖ
```python
{
    "name": "System Default Input",  # –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    "uid": None,                      # UID (–º–æ–∂–µ—Ç –±—ã—Ç—å None)
    "is_input": True                  # –≠—Ç–æ –≤—Ö–æ–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
}
```

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
- ‚úÖ –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "System Default Input", "Sergiy's AirPods")
- ‚ö†Ô∏è UID –º–æ–∂–µ—Ç –±—ã—Ç—å None (AVAudioEngine –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–µ default —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
- ‚úÖ –¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (is_input = True)

**–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏:**
- ‚úÖ –î–∞, –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–º–µ–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚ö†Ô∏è UID –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Ç–æ—á–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω

---

### 2. input_format ‚úÖ
```python
{
    "sample_rate": 24000,  # –∏–ª–∏ 48000, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    "channels": 1,          # –ú–æ–Ω–æ
    "bit_depth": 16         # 16 –±–∏—Ç
}
```

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
- ‚úÖ –ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ (sample_rate)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤ (channels)
- ‚úÖ –ì–ª—É–±–∏–Ω–∞ –±–∏—Ç (bit_depth)

**–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏:**
- ‚úÖ –î–∞, —ç—Ç–æ –≤—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ä–º–∞—Ç–µ

---

### 3. diagnostics ‚úÖ
```python
{
    "first_chunk": {
        "size_bytes": 8192,
        "samples": 4096,
        "min": -1000,
        "max": 1000,
        "mean": 0.5,
        "std": 250.0,
        "rms": 500.0
    },
    "chunk_count": 1,
    "total_bytes": 8192
}
```

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —á–∞–Ω–∫–∞ (min, max, mean, std, rms)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤
- ‚úÖ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö

**–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏:**
- ‚úÖ –î–∞, —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:
```
‚úÖ [AVF] –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞: device=System Default Input, format={'sample_rate': 24000, 'channels': 1, 'bit_depth': 16}
‚úÖ [AVF] –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: System Default Input
üìä [Google] –ü–µ—Ä–µ–¥–∞—ë–º device_info –≤ —Å–æ–±—ã—Ç–∏–µ: device=System Default Input
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

### –í —Å–æ–±—ã—Ç–∏–∏ voice.recognition_completed:
```python
{
    "session_id": "...",
    "text": "...",
    "source": "google_recognition",
    "device_info": {
        "device_info": {...},
        "input_format": {...},
        "diagnostics": {...}
    }
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –í —Ç–µ—Å—Ç–µ:
```python
device_info = data.get("device_info")
if device_info:
    device_name = device_info.get('device_info', {}).get('name')
    print(f"   - Device info: {device_name}")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `- Device info: System Default Input`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –¥–∞–Ω–Ω—ã—Ö? ‚úÖ
**–î–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è:**
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∞—É–¥–∏–æ
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö

### –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ –ø–æ–ª—É—á–∞—é—Ç—Å—è? ‚úÖ
**–î–∞:**
- ‚úÖ AVF –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–∞ ~1 —Å–µ–∫—É–Ω–¥—É
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `self._avf_device_info`

### –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç? ‚úÖ
**–î–∞:**
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìù –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ UID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** UID –º–æ–∂–µ—Ç –±—ã—Ç—å None

**–£–ª—É—á—à–µ–Ω–∏–µ:** –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π UID —á–µ—Ä–µ–∑ AVAudioSession –∏–ª–∏ CoreAudio, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏.

### 2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–≤–æ–≥–æ —á–∞–Ω–∫–∞

**–£–ª—É—á—à–µ–Ω–∏–µ:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ.

---

## ‚úÖ –í—ã–≤–æ–¥

**–î–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** ‚úÖ

- ‚úÖ –ü–æ–ª—É—á–∞–µ–º –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ







