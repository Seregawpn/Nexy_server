# State Access Rules Review

## Метаданные
- Ассистент: codex
- Тип: review
- Дата: 2026-01-11
- ID (INS-###): INS-005

## Diagnosis
Правила доступа к состоянию централизованы через selectors и закреплены в документации, direct state access устранён.

## Root Cause
Ранее интеграции читали state напрямую → возникал второй путь принятия решений и риск конфликтов. Решено вынесением чтений в selectors.

## Optimal Fix
Оставить selectors как единственную точку чтения состояния, закрепить чек‑лист и запускать verify_no_direct_state_access перед мерджем.

## Verification
`verify_no_direct_state_access.py` — ошибок нет; ручные сценарии рекомендованы.

## Запрос/цель
Зафиксировать правила и чек‑лист для предотвращения регрессий.

## Контекст
- Файлы: integration/core/selectors.py, integration/integrations/*
- Документы: Docs/STATE_ACCESS_RULES.md

## Решения/выводы
- Итоговый статус: СООТВЕТСТВУЕТ
- Централизация чтений через selectors подтверждена.

## Найденные проблемы (если review)
- Нет.

## Открытые вопросы
- Требуется ли добавить обязательные ручные сценарии в CI/релизный чек‑лист?

## Следующие шаги
- Прогнать ручные сценарии (mode/tray/update/interrupt/PTT).
