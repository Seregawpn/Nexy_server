# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

## üîç –ü—Ä–æ–±–ª–µ–º—ã –∏–∑ –ª–æ–≥–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°—Ç—Ä–∏–º–∏–Ω–≥ –Ω–µ –≤–∫–ª—é—á–µ–Ω

**–í –ª–æ–≥–∞—Ö (—Å—Ç—Ä–æ–∫–∞ 320):**
```
‚úÖ [AVF] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç (batch) –¥–ª—è session 1765325706.764523
```

**–û–∂–∏–¥–∞–ª–æ—Å—å:**
```
‚úÖ [AVF] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç (—Å—Ç—Ä–∏–º–∏–Ω–≥) –¥–ª—è session ...
```

**–ù–µ—Ç –ª–æ–≥–æ–≤:**
- `‚úÖ [SPEECH] SFSpeechRecognizerWrapper –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ`
- `‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ`
- `üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Batch —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í –ª–æ–≥–∞—Ö (—Å—Ç—Ä–æ–∫–∞ 517-519):**
```
‚ö†Ô∏è [AVF] SpeechRecognition –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –∞—É–¥–∏–æ (session=1765325706.764523)
üîç [AVF] –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: audio_size=960000 bytes, sample_rate=48000Hz, language=en-US
üîç [AVF] RMS –∞—É–¥–∏–æ: 614.21 (–µ—Å–ª–∏ < 100, –≤–æ–∑–º–æ–∂–Ω–æ —Ç–∏—à–∏–Ω–∞)
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∞–Ω–æ (960000 bytes = ~20 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ 48kHz)
- ‚úÖ –ù–µ —Ç–∏—à–∏–Ω–∞ (RMS = 614.21 > 100)
- ‚ùå Google Speech API –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º (Google Speech API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ –¥–ª—è Google Speech API
3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Google Speech API (–ª–∏–º–∏—Ç—ã, –∫–≤–æ—Ç—ã)

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ü–æ—á–µ–º—É —Å—Ç—Ä–∏–º–∏–Ω–≥ –Ω–µ –≤–∫–ª—é—á–µ–Ω?

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ú–æ–¥—É–ª—å –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è**
   - `ImportError` –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `modules.speech_recognition_sf`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚ö†Ô∏è [SPEECH] SFSpeechRecognizer –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: ...`

2. **Speech framework –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**
   - `pyobjc-framework-Speech` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - `is_available()` –≤–µ—Ä–Ω—ë—Ç `False`

3. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã**
   - Speech Recognition –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤ System Preferences
   - `is_available()` –≤–µ—Ä–Ω—ë—Ç `False`

4. **AVFoundation –Ω–µ –≤–∫–ª—é—á–µ–Ω**
   - `self._use_avf = False`
   - –ë–ª–æ–∫ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

5. **–°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–∫–ª—é—á–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ**
   - `speech_recognition.streaming.enabled: false`
   - –ò–ª–∏ `NEXY_DISABLE_STREAMING_RECOGNITION=true`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è

–í –ª–æ–≥–∞—Ö –∑–∞–ø—É—Å–∫–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–¥–Ω–æ –∏–∑:
- `‚úÖ [SPEECH] SFSpeechRecognizerWrapper –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ`
- `‚ö†Ô∏è [SPEECH] SFSpeechRecognizer –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: ...`

**–ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ** ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Speech framework

```bash
python3 -c "from Speech import SFSpeechRecognizer; print('‚úÖ Speech framework –¥–æ—Å—Ç—É–ø–µ–Ω')"
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```bash
pip3 install --break-system-packages pyobjc-framework-Speech
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ ‚Üí —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è Nexy

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```yaml
# config/unified_config.yaml
speech_recognition:
  streaming:
    enabled: true  # ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å env –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

```bash
echo $NEXY_DISABLE_STREAMING_RECOGNITION
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –∏–ª–∏ "false"
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ü–æ—á–µ–º—É batch –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:

**RMS = 614.21** ‚Äî —ç—Ç–æ –ù–ï —Ç–∏—à–∏–Ω–∞ (—Ç–∏—à–∏–Ω–∞ < 100), –∑–Ω–∞—á–∏—Ç:
- ‚úÖ –ú–∏–∫—Ä–æ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∞–Ω–æ
- ‚ùå Google Speech API –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º**
   - Google Speech API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `ping google.com`

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Google Speech API**
   - Google Speech API –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π sample rate (16kHz –≤–º–µ—Å—Ç–æ 48kHz)
   - –ò–ª–∏ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Google Speech API**
   - –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö–≤–æ—Ç—ã –ø—Ä–µ–≤—ã—à–µ–Ω—ã

4. **–¢–∏—à–∏–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ**
   - –ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∞–Ω–æ, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–∏—à–∏–Ω—É
   - Google Speech API –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–∏—à–∏–Ω—É

---

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –î–ª—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Speech framework
pip3 install --break-system-packages pyobjc-framework-Speech

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
# –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python3 main.py

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞
grep "SPEECH\|SFSpeech" /var/folders/ys/xlx_chms3hqcs1lfyq37395c0000gn/T/nexy_debug.log
```

### –î–ª—è batch:

–ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–æ–º, —á—Ç–æ Google Speech API –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∞—É–¥–∏–æ 48kHz. –ù—É–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ 16kHz –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.



