# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

## üîç –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç—Ä–∏–º–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è batch

### –°–∏–º–ø—Ç–æ–º—ã

–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ:
```
‚úÖ [AVF] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç (batch) –¥–ª—è session ...
üîä [AVF] –ù–∞–∫–æ–ø–ª–µ–Ω —á–∞–Ω–∫: 38400 bytes
‚ö†Ô∏è [AVF] SpeechRecognition –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –∞—É–¥–∏–æ
```

**–ù–ï–¢ –ª–æ–≥–æ–≤:**
- `‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ`
- `üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Speech framework

### –ü—Ä–æ–±–ª–µ–º–∞

```
ModuleNotFoundError: No module named 'Speech'
```

### –†–µ—à–µ–Ω–∏–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pyobjc-framework-Speech
pip3 install --break-system-packages pyobjc-framework-Speech

# –ò–ª–∏ —á–µ—Ä–µ–∑ requirements.txt (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ venv)
pip install -r requirements.txt
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
python3 -c "from Speech import SFSpeechRecognizer; print('‚úÖ Speech framework –¥–æ—Å—Ç—É–ø–µ–Ω')"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Speech framework –¥–æ—Å—Ç—É–ø–µ–Ω
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è macOS

### –ü—Ä–æ–±–ª–µ–º–∞

–°—Ç—Ä–∏–º–∏–Ω–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –µ—Å–ª–∏ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏.

### –†–µ—à–µ–Ω–∏–µ

1. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Üí **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å** ‚Üí **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏**
2. –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è **Nexy**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Speech framework, –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ [SFSpeech] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ
‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ: language=en-US, on_device=True, timeout=5.0s
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞

–°—Ç—Ä–∏–º–∏–Ω–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –†–µ—à–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å `config/unified_config.yaml`:

```yaml
speech_recognition:
  streaming:
    enabled: true  # ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ env –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –æ—Ç–∫–ª—é—á–µ–Ω –ª–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥ —á–µ—Ä–µ–∑ env
echo $NEXY_DISABLE_STREAMING_RECOGNITION

# –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ "true", –æ—Ç–∫–ª—é—á–∏—Ç—å:
unset NEXY_DISABLE_STREAMING_RECOGNITION
```

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞: Batch —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°–∏–º–ø—Ç–æ–º—ã

```
‚ö†Ô∏è [AVF] SpeechRecognition –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –∞—É–¥–∏–æ (session=...)
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–¢–∏—à–∏–Ω–∞ –≤ –∞—É–¥–∏–æ** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≥–æ–≤–æ—Ä–∏–ª –∏–ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –∑–∞–ø–∏—Å–∞–ª –∑–≤—É–∫
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** ‚Äî sample rate –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º** ‚Äî Google Speech API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —è–∑—ã–∫** ‚Äî —è–∑—ã–∫ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–∏–∑–Ω–µ—Å—ë–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ –∫–æ–¥–µ, –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:
```
üîç [AVF] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: language=en-US, sample_rate=48000, audio_size=960000 bytes
üîç [AVF] RMS –∞—É–¥–∏–æ: 1234.56 (–µ—Å–ª–∏ < 100, –≤–æ–∑–º–æ–∂–Ω–æ —Ç–∏—à–∏–Ω–∞)
```

**–ï—Å–ª–∏ RMS < 100:**
- –ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –∑–∞–ø–∏—Å–∞–ª –∑–≤—É–∫ (—Ç–∏—à–∏–Ω–∞)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ï—Å–ª–∏ RMS > 100:**
- –ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∞–Ω–æ, –Ω–æ Google Speech API –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [ ] `pyobjc-framework-Speech` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] `from Speech import SFSpeechRecognizer` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `‚úÖ [SPEECH] SFSpeechRecognizerWrapper –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

- [ ] –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ Speech Recognition –≤ System Preferences
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `‚úÖ [SFSpeech] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ`

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- [ ] `speech_recognition.streaming.enabled: true` –≤ `unified_config.yaml`
- [ ] `NEXY_DISABLE_STREAMING_RECOGNITION` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ`
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫` (–ø—Ä–∏ –∑–∞–ø–∏—Å–∏)
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç` (–ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)

---

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Speech framework
pip3 install --break-system-packages pyobjc-framework-Speech

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
# –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python3 main.py

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
grep "SFSpeech\|streaming" log.md
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ

```
‚úÖ [SPEECH] SFSpeechRecognizerWrapper –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
‚úÖ [SFSpeech] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ
‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ: language=en-US, on_device=True, timeout=5.0s
```

### –ü—Ä–∏ –∑–∞–ø–∏—Å–∏

```
‚úÖ [AVF] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç (—Å—Ç—Ä–∏–º–∏–Ω–≥) –¥–ª—è session ...
üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫: 38400 bytes
üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫: 38400 bytes
```

### –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

```
üé§ [SFSpeech] –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è...
‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 'Hello world' (session=...)
```



