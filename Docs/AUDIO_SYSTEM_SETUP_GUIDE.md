# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã

## üéØ –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
1. AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (~1 —Å–µ–∫—É–Ω–¥–∞)
   ‚îî‚îÄ‚ñ∫ –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
   ‚îî‚îÄ‚ñ∫ –î–µ–∑–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω

2. Google –∑–∞–ø–∏—Å—å (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
   ‚îî‚îÄ‚ñ∫ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω —á–µ—Ä–µ–∑ speech_recognition
   ‚îî‚îÄ‚ñ∫ –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ—á—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚îî‚îÄ‚ñ∫ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ voice.recording_stop

3. Google —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
   ‚îî‚îÄ‚ñ∫ –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —á–µ—Ä–µ–∑ Google Speech API
   ‚îî‚îÄ‚ñ∫ –ü—É–±–ª–∏–∫—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `unified_config.yaml`

### 1. AVFoundation (AVF) ‚úÖ

```yaml
audio:
  avf:
    enabled: true  # ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –≤–∫–ª—é—á–∏—Ç—å AVF –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    rollout_percentage: 0
    input_format: "16kHz, mono, int16"
    output_format: "auto"
    buffer_size_ms: 100
    enable_hardware_optimization: true
  
  # Kill-switch –¥–ª—è AVF (–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç)
  ks_avf:
    enabled: false  # –ï—Å–ª–∏ true, –æ—Ç–∫–ª—é—á–∞–µ—Ç AVF
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ `audio.avf.enabled: true` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ `audio.ks_avf.enabled: false` - –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω

---

### 2. Voice Recognition ‚úÖ

```yaml
voice_recognition:
  enabled: true
  language: en-US  # –Ø–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
  max_alternatives: 3
  phrase_timeout: 0.3
  silence_timeout: 0.8

voice:
  start_retry_delay_ms: 300  # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –∑–∞–ø—É—Å–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ `voice_recognition.enabled: true` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ `voice_recognition.language: en-US` - —è–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ ru-RU)

---

### 3. Speech Recognition ‚úÖ

```yaml
speech_recognition:
  language: "en-US"  # –Ø–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  default_sample_rate: 48000
  
  streaming:
    enabled: true    # –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ env)
    on_device: true
    timeout_sec: 5.0
  
  batch:
    enabled: true    # Fallback –Ω–∞ batch-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ `speech_recognition.batch.enabled: true` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Google –∑–∞–ø–∏—Å–∏
- ‚úÖ `speech_recognition.language` - –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `voice_recognition.language`

---

### 4. Audio Input/Output ‚úÖ

```yaml
audio:
  input:
    target_rate: 16000  # –¶–µ–ª–µ–≤–æ–π sample rate –¥–ª—è ASR (16 kHz —Å—Ç–∞–Ω–¥–∞—Ä—Ç)
    channels: 1         # –ú–æ–Ω–æ (ASR –≤—Å–µ–≥–¥–∞ –º–æ–Ω–æ)
    dtype: "int16"      # –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
    chunk_size: 1024    # –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞
  
  output:
    source_rate: 48000  # Sample rate –¥–ª—è TTS (gRPC –¥–∞–Ω–Ω—ã–µ)
    channels: 1         # –ú–æ–Ω–æ TTS
    dtype: "int16"
    buffer_size: 512
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ `audio.input.target_rate: 16000` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è Google Speech API
- ‚úÖ `audio.input.channels: 1` - –º–æ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

---

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### –ö—Ä–∏—Ç–∏—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–Ω–µ –º–µ–Ω—è—Ç—å –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):

```python
1. InstanceManager          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏
2. HardwareId              # –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
3. FirstRunPermissions     # –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
4. PermissionRestart       # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
5. TrayController          # –°–∏—Å—Ç–µ–º–Ω—ã–π —Ç—Ä–µ–π
6. ModeManagement          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞–º–∏
7. InputProcessing         # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)
8. AudioSystem             # –ê—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞ (–î–û voice_recognition!)
9. VoiceRecognition        # –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç audio_system)
10. NetworkManager         # –°–µ—Ç–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
11. ScreenshotCapture      # –ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞
12. GrpcClient            # gRPC –∫–ª–∏–µ–Ω—Ç
13. SpeechPlayback        # –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–µ—á–∏
14. ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ)
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ `AudioSystem` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û `VoiceRecognition`
- ‚úÖ `InputProcessing` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û `VoiceRecognition` (–¥–ª—è —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)

---

## üé§ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

### 1. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (`voice.recording_start`)

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
1. AVF –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω (~1 —Å–µ–∫—É–Ω–¥–∞)
   ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç device_info (–∏–º—è, UID)
   ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç input_format (sample_rate, channels, bit_depth)
   ‚îî‚îÄ –ü–æ–ª—É—á–∞–µ—Ç diagnostics (RMS, min/max)

2. AVF –¥–µ–∑–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω ‚úÖ

3. –ü–∞—É–∑–∞ 0.2 —Å–µ–∫—É–Ω–¥—ã (–≥–∞—Ä–∞–Ω—Ç–∏—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ AVF)

4. Google –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω
   ‚îú‚îÄ –°–æ–∑–¥–∞—ë—Ç sr.Recognizer() –∏ sr.Microphone()
   ‚îî‚îÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç listen_in_background() (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- ‚úÖ AVF –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –Ω–∞ ~1 —Å–µ–∫—É–Ω–¥—É (hardcoded –≤ `_get_device_info_via_avf()`)
- ‚úÖ –ü–∞—É–∑–∞ 0.2 —Å–µ–∫—É–Ω–¥—ã (hardcoded –≤ `_on_recording_start()`)
- ‚úÖ Google –∑–∞–ø–∏—Å—å –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (`phrase_time_limit=None`)

---

### 2. –ó–∞–ø–∏—Å—å —Ä–µ—á–∏

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- Google –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ `listen_in_background()`
- –ó–∞–ø–∏—Å—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ `voice.recording_stop`
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –î–∞–Ω–Ω—ã–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ —á–∞–Ω–∫–∞—Ö

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- ‚úÖ –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏—é/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ (`voice.recording_stop`)

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
1. stop_listening() –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–æ–Ω–æ–≤–æ–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ

2. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   ‚îî‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞–Ω–∫ (—Å–∞–º—ã–π –ø–æ–ª–Ω—ã–π)

3. _recognize_google_audio()
   ‚îú‚îÄ recognizer.recognize_google(audio_data, language)
   ‚îî‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç voice.recognition_completed
       ‚îî‚îÄ –° device_info –æ—Ç AVF
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 0.5 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞–Ω–∫ –∏–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö

---

## ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. Feature Flags

```yaml
audio:
  avf:
    enabled: true  # ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
```

### 2. Kill-Switches

```yaml
audio:
  ks_avf:
    enabled: false  # ‚úÖ –ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω
```

### 3. Environment Variables

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
export NEXY_DISABLE_STREAMING_RECOGNITION=true

# –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∞—É–¥–∏–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
export NEXY_DEBUG_SAVE_AUDIO=true
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚úÖ

```yaml
audio:
  avf:
    enabled: true
  ks_avf:
    enabled: false

voice_recognition:
  enabled: true
  language: en-US

speech_recognition:
  batch:
    enabled: true
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Google –∑–∞–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†—É—Å—Å–∫–∏–π —è–∑—ã–∫

```yaml
voice_recognition:
  language: ru-RU  # –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–∏–π

speech_recognition:
  language: "ru-RU"  # –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–∏–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ AVF (fallback)

```yaml
audio:
  avf:
    enabled: false
  ks_avf:
    enabled: true  # Kill-switch
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö†Ô∏è AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Google –∑–∞–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç (–±–µ–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- ‚ö†Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ö—Ä–∏—Ç–∏—á–Ω–æ:**
- ‚úÖ `AudioSystem` –î–û `VoiceRecognition`
- ‚úÖ `InputProcessing` –î–û `VoiceRecognition`

**–ù–µ –º–µ–Ω—è—Ç—å –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏!**

---

### 2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**VoiceRecognitionIntegration –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:**
- ‚úÖ `AudioSystemIntegration` (–¥–ª—è AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- ‚úÖ `InputProcessingIntegration` (–¥–ª—è —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- ‚úÖ `EventBus` (–¥–ª—è —Å–æ–±—ã—Ç–∏–π)
- ‚úÖ `ApplicationStateManager` (–¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)

---

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚úÖ –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–∏—Å–∏
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏—é/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: ~1 —Å–µ–∫—É–Ω–¥–∞ (hardcoded)
- ‚úÖ –ü–∞—É–∑–∞ –ø–æ—Å–ª–µ AVF: 0.2 —Å–µ–∫—É–Ω–¥—ã (hardcoded)

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ß–µ–∫-–ª–∏—Å—Ç:

- [ ] `audio.avf.enabled: true`
- [ ] `audio.ks_avf.enabled: false`
- [ ] `voice_recognition.enabled: true`
- [ ] `speech_recognition.batch.enabled: true`
- [ ] `audio.input.target_rate: 16000`
- [ ] `audio.input.channels: 1`
- [ ] –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (AudioSystem –î–û VoiceRecognition)
- [ ] –Ø–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç –≤ `voice_recognition` –∏ `speech_recognition`

---

## üìä –ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```yaml
# ‚úÖ –ö–û–†–†–ï–ö–¢–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

audio:
  avf:
    enabled: true
    rollout_percentage: 0
    input_format: "16kHz, mono, int16"
    output_format: "auto"
    buffer_size_ms: 100
    enable_hardware_optimization: true
  ks_avf:
    enabled: false
  input:
    target_rate: 16000
    channels: 1
    dtype: "int16"
    chunk_size: 1024
  output:
    source_rate: 48000
    channels: 1
    dtype: "int16"
    buffer_size: 512

voice_recognition:
  enabled: true
  language: en-US
  max_alternatives: 3
  phrase_timeout: 0.3
  silence_timeout: 0.8

voice:
  start_retry_delay_ms: 300

speech_recognition:
  language: "en-US"
  default_sample_rate: 48000
  streaming:
    enabled: true
    on_device: true
    timeout_sec: 5.0
  batch:
    enabled: true
```

---

## üéØ –ò—Ç–æ–≥

**–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:**

1. ‚úÖ –í–∫–ª—é—á–∏—Ç—å AVF (`audio.avf.enabled: true`)
2. ‚úÖ –í–∫–ª—é—á–∏—Ç—å Voice Recognition (`voice_recognition.enabled: true`)
3. ‚úÖ –í–∫–ª—é—á–∏—Ç—å Batch —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (`speech_recognition.batch.enabled: true`)
4. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (AudioSystem –î–û VoiceRecognition)
5. ‚úÖ –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
6. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –∞—É–¥–∏–æ (16kHz, mono, int16)

**–ü—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ —ç—Ç–∏—Ö —É—Å–ª–æ–≤–∏–π –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** ‚úÖ






