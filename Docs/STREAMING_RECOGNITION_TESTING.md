# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pyobjc-framework-Speech
pip3 install --break-system-packages pyobjc-framework-Speech

# –ò–ª–∏ —á–µ—Ä–µ–∑ requirements.txt (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ venv)
pip install -r requirements.txt
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

```bash
python3 scripts/test_sf_speech_imports.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Speech framework –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
‚úÖ SFSpeechRecognizer —Å–æ–∑–¥–∞–Ω
‚úÖ SFSpeechRecognizerWrapper –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
```

### 3. –†–∞–∑—Ä–µ—à–µ–Ω–∏—è macOS

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ macOS –∑–∞–ø—Ä–æ—Å–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ **Speech Recognition**:
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
- –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è Nexy

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
cd /Users/sergiyzasorin/Development/Nexy/client\(prod\)
python3 main.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

#### ‚úÖ –°—Ç—Ä–∏–º–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω

```
‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ: language=en-US
‚úÖ [AVF] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç (—Å—Ç—Ä–∏–º–∏–Ω–≥) –¥–ª—è session ...
üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫: 4096 bytes
üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫: 4096 bytes
üé§ [SFSpeech] –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è...
‚úÖ [SFSpeech] –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 'Hello world' (session=...)
```

#### ‚ö†Ô∏è Fallback –Ω–∞ batch

```
‚ö†Ô∏è [SFSpeech] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ, fallback –Ω–∞ batch
‚úÖ [AVF] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç (batch) –¥–ª—è session ...
üîä [AVF] –ù–∞–∫–æ–ø–ª–µ–Ω —á–∞–Ω–∫: 4096 bytes (–≤—Å–µ–≥–æ: 8192 bytes)
üì§ [AVF] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ: 32768 bytes, 48000Hz, 1ch
‚úÖ [AVF] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ: 'Hello world' (session=...)
```

## –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç (—Å—Ç—Ä–∏–º–∏–Ω–≥)

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å –∏ —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å **Control+N** (‚â•0.6 —Å–µ–∫)
3. –ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏: "Hello world"
4. –û—Ç–ø—É—Å—Ç–∏—Ç—å **Control+N**
5. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ ~0-200ms

### 2. –¢–µ—Å—Ç fallback (batch)

1. –û—Ç–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∏–º–∏–Ω–≥: `NEXY_DISABLE_STREAMING_RECOGNITION=true python3 main.py`
2. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —à–∞–≥–∏ 2-4 –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 1-3 —Å–µ–∫

### 3. –¢–µ—Å—Ç –æ—à–∏–±–æ–∫

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è Speech Recognition
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ batch

### 4. –¢–µ—Å—Ç –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è

1. –ù–∞–∂–∞—Ç—å **Control+N** –±—ã—Å—Ç—Ä–æ (<0.6 —Å–µ–∫)
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è

## –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | Batch | Streaming |
|---------|-------|-----------|
| –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ RELEASE | 1-3 —Å–µ–∫ | 0-200 –º—Å |
| CPU –Ω–∞–≥—Ä—É–∑–∫–∞ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è |
| –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç | –î–∞ | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Speech framework –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–°–∏–º–ø—Ç–æ–º:** `‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ Speech framework: No module named 'Speech'`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip3 install --break-system-packages pyobjc-framework-Speech
```

### 2. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:** `‚ö†Ô∏è [SFSpeech] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ`

**–†–µ—à–µ–Ω–∏–µ:**
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
- –í—Ä—É—á–Ω—É—é —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è Nexy

### 3. –°—Ç—Ä–∏–º–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ fallback —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è batch-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `grep "SFSpeech\|streaming" log.md`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: `config/unified_config.yaml` ‚Üí `speech_recognition.streaming.enabled`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å env –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: `echo $NEXY_DISABLE_STREAMING_RECOGNITION`

## –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏

```python
# –í voice_recognition_integration.py
logger.setLevel(logging.DEBUG)
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞

```python
# –í –ª–æ–≥–∞—Ö –∏—Å–∫–∞—Ç—å:
üé§ [SFSpeech] –ó–∞–ø—É—Å–∫ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
üé§ [SFSpeech] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–∞–Ω–∫
üé§ [SFSpeech] –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å fallback

```python
# –í –ª–æ–≥–∞—Ö –∏—Å–∫–∞—Ç—å:
‚ö†Ô∏è [SFSpeech] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ, fallback –Ω–∞ batch
üîä [AVF] –ù–∞–∫–æ–ø–ª–µ–Ω —á–∞–Ω–∫
üì§ [AVF] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–∑–∞–¥–µ—Ä–∂–∫–∞ < 200ms)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (on-device —Ä–µ–∂–∏–º)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫



