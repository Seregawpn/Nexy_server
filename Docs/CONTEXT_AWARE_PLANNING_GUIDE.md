# üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–¶–ï–õ–¨**: –û–±–µ—Å–ø–µ—á–∏—Ç—å —É—á–µ—Ç –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, —Ñ–ª–∞–≥–æ–≤, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –î–û –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞.

**–ü–†–û–ë–õ–ï–ú–ê**: –ß–∞—Å—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–≥–ª—è–¥—è—Ç –ª–æ–≥–∏—á–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –ª–æ–º–∞—é—Ç —Å–∏—Å—Ç–µ–º—É –∏–∑-–∑–∞ –Ω–µ—É—á—Ç–µ–Ω–Ω—ã—Ö –Ω—é–∞–Ω—Å–æ–≤:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ feature flags
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –∏ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

**–†–ï–®–ï–ù–ò–ï**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-XX  
**–í–µ—Ä—Å–∏—è**: 1.0

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### –ü—Ä–∞–≤–∏–ª–æ 1: –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞–∂–Ω–µ–µ –ª–æ–≥–∏–∫–∏
**–ü–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞** –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç **–û–ë–Ø–ó–ê–ù** –∏–∑—É—á–∏—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫—É –∑–∞–¥–∞—á–∏.

### –ü—Ä–∞–≤–∏–ª–æ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∏—è–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
**–õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ** –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –≤–ª–∏—è–Ω–∏—è –Ω–∞:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ñ–ª–∞–≥–∏
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–∞–≤–∏–ª–æ 3: –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
**–ü—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏** –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —É—á–µ—Å—Ç—å –∏—Ö –æ–ø—ã—Ç.

---

## üìã –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –≠—Ç–∞–ø 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–ï–ù)

**–ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `ARCHITECTURE_ANALYSIS_CHECKLIST.md` –∏ `PRE_CHANGE_PLANNING_CHECKLIST.md`:

- [ ] **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –æ–±–ª–∞—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –ö–∞–∫–∏–µ –º–æ–¥—É–ª–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏/—Ñ–∞–π–ª—ã –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è?
- [ ] **–ù–∞–π–¥–µ–Ω—ã –ø–æ—Ö–æ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –ï—Å—Ç—å –ª–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Ö–æ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è? (grep –ø–æ git log, –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º)
- [ ] **–ò–∑—É—á–µ–Ω—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**: –ï—Å—Ç—å –ª–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ö–æ–∂–∏—Ö –ø—Ä–æ–±–ª–µ–º? (–Ω–∞–ø—Ä–∏–º–µ—Ä, `AUDIO_HEADPHONES_OUTPUT_ANALYSIS.md` –¥–ª—è –∞—É–¥–∏–æ)
- [ ] **–û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –ö–∞–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã/–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Å–≤—è–∑–∞–Ω—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º? (–¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ–¥—É)

---

## üîç –≠—Ç–∞–ø 1: –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ —Ñ–ª–∞–≥–æ–≤

### 1.1 unified_config.yaml (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–ê–ù–ê–õ–ò–ó–ò–†–û–í–ê–¢–¨**:

- [ ] **–ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ü—Ä–æ—á–∏—Ç–∞–Ω –≤–µ—Å—å `unified_config.yaml` –ø–æ–ª–Ω–æ—Å—Ç—å—é, –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞–∑–¥–µ–ª, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- [ ] **–í—Å–µ —Ä–∞–∑–¥–µ–ª—ã**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –í–°–ï —Ä–∞–∑–¥–µ–ª—ã –∫–æ–Ω—Ñ–∏–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã (–Ω–µ —Ç–æ–ª—å–∫–æ –æ—á–µ–≤–∏–¥–Ω—ã–µ)
- [ ] **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ù–∞–π–¥–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä A –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, –≤–ª–∏—è–µ—Ç –ª–∏ —ç—Ç–æ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä B?)
- [ ] **–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –ü–æ–Ω—è—Ç–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –í–°–ï–• –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–∑–º–µ–Ω—è–µ–º—ã–º –∫–æ–¥–æ–º
- [ ] **–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: –ü—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã? (feature flags, kill-switches, env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```yaml
# ‚ùå –ü–õ–û–•–û: –ü—Ä–æ—á–∏—Ç–∞–ª —Ç–æ–ª—å–∫–æ audio.avf —Ä–∞–∑–¥–µ–ª
# ‚úÖ –•–û–†–û–®–û: –ü—Ä–æ—á–∏—Ç–∞–ª audio.avf, audio_system, speech_playback, 
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É sample_rate –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª feature flags avf.enabled –∏ ks_avf.enabled
```

### 1.2 Feature Flags –∏ Kill-Switches (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –õ–û–ì–ò–ö–£**:

- [ ] **–†–µ–µ—Å—Ç—Ä —Ñ–ª–∞–≥–æ–≤**: –ü—Ä–æ—á–∏—Ç–∞–Ω `FEATURE_FLAGS.md` –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [ ] **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–ª–∞–≥–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –í–°–ï feature flags, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –∏–∑–º–µ–Ω—è–µ–º—ã–π –∫–æ–¥ (–Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä—è–º—ã–µ)
- [ ] **–õ–æ–≥–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è**: –ü–æ–Ω—è—Ç–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤ (unified_config, env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, kill-switches)
- [ ] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ñ–ª–∞–≥–æ–≤**: –ü–æ–Ω—è—Ç–Ω—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (kill-switch > env > unified_config)
- [ ] **–£—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏**: –ì–¥–µ –∏ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ñ–ª–∞–≥–∏? (–ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö?)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ü—Ä–æ–≤–µ—Ä–∏–ª —Ç–æ–ª—å–∫–æ avf.enabled
# ‚úÖ –•–û–†–û–®–û: –ü—Ä–æ–≤–µ—Ä–∏–ª avf.enabled, ks_avf.enabled, NEXY_DISABLE_AVF_AUDIO,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏–∫—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–∏–ª –≥–¥–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ñ–ª–∞–≥–∏
#            (AudioSystemIntegration, SpeechPlaybackIntegration)
```

### 1.3 –°—Ö–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

- [ ] **–°—Ö–µ–º—ã –ø—Ä–æ—á–∏—Ç–∞–Ω—ã**: –ü—Ä–æ—á–∏—Ç–∞–Ω—ã –≤—Å–µ —Å—Ö–µ–º—ã –≤ `config/schemas/`, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü–æ–Ω—è—Ç–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (scripts/validate_schemas.py)
- [ ] **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–Ω—è—Ç–Ω—ã —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (min/max, enum, –∏ —Ç.–¥.)

---

## üèóÔ∏è –≠—Ç–∞–ø 2: –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

### 2.1 –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–ö–†–ò–¢–ò–ß–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–û–ù–Ø–¢–¨ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò**:

- [ ] **–ü–æ—Ä—è–¥–æ–∫ –∏–∑—É—á–µ–Ω**: –ü—Ä–æ—á–∏—Ç–∞–Ω –∫–æ–¥ `SimpleModuleCoordinator._create_integrations()` –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [ ] **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ–Ω—è—Ç–Ω—ã**: –ü–æ–Ω—è—Ç–Ω—ã –í–°–ï –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ (–∫—Ç–æ –æ—Ç –∫–æ–≥–æ –∑–∞–≤–∏—Å–∏—Ç –∏ –ø–æ—á–µ–º—É)
- [ ] **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (FirstRunPermissions, PermissionRestart)
- [ ] **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü–æ–Ω—è—Ç–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—á–µ–º—É –æ–Ω–∞ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∞—è
- [ ] **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞**: –ú–æ–∂–µ—Ç –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏? (–µ—Å–ª–∏ –¥–∞ - –ö–†–ò–¢–ò–ß–ù–û)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ AudioSystemIntegration –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ VoiceRecognition
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ AudioSystemIntegration –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ VoiceRecognition,
#            –ø–æ—Ç–æ–º—É —á—Ç–æ VoiceRecognition –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AVFAudioEngine,
#            –Ω–æ AVFAudioEngine —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ AudioSystemIntegration,
#            –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å engine –≤ VoiceRecognition –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

### 2.2 EventBus —Å–æ–±—ã—Ç–∏—è –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–ö–†–ò–¢–ò–ß–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –í–°–ï –ü–û–î–ü–ò–°–ö–ò**:

- [ ] **–í—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞–π–¥–µ–Ω—ã**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã (grep –ø–æ –∫–æ–¥—É)
- [ ] **–í—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω—ã**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã (grep –ø–æ –∫–æ–¥—É)
- [ ] **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏–∑—É—á–µ–Ω—ã**: –ò–∑—É—á–µ–Ω—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –í–°–ï–• —Å–æ–±—ã—Ç–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- [ ] **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–Ω—è—Ç–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π (breaking changes ‚Üí –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
- [ ] **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å? (–µ—Å–ª–∏ –Ω–µ—Ç - –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ audio.device.output_changed –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ audio.device.output_changed –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è,
#            –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è SpeechPlaybackIntegration, AudioSystemIntegration,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª —Ñ–æ—Ä–º–∞—Ç payload, –ø—Ä–æ–≤–µ—Ä–∏–ª —á—Ç–æ –≤—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

### 2.3 Selectors –∏ Gateways (–ö–†–ò–¢–ò–ß–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –í–°–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø**:

- [ ] **–í—Å–µ selectors –Ω–∞–π–¥–µ–Ω—ã**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï selectors, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã (grep –ø–æ –∫–æ–¥—É)
- [ ] **–í—Å–µ gateways –Ω–∞–π–¥–µ–Ω—ã**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï gateways, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã (grep –ø–æ –∫–æ–¥—É)
- [ ] **–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ interaction_matrix.yaml, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- [ ] **Guards –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï guard-—É—Å–ª–æ–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
- [ ] **–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï —Ç–µ—Å—Ç—ã selectors/gateways, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ –µ—Å—Ç—å decide_start_listening
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ decide_start_listening –ø—Ä–æ–≤–µ—Ä—è–µ—Ç permissions.mic, device.input, network,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ interaction_matrix.yaml –¥–ª—è —ç—Ç–∏—Ö –æ—Å–µ–π,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –≤—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è decide_start_listening
```

---

## üîó –≠—Ç–∞–ø 3: –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### 3.1 –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ù–ê–ô–¢–ò –ü–†–ò–ú–ï–†–´**:

- [ ] **–ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É**: –í—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É –ø–æ—Ö–æ–∂–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π (grep, codebase_search)
- [ ] **–ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º**: –í—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –ø–æ—Ö–æ–∂–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] **–ü–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏**: –í—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–∏—Å–∫ –ø–æ git log –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤
- [ ] **–ü—Ä–∏–º–µ—Ä—ã –∏–∑—É—á–µ–Ω—ã**: –ò–∑—É—á–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –ø–æ—Ö–æ–∂–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π (–∫–∞–∫ –æ–Ω–∏ —Ä–µ—à–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?)
- [ ] **–ü—Ä–æ–±–ª–µ–º—ã –∏–∑—É—á–µ–Ω—ã**: –ò–∑—É—á–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Ö–æ–∂–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π (–∫–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –±—ã–ª–∏ –¥–æ–ø—É—â–µ–Ω—ã?)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```bash
# ‚úÖ –•–û–†–û–®–û: –ù–∞—à–µ–ª –ø–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
# - AUDIO_HEADPHONES_OUTPUT_ANALYSIS.md - –ø—Ä–æ–±–ª–µ–º–∞ —Å AirPods
# - AVF_DEVICE_MONITORING_FIX_PLAN.md - –ø—Ä–æ–±–ª–µ–º–∞ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤
# - –ò–∑—É—á–∏–ª –∫–∞–∫ —Ä–µ—à–∞–ª–∏—Å—å –ø–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
```

### 3.2 –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–û–ù–Ø–¢–¨ –õ–û–ì–ò–ö–£**:

- [ ] **–í–µ—Å—å –∫–æ–¥ –ø—Ä–æ—á–∏—Ç–∞–Ω**: –ü—Ä–æ—á–∏—Ç–∞–Ω –í–ï–°–¨ –∫–æ–¥ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é (–Ω–µ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è)
- [ ] **–õ–æ–≥–∏–∫–∞ –ø–æ–Ω—è—Ç–Ω–∞**: –ü–æ–Ω—è—Ç–Ω–∞ –í–°–Ø –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏–∑–º–µ–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞ (–ø–æ—á–µ–º—É –æ–Ω —Ç–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω?)
- [ ] **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–∑–º–µ–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞ (—á—Ç–æ –¥–æ–ª–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è?)
- [ ] **–ü—Ä–æ–±–ª–µ–º—ã –Ω–∞–π–¥–µ–Ω—ã**: –ù–∞–π–¥–µ–Ω—ã –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –Ω–∞–π–¥–µ–Ω**: –ù–∞–π–¥–µ–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –≤ –∏–∑–º–µ–Ω—è–µ–º–æ–º –∫–æ–¥–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ü—Ä–æ—á–∏—Ç–∞–ª —Ç–æ–ª—å–∫–æ _handle_output_device_change()
# ‚úÖ –•–û–†–û–®–û: –ü—Ä–æ—á–∏—Ç–∞–ª –≤–µ—Å—å avf_audio_engine.py, –ø–æ–Ω—è–ª –ª–æ–≥–∏–∫—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤,
#            –ø–æ–Ω—è–ª –ø–æ—á–µ–º—É –µ—Å—Ç—å —Ä–∞–Ω–Ω–∏–π return, –ø–æ–Ω—è–ª –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã (player_node_connected),
#            –Ω–∞—à–µ–ª –ø—Ä–æ–±–ª–µ–º—É —Å _output_state
```

### 3.3 –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –í–°–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø**:

- [ ] **–ü—Ä—è–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï –º–æ–¥—É–ª–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–∑–º–µ–Ω—è–µ–º—ã–º –∫–æ–¥–æ–º (grep –ø–æ –∏–º–ø–æ—Ä—Ç–∞–º)
- [ ] **–û–±—Ä–∞—Ç–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï –º–æ–¥—É–ª–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∏–∑–º–µ–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞ (grep –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
- [ ] **–í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ù–∞–π–¥–µ–Ω—ã –í–°–ï –≤–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–∑–º–µ–Ω—è–µ–º—ã–º –∫–æ–¥–æ–º
- [ ] **–í–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)
- [ ] **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (macOS API, CoreAudio, –∏ —Ç.–¥.)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AVFoundation
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AVFoundation, CoreAudio, PyObjC,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, –ø—Ä–æ–≤–µ—Ä–∏–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å macOS 13+,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å AVAudioEngineConfigurationChangeNotification
```

---

## üõ°Ô∏è –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

### 4.1 –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã (–ö–†–ò–¢–ò–ß–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –í–°–ï –ò–ù–í–ê–†–ò–ê–ù–¢–´**:

- [ ] **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–≤—Å–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ EventBus")
- [ ] **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–¥—É–ª–µ–π**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π
- [ ] **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "_output_state –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å engine.isRunning()")
- [ ] **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã workflows**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã workflows (–ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ –µ—Å—Ç—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç "player_node_connected"
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ –µ—Å—Ç—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã:
#            - player_node_connected –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
#            - _output_state –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å engine.isRunning()
#            - –ü—Ä–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ engine –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
#            –ü—Ä–æ–≤–µ—Ä–∏–ª –≤—Å–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
```

### 4.2 –ü—Ä–∞–≤–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–ö–†–ò–¢–ò–ß–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –í–°–ï –ü–†–ê–í–ò–õ–ê**:

- [ ] **–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ interaction_matrix.yaml, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- [ ] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–æ–Ω—è—Ç–Ω—ã**: –ü–æ–Ω—è—Ç–Ω—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø—Ä–∞–≤–∏–ª (hard_stop, graceful, preference)
- [ ] **Guards –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –í–°–ï guard-—É—Å–ª–æ–≤–∏—è –¥–ª—è –ø—Ä–∞–≤–∏–ª
- [ ] **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –≤ gateways/workflows

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è device.input
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è device.input, device.output,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (hard_stop –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤),
#            –ø—Ä–æ–≤–µ—Ä–∏–ª guards –≤ gateways, –ø—Ä–æ–≤–µ—Ä–∏–ª —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∫–æ–¥–µ
```

### 4.3 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –ü–†–û–ß–ò–¢–ê–¢–¨**, –∞ **–ü–†–û–í–ï–†–ò–¢–¨ –û–°–û–ë–ï–ù–ù–û–°–¢–ò**:

- [ ] **macOS API**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ macOS API, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- [ ] **PyObjC**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ PyObjC (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Objective-C –æ–±—ä–µ–∫—Ç–∞–º–∏)
- [ ] **–ü–æ—Ç–æ–∫–∏**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ (main thread, background threads, async/await)
- [ ] **Event loops**: –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å event loops (asyncio, run_coroutine_threadsafe)

**–ü—Ä–∏–º–µ—Ä (–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)**:
```python
# ‚ùå –ü–õ–û–•–û: –ó–Ω–∞—é, —á—Ç–æ AVAudioEngineConfigurationChangeNotification –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞
# ‚úÖ –•–û–†–û–®–û: –ó–Ω–∞—é, —á—Ç–æ AVAudioEngineConfigurationChangeNotification –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞,
#            –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å run_coroutine_threadsafe –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π,
#            –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å loop –∏–∑ EventBus, –∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π,
#            –ø—Ä–æ–≤–µ—Ä–∏–ª –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å event loops –≤ —Ñ–æ–Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
```

---

## üìä –≠—Ç–∞–ø 5: –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π Impact Map

### 5.1 –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è Impact Map (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ù–ï –ü–†–û–°–¢–û –¢–ê–ë–õ–ò–¶–£**, –∞ **–î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó**:

- [ ] **–í—Å–µ –æ—Å–∏ —É—á—Ç–µ–Ω—ã**: –í Impact Map —É–∫–∞–∑–∞–Ω—ã –í–°–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –æ—Å–∏ (–Ω–µ —Ç–æ–ª—å–∫–æ –æ—á–µ–≤–∏–¥–Ω—ã–µ)
- [ ] **–í—Å–µ –º–æ–¥—É–ª–∏ —É—á—Ç–µ–Ω—ã**: –í Impact Map —É–∫–∞–∑–∞–Ω—ã –í–°–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –º–æ–¥—É–ª–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è –∫–æ—Å–≤–µ–Ω–Ω—ã–µ)
- [ ] **–í—Å–µ —Å–æ–±—ã—Ç–∏—è —É—á—Ç–µ–Ω—ã**: –í Impact Map —É–∫–∞–∑–∞–Ω—ã –í–°–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–æ–±—ã—Ç–∏—è EventBus (–≤—Ö–æ–¥–Ω—ã–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ)
- [ ] **–í—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ —É—á—Ç–µ–Ω—ã**: –í Impact Map —É–∫–∞–∑–∞–Ω—ã –í–°–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏/—Ñ–ª–∞–≥–∏ (–≤–∫–ª—é—á–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- [ ] **–í—Å–µ —Ç–µ—Å—Ç—ã —É—á—Ç–µ–Ω—ã**: –í Impact Map —É–∫–∞–∑–∞–Ω—ã –í–°–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ç–µ—Å—Ç—ã (unit, integration, pairwise)
- [ ] **–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —É—á—Ç–µ–Ω—ã**: –í Impact Map —É–∫–∞–∑–∞–Ω—ã –í–°–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–®–∞–±–ª–æ–Ω —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π Impact Map**:

```markdown
## Impact Map –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è: [–ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è]

### –û—Å—å/–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç: [–ù–∞–∑–≤–∞–Ω–∏–µ]

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- –ú–æ–¥—É–ª–∏: [—Å–ø–∏—Å–æ–∫ —Å –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º]
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: [—Å–ø–∏—Å–æ–∫ —Å –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º]
- EventBus —Å–æ–±—ã—Ç–∏—è: [—Å–ø–∏—Å–æ–∫ —Å —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ payload]
- –ö–æ–Ω—Ñ–∏–≥–∏/–§–ª–∞–≥–∏: [—Å–ø–∏—Å–æ–∫ —Å –ø—É—Ç—è–º–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏]
- –¢–µ—Å—Ç—ã: [—Å–ø–∏—Å–æ–∫ —Å –ø—É—Ç—è–º–∏ –∫ —Ç–µ—Å—Ç–∞–º]
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [—Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤]

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- –ü—Ä—è–º—ã–µ: [—Å–ø–∏—Å–æ–∫]
- –û–±—Ä–∞—Ç–Ω—ã–µ: [—Å–ø–∏—Å–æ–∫]
- –í–Ω–µ—à–Ω–∏–µ: [—Å–ø–∏—Å–æ–∫]

**–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã**:
- [—Å–ø–∏—Å–æ–∫ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è]

**–†–∏—Å–∫–∏**:
- [—Å–ø–∏—Å–æ–∫ —Ä–∏—Å–∫–æ–≤ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è]

**–ü—Ä–æ–≤–µ—Ä–∫–∏**:
- [—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–µ—Ä–µ–¥ –º–µ—Ä–¥–∂–µ–º]
```

---

## ‚úÖ –≠—Ç–∞–ø 6: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### 6.1 –ß–µ–∫-–ª–∏—Å—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

- [ ] **–í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã**: unified_config.yaml, feature flags, —Å—Ö–µ–º—ã
- [ ] **–í—Å–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, EventBus, selectors/gateways
- [ ] **–í–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏–∑—É—á–µ–Ω**: –ø–æ—Ö–æ–∂–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] **–í—Å–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ, –º–æ–¥—É–ª—å–Ω—ã–µ, —Å–æ—Å—Ç–æ—è–Ω–∏—è, workflows
- [ ] **–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: interaction_matrix.yaml, guards, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- [ ] **–í—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: macOS API, PyObjC, –ø–æ—Ç–æ–∫–∏, event loops
- [ ] **–î–µ—Ç–∞–ª—å–Ω–∞—è Impact Map —Å–æ–∑–¥–∞–Ω–∞**: –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Ä–∏—Å–∫–∏ —É—á—Ç–µ–Ω—ã

### 6.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∫–æ–¥–∞

**–ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú –ö–û–î–ê** –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –ö–∞–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏/—Ñ–ª–∞–≥–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ? –ö–∞–∫ –æ–Ω–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è?
2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ö–∞–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å? –ö–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?
3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: –ö–∞–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç? –ü–æ—á–µ–º—É –æ–Ω —Ç–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω?
4. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ö–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å—Ç—å? –ö–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ?
5. **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã**: –ö–∞–∫–∏–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è? –ö–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç?
6. **–ü—Ä–∞–≤–∏–ª–∞**: –ö–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å? –ö–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏—Ö —Å–æ–±–ª—é–¥–∞–µ—Ç?
7. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: –ö–∞–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å? –ö–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏—Ö —É—á–∏—Ç—ã–≤–∞–µ—Ç?

**–ï—Å–ª–∏ –Ω–∞ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –Ω–µ—Ç —á–µ—Ç–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ - –ù–ï –ù–ê–ß–ò–ù–ê–¢–¨ –ö–û–î!**

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∏–º–µ—Ä 1: –ê—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞ –∏ AirPods

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ AirPods –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–æ—Å—å, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª–æ—Å—å.

**–ß—Ç–æ –Ω–µ –±—ã–ª–æ —É—á—Ç–µ–Ω–æ**:
- ‚ùå AVAudioEngineConfigurationChangeNotification –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç engine –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå _output_state –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è —Å engine.isRunning()
- ‚ùå Event loop –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ùå –†–∞–Ω–Ω–∏–π return –≤ _handle_output_device_change() –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

**–ß—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ —É—á–µ—Å—Ç—å**:
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞–∂–µ –µ—Å–ª–∏ –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- ‚úÖ _output_state –¥–æ–ª–∂–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å engine.isRunning() –ø—Ä–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö
- ‚úÖ Event loop –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å—Å—è –∏–∑ EventBus, –∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π
- ‚úÖ –ù—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ sleep()

**–£—Ä–æ–∫**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã.

### –ü—Ä–∏–º–µ—Ä 2: Feature flags –∏ kill-switches

**–ü—Ä–æ–±–ª–µ–º–∞**: Feature flag –Ω–µ —Ä–∞–±–æ—Ç–∞–ª, –ø–æ—Ç–æ–º—É —á—Ç–æ kill-switch –∏–º–µ–ª –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.

**–ß—Ç–æ –Ω–µ –±—ã–ª–æ —É—á—Ç–µ–Ω–æ**:
- ‚ùå –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ñ–ª–∞–≥–æ–≤ (kill-switch > env > unified_config)
- ‚ùå –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ñ–ª–∞–≥–∏ (–ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ vs –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- ‚ùå –£—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–ª–∞–≥–æ–≤ (–≤ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö, –≤ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö)

**–ß—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ —É—á–µ—Å—Ç—å**:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–ª–∞–≥–æ–≤
- ‚úÖ –ü–æ–Ω—è—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ñ–ª–∞–≥–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–ª–∞–≥–æ–≤

**–£—Ä–æ–∫**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏–∫—É feature flags –ø–æ–ª–Ω–æ—Å—Ç—å—é, –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ —Ñ–ª–∞–≥–∞.

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (—Å–º. `PLANNING_PROCESS_ORDER.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è):
1. `CONTEXT_AWARE_PLANNING_GUIDE.md` ‚Äî **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô** –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–ü–ï–†–í–´–ô —ç—Ç–∞–ø - —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)
2. `ARCHITECTURE_ANALYSIS_CHECKLIST.md` ‚Äî **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô** –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–í–¢–û–†–û–ô —ç—Ç–∞–ø - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ü–û–°–õ–ï —ç—Ç–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞)
3. `CONFIGURATION_ANALYSIS_CHECKLIST.md` ‚Äî **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô** –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (–¢–†–ï–¢–ò–ô —ç—Ç–∞–ø - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ü–û–°–õ–ï ARCHITECTURE_ANALYSIS_CHECKLIST.md)
4. `PRE_CHANGE_PLANNING_CHECKLIST.md` ‚Äî **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô** –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ß–ï–¢–í–ï–†–¢–´–ô —ç—Ç–∞–ø - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ü–û–°–õ–ï CONFIGURATION_ANALYSIS_CHECKLIST.md)

**–î—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã**:
- `PLANNING_PROCESS_ORDER.md` ‚Äî –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —á–µ–∫-–ª–∏—Å—Ç–æ–≤
- `.cursorrules` (—Ä–∞–∑–¥–µ–ª 11) ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `FEATURE_FLAGS.md` ‚Äî —Ä–µ–µ—Å—Ç—Ä feature flags
- `STATE_CATALOG.md` ‚Äî –∫–∞—Ç–∞–ª–æ–≥ –æ—Å–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `config/interaction_matrix.yaml` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

---

**–í–µ—Ä—Å–∏—è**: 1.1  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-XX  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-01-XX (–¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ CONFIGURATION_ANALYSIS_CHECKLIST.md –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
