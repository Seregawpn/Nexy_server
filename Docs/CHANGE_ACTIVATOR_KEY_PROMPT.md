# –ü—Ä–æ–º–ø—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∞—Ç–æ—Ä–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —Å –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ –õ–µ–≤—ã–π –®–∏—Ñ—Ç

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ç–æ—Ä–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —Å **–ø—Ä–æ–±–µ–ª–∞** –Ω–∞ **–õ–µ–≤—ã–π –®–∏—Ñ—Ç** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Nexy. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–∫–æ–Ω—Ñ–∏–≥, –º–æ–Ω–∏—Ç–æ—Ä—ã), –Ω–æ –æ—Å—Ç–∞–ª–∏—Å—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –≤ –ª–æ–≥–∞—Ö –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –£–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:
1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/unified_config.yaml` ‚Üí `keyboard.key_to_monitor: left_shift` (—Å—Ç—Ä–æ–∫–∞ 130)
2. **QuartzKeyboardMonitor**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `left_shift: 56` –≤ `KEYCODES` (—Å—Ç—Ä–æ–∫–∞ 48 –≤ `quartz_monitor.py`)
3. **KeyboardMonitor (pynput)**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `left_shift` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º (—Å—Ç—Ä–æ–∫–∏ 270-278 –≤ `keyboard_monitor.py`)

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
1. **–õ–æ–≥–∏ –≤ `input_processing_integration.py`**: 3 –º–µ—Å—Ç–∞ —Å "space" (—Å—Ç—Ä–æ–∫–∏ 161, 628, 821)
2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ `input_processing_integration.py`**: 3 –º–µ—Å—Ç–∞ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º "–ø—Ä–æ–±–µ–ª" (—Å—Ç—Ä–æ–∫–∏ 545, 718, 816)
3. **Debug-—Å–æ–æ–±—â–µ–Ω–∏–µ**: 1 –º–µ—Å—Ç–æ —Å "–ü–†–û–ë–ï–õ" (—Å—Ç—Ä–æ–∫–∞ 507)

## –ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)
- **–§–∞–π–ª**: `config/unified_config.yaml`
- **–°–µ–∫—Ü–∏—è**: `integrations.keyboard.key_to_monitor`
- **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `left_shift` ‚úÖ
- **–ó–∞–≥—Ä—É–∑–∫–∞**: –ß–µ—Ä–µ–∑ `UnifiedConfigLoader` ‚Üí `KeyboardConfig` ‚Üí –º–æ–Ω–∏—Ç–æ—Ä—ã

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–¥–≤–∞ backend)

#### 2.1 QuartzKeyboardMonitor (macOS –Ω–∞—Ç–∏–≤–Ω—ã–π) ‚úÖ
- **–§–∞–π–ª**: `modules/input_processing/keyboard/mac/quartz_monitor.py`
- **–°—Ç—Ä–æ–∫–∞ 48**: `"left_shift": 56` –≤ `KEYCODES` —Å–ª–æ–≤–∞—Ä–µ
- **–°—Ç—Ä–æ–∫–∞ 89**: `_target_keycode` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ `KEYCODES.get(self.key_to_monitor)`
- **Keycode**: 56 = –ª–µ–≤—ã–π Shift, 60 = –ø—Ä–∞–≤—ã–π Shift (—Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å—Ç—Ä–æ–∫–∞ 49)

#### 2.2 KeyboardMonitor (pynput fallback) ‚úÖ
- **–§–∞–π–ª**: `modules/input_processing/keyboard/keyboard_monitor.py`
- **–°—Ç—Ä–æ–∫–∏ 270-278**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `left_shift` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–ª–∏—á–∏—Ç—å –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: pynput –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `keyboard.Key.shift` (–æ–±—â–∏–π –¥–ª—è –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω)
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pynput

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- **–§–∞–π–ª**: `integration/integrations/input_processing_integration.py`
- **–ú–µ—Ç–æ–¥—ã**:
  - `_handle_press()` (—Å—Ç—Ä–æ–∫–∞ 156) - –Ω–∞—á–∞–ª–æ —É–¥–µ—Ä–∂–∞–Ω–∏—è ‚Üí PRESS —Å–æ–±—ã—Ç–∏–µ
  - `_handle_long_press()` (—Å—Ç—Ä–æ–∫–∞ 717) - –¥–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (‚â•0.6s) ‚Üí —Å—Ç–∞—Ä—Ç –∑–∞–ø–∏—Å–∏
  - `_handle_short_press()` (—Å—Ç—Ä–æ–∫–∞ 544) - –∫–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (<0.1s) ‚Üí –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ
  - `_handle_key_release()` (—Å—Ç—Ä–æ–∫–∞ 815) - –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏

## –ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ

### 1. –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (SHORT_PRESS) - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

**–§–∞–π–ª**: `integration/integrations/input_processing_integration.py`  
**–ú–µ—Ç–æ–¥**: `_handle_short_press()` (—Å—Ç—Ä–æ–∫–∞ 544)

**–õ–æ–≥–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è**:

#### –°—Ü–µ–Ω–∞—Ä–∏–π A: SHORT_PRESS –ë–ï–ó –∑–∞–ø–∏—Å–∏ (—Å—Ç—Ä–æ–∫–∏ 550-595)
- **–£—Å–ª–æ–≤–∏–µ**: `_pending_session_id is not None` –∏ `not _recording_started`
- **–î–µ–π—Å—Ç–≤–∏—è**:
  1. –ï—Å–ª–∏ `current_mode == PROCESSING`:
     - –ü—É–±–ª–∏–∫—É–µ—Ç `keyboard.short_press` (—Å—Ç—Ä–æ–∫–∞ 563) ‚Üí ProcessingWorkflow –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
     - –ü—É–±–ª–∏–∫—É–µ—Ç `mode.request` ‚Üí `SLEEPING` (—Å—Ç—Ä–æ–∫–∞ 572) —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º 100
  2. –°–±—Ä–æ—Å –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å–µ—Å—Å–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 581-584)
  3. –ü—É–±–ª–∏–∫—É–µ—Ç `keyboard.short_press_cancelled` (—Å—Ç—Ä–æ–∫–∞ 587)

#### –°—Ü–µ–Ω–∞—Ä–∏–π B: SHORT_PRESS –° –∑–∞–ø–∏—Å—å—é (—Å—Ç—Ä–æ–∫–∏ 614-662)
- **–£—Å–ª–æ–≤–∏–µ**: `_recording_started` –∏ `_current_session_id is not None`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏ (—Å—Ç—Ä–æ–∫–∞ 624)
- **–î–µ–π—Å—Ç–≤–∏—è**:
  1. –ü—É–±–ª–∏–∫—É–µ—Ç `voice.recording_stop` (—Å—Ç—Ä–æ–∫–∞ 629)
  2. –û–∂–∏–¥–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (—Å—Ç—Ä–æ–∫–∞ 639)
  3. –ü–µ—Ä–µ—Ö–æ–¥ –≤ `PROCESSING` (—Å—Ç—Ä–æ–∫–∞ 649) –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
  4. –£–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `session_id` –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è gRPC

#### –°—Ü–µ–Ω–∞—Ä–∏–π C: SHORT_PRESS –¥–ª—è –æ—Ç–º–µ–Ω—ã gRPC (—Å—Ç—Ä–æ–∫–∏ 664-707)
- **–£—Å–ª–æ–≤–∏–µ**: –ó–∞–ø–∏—Å—å –ù–ï –≤–µ–ª–∞—Å—å
- **–î–µ–π—Å—Ç–≤–∏—è**:
  1. –ü—É–±–ª–∏–∫—É–µ—Ç `grpc.request_cancel` (—Å—Ç—Ä–æ–∫–∞ 668)
  2. –ï—Å–ª–∏ `current_mode == PROCESSING`:
     - –ü—É–±–ª–∏–∫—É–µ—Ç `playback.cancelled` (—Å—Ç—Ä–æ–∫–∞ 681) ‚Üí –µ–¥–∏–Ω—ã–π –∫–∞–Ω–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
  3. –ü–µ—Ä–µ—Ö–æ–¥ –≤ `SLEEPING` (—Å—Ç—Ä–æ–∫–∞ 693) —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º 80
  4. –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (—Å—Ç—Ä–æ–∫–∏ 702-707)

### 2. InterruptManagementIntegration (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π)

**–§–∞–π–ª**: `integration/integrations/interrupt_management_integration.py`

**–ü–æ–¥–ø–∏—Å–∫–∏**:
- `interrupt.request` (—Å—Ç—Ä–æ–∫–∞ 91) - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ
- `interrupt.cancel` (—Å—Ç—Ä–æ–∫–∞ 92) - –æ—Ç–º–µ–Ω–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**:
- `_handle_speech_stop()` (—Å—Ç—Ä–æ–∫–∞ 347) - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ—á–∏
- `_handle_recording_stop()` (—Å—Ç—Ä–æ–∫–∞ 399) - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏
- `_handle_session_clear()` (—Å—Ç—Ä–æ–∫–∞ 430) - –æ—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–∏
- `_handle_full_reset()` (—Å—Ç—Ä–æ–∫–∞ 461) - –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å

**–î–µ–π—Å—Ç–≤–∏—è**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ `InterruptCoordinator` —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

### 3. ProcessingWorkflow (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è)

**–§–∞–π–ª**: `integration/workflows/processing_workflow.py`

**–ü–æ–¥–ø–∏—Å–∫–∏**:
- `keyboard.short_press` (—á–µ—Ä–µ–∑ `_on_interrupt_request`, —Å—Ç—Ä–æ–∫–∞ 395)
- `playback.cancelled` (—á–µ—Ä–µ–∑ `_on_playback_cancelled`)

**–î–µ–π—Å—Ç–≤–∏—è**:
- –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∞—É—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 409)
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –æ—Ç–º–µ–Ω—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 412)
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –≤ `SLEEPING` (—Å—Ç—Ä–æ–∫–∞ 415)

### 4. SpeechPlaybackIntegration (–µ–¥–∏–Ω—ã–π –∫–∞–Ω–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è)

**–§–∞–π–ª**: `integration/integrations/speech_playback_integration.py`

**–ü–æ–¥–ø–∏—Å–∫–∏**:
- `playback.cancelled` ‚Üí `_on_unified_interrupt()` (—Å—Ç—Ä–æ–∫–∞ 402)

**–î–µ–π—Å—Ç–≤–∏—è**:
- –û—Ç–º–µ–Ω–∞ —Ç–∞–π–º–µ—Ä–∞ —Ç–∏—à–∏–Ω—ã (—Å—Ç—Ä–æ–∫–∞ 417)
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞ 424)
- –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π (—Å—Ç—Ä–æ–∫–∞ 427)

## –ß–µ–∫-–ª–∏—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞–∑–¥–µ–ª—É 11 –ø—Ä–∞–≤–∏–ª)

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
- [x] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å unified_config –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω—É–∂–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è `key_to_monitor` (`left_shift`)

### –í–æ –≤—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
- [x] `config/unified_config.yaml`: `keyboard.key_to_monitor: left_shift`
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ `UnifiedConfigLoader`

#### 2. QuartzKeyboardMonitor ‚úÖ
- [x] `KEYCODES` —Å–ª–æ–≤–∞—Ä—å: `"left_shift": 56`
- [x] `_target_keycode` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

#### 3. KeyboardMonitor (pynput fallback) ‚úÖ
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `left_shift` –≤ `_is_target_key()`
- [x] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–ª–∏—á–∏—Ç—å –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π Shift

#### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢–°–Ø –û–ë–ù–û–í–õ–ï–ù–ò–ï
- [ ] **–°—Ç—Ä–æ–∫–∞ 161**: `"üé§ PTT: keyDown(space) ‚Üí PRESS"` ‚Üí `"üé§ PTT: keyDown(left_shift) ‚Üí PRESS"`
- [ ] **–°—Ç—Ä–æ–∫–∞ 628**: `"üõë PTT: keyUp(space) ‚Üí RECORDING_STOP"` ‚Üí `"üõë PTT: keyUp(left_shift) ‚Üí RECORDING_STOP"`
- [ ] **–°—Ç—Ä–æ–∫–∞ 821**: `"üõë PTT: keyUp(space) ‚Üí RELEASE"` ‚Üí `"üõë PTT: keyUp(left_shift) ‚Üí RELEASE"`
- [ ] **–°—Ç—Ä–æ–∫–∞ 507**: `"‚å®Ô∏è DEBUG: –ù–ê–ñ–ú–ò–¢–ï –ü–†–û–ë–ï–õ –°–ï–ô–ß–ê–° –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø!"` ‚Üí `"‚å®Ô∏è DEBUG: –ù–ê–ñ–ú–ò–¢–ï –õ–ï–í–´–ô SHIFT –°–ï–ô–ß–ê–° –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø!"`

#### 5. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢–°–Ø –û–ë–ù–û–í–õ–ï–ù–ò–ï
- [ ] **–°—Ç—Ä–æ–∫–∞ 545**: `"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ø—Ä–æ–±–µ–ª–∞"""` ‚Üí `"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ª–µ–≤–æ–≥–æ Shift"""`
- [ ] **–°—Ç—Ä–æ–∫–∞ 718**: `"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ø—Ä–æ–±–µ–ª–∞"""` ‚Üí `"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ª–µ–≤–æ–≥–æ Shift"""`
- [ ] **–°—Ç—Ä–æ–∫–∞ 816**: `"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –ø—Ä–æ–±–µ–ª–∞"""` ‚Üí `"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –ª–µ–≤–æ–≥–æ Shift"""`

#### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `Docs/ARCHITECTURE_OVERVIEW.md` –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–æ–±–µ–ª–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≥–Ω–∞—Ç—å —Ä—É—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
  - [ ] –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –õ–µ–≤–æ–≥–æ –®–∏—Ñ—Ç–∞ (‚â•0.6s) ‚Üí —Å—Ç–∞—Ä—Ç –∑–∞–ø–∏—Å–∏
  - [ ] –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –õ–µ–≤–æ–≥–æ –®–∏—Ñ—Ç–∞ (<0.1s) ‚Üí –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
  - [ ] –û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –õ–µ–≤–æ–≥–æ –®–∏—Ñ—Ç–∞ ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–∞–≤—ã–π Shift –ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–æ–≥–∏ —á–∏—Å—Ç—ã –æ—Ç –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Keycodes –¥–ª—è macOS (Quartz)
- **–ü—Ä–æ–±–µ–ª**: 49
- **–õ–µ–≤—ã–π Shift**: 56 ‚úÖ
- **–ü—Ä–∞–≤—ã–π Shift**: 60
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: `quartz_monitor.py:48-49`

### pynput –∏ —Ä–∞–∑–ª–∏—á–∏–µ –ª–µ–≤–æ–≥–æ/–ø—Ä–∞–≤–æ–≥–æ Shift
- **–ü—Ä–æ–±–ª–µ–º–∞**: `keyboard.Key.shift` –Ω–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pynput (—Å—Ç—Ä–æ–∫–∞ 275-277 –≤ `keyboard_monitor.py`)
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Quartz –Ω–∞ macOS –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è

### –§–æ—Ä–º–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: `left_shift` (—è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –ª–µ–≤–æ–≥–æ Shift)
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**: `config/unified_config.yaml` (—Å—Ç—Ä–æ–∫–∞ 130)

## –†–∏—Å–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è–º–∏ –∫–ª–∞–≤–∏—à
- **–†–∏—Å–∫**: –õ–µ–≤—ã–π Shift –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏—è—Ö
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ (push-to-talk), –Ω–µ –ø—Ä–∏ –∫–æ—Ä–æ—Ç–∫–æ–º –Ω–∞–∂–∞—Ç–∏–∏
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ - –∫–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

### 2. –†–∞–∑–ª–∏—á–∏–µ –ª–µ–≤–æ–≥–æ/–ø—Ä–∞–≤–æ–≥–æ Shift
- **–†–∏—Å–∫**: pynput –Ω–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π Shift
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö (—Å—Ç—Ä–æ–∫–∞ 275-277)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ - Quartz –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ macOS

### 3. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
- **–†–∏—Å–∫**: –ö–æ–¥ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ "space"
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ `key_to_monitor` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –Ω–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **–î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –õ–µ–≤–æ–≥–æ –®–∏—Ñ—Ç–∞** (‚â•0.6s):
   - [ ] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - [ ] –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º LISTENING
   - [ ] –°–æ–±—ã—Ç–∏–µ `voice.recording_start` –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è
   - [ ] –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `keyDown(left_shift)`

2. **–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –õ–µ–≤–æ–≥–æ –®–∏—Ñ—Ç–∞** (<0.1s):
   - [ ] –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–µ—Å–ª–∏ –∏–¥–µ—Ç)
   - [ ] –û—Ç–º–µ–Ω–∞ gRPC —Å—Ç—Ä–∏–º–∞
   - [ ] –ü–µ—Ä–µ—Ö–æ–¥ –≤ SLEEPING (–µ—Å–ª–∏ –±–µ–∑ –∑–∞–ø–∏—Å–∏) –∏–ª–∏ PROCESSING (–µ—Å–ª–∏ —Å –∑–∞–ø–∏—Å—å—é)
   - [ ] –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `keyUp(left_shift)`

3. **–û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –õ–µ–≤–æ–≥–æ –®–∏—Ñ—Ç–∞** (–ø–æ—Å–ª–µ –¥–ª–∏–Ω–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è):
   - [ ] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - [ ] –°–æ–±—ã—Ç–∏–µ `voice.recording_stop` –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è
   - [ ] –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º PROCESSING
   - [ ] –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `keyUp(left_shift) ‚Üí RELEASE`

4. **–ü—Ä–∞–≤—ã–π Shift**:
   - [ ] –ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω
   - [ ] –ù–ï –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
   - [ ] –õ–æ–≥–∏ –ù–ï —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–æ–±—ã—Ç–∏–π –æ—Ç –ø—Ä–∞–≤–æ–≥–æ Shift

5. **Fallback –Ω–∞ pynput** (–µ—Å–ª–∏ Quartz –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω):
   - [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö –æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–ª–∏—á–∏—Ç—å –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π Shift
   - [ ] –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—â–∏–º Shift (–æ–±–∞ Shift –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç)

## –ü—Ä–∏–º–µ—Ä—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. –õ–æ–≥–∏ –≤ `input_processing_integration.py`

#### –°—Ç—Ä–æ–∫–∞ 161:
```python
# –ë—ã–ª–æ:
logger.info(f"üé§ PTT: keyDown(space) ‚Üí PRESS, timestamp={event.timestamp}")

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
logger.info(f"üé§ PTT: keyDown(left_shift) ‚Üí PRESS, timestamp={event.timestamp}")
```

#### –°—Ç—Ä–æ–∫–∞ 628:
```python
# –ë—ã–ª–æ:
logger.info(f"üõë PTT: keyUp(space) ‚Üí RECORDING_STOP, session={self._current_session_id}, duration={duration*1000:.0f}ms, reason=short_press")

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
logger.info(f"üõë PTT: keyUp(left_shift) ‚Üí RECORDING_STOP, session={self._current_session_id}, duration={duration*1000:.0f}ms, reason=short_press")
```

#### –°—Ç—Ä–æ–∫–∞ 821:
```python
# –ë—ã–ª–æ:
logger.info(f"üõë PTT: keyUp(space) ‚Üí RELEASE, duration={duration_ms:.0f}ms")

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
logger.info(f"üõë PTT: keyUp(left_shift) ‚Üí RELEASE, duration={duration_ms:.0f}ms")
```

#### –°—Ç—Ä–æ–∫–∞ 507:
```python
# –ë—ã–ª–æ:
print(f"‚å®Ô∏è DEBUG: –ù–ê–ñ–ú–ò–¢–ï –ü–†–û–ë–ï–õ –°–ï–ô–ß–ê–° –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø!")

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
print(f"‚å®Ô∏è DEBUG: –ù–ê–ñ–ú–ò–¢–ï –õ–ï–í–´–ô SHIFT –°–ï–ô–ß–ê–° –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø!")
```

### 2. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ `input_processing_integration.py`

#### –°—Ç—Ä–æ–∫–∞ 545:
```python
# –ë—ã–ª–æ:
async def _handle_short_press(self, event: KeyEvent):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ø—Ä–æ–±–µ–ª–∞"""

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
async def _handle_short_press(self, event: KeyEvent):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ª–µ–≤–æ–≥–æ Shift"""
```

#### –°—Ç—Ä–æ–∫–∞ 718:
```python
# –ë—ã–ª–æ:
async def _handle_long_press(self, event: KeyEvent):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ø—Ä–æ–±–µ–ª–∞"""

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
async def _handle_long_press(self, event: KeyEvent):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –ª–µ–≤–æ–≥–æ Shift"""
```

#### –°—Ç—Ä–æ–∫–∞ 816:
```python
# –ë—ã–ª–æ:
async def _handle_key_release(self, event: KeyEvent):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –ø—Ä–æ–±–µ–ª–∞"""

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
async def _handle_key_release(self, event: KeyEvent):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –ª–µ–≤–æ–≥–æ Shift"""
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (—Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–µ–∫—Ç–∞)

### 1. –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `unified_config.yaml` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —á–∏—Ç–∞—é—Ç `key_to_monitor` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞, –Ω–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞

### 2. –ò–∑–æ–ª—è—Ü–∏—è –º–æ–¥—É–ª–µ–π
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `input_processing_integration.py`
- ‚úÖ –ú–æ–¥—É–ª–∏ `input_processing` –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ EventBus —Å–æ–±—ã—Ç–∏—è

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `ErrorHandler`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ session_id

### 4. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `space` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–æ–¥–µ
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∫–ª–∞–≤–∏—à–∞–º–∏

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [ ] –õ–µ–≤—ã–π Shift –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –ø—Ä–∏ –¥–ª–∏–Ω–Ω–æ–º –Ω–∞–∂–∞—Ç–∏–∏ (‚â•0.6s)
- [ ] –õ–µ–≤—ã–π Shift –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ—Ä–æ—Ç–∫–æ–º –Ω–∞–∂–∞—Ç–∏–∏ (<0.1s)
- [ ] –ü—Ä–∞–≤—ã–π Shift –ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω
- [ ] –í—Å–µ –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π "space" –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π "–ø—Ä–æ–±–µ–ª"
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- [ ] Fallback –Ω–∞ pynput —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ —Ä–∞–∑–ª–∏—á–∏–∏ –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π)
- [ ] –†—É—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- [ ] –õ–æ–≥–∏ —á–∏—Å—Ç—ã –æ—Ç –æ—à–∏–±–æ–∫

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ö–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (`space` –∏ `left_shift`) —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
2. **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ `left_shift` —á–µ—Ä–µ–∑ `unified_config.yaml`
3. **–¢–µ—Å—Ç—ã**: –ï—Å–ª–∏ –µ—Å—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∏—Ö –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è `left_shift`
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –µ—ë –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
