# Task Brief: Исправление проблемы gRPC подключения

**Дата:** 13 января 2026  
**Тип:** task-brief  
**Статус:** ✅ Завершено

---

## Проблема

Клиент не мог подключиться к удалённому серверу через gRPC. Сервер возвращал ошибку 400 на HTTP/2 preface.

---

## Root Cause

Несовпадение режима транспорта:
- Клиент использовал `insecure_channel` для порта 443
- Nginx на порту 443 требует TLS+HTTP/2
- Результат: 400 ошибка на HTTP/2 preface

---

## Решение

1. ✅ Исправлена конфигурация Nginx (порядок location блоков)
2. ✅ Nginx пересобран с модулем grpc
3. ✅ Зависимости обновлены до последних версий
4. ✅ Клиент переведён на `secure_channel` с поддержкой self-signed сертификата

---

## Результат

✅ gRPC работает через TLS+HTTP/2  
✅ Запросы успешно доходят до сервера  
✅ В логах: `POST /streaming.StreamingService/StreamAudio HTTP/2.0" 200`

---

## Документация

- `Docs/GRPC_FIX_FINAL_REPORT.md` - полный отчёт
- `Docs/CLIENT_CONNECTION_GUIDE.md` - обновлённое руководство
- `server/scripts/test_grpc_connection.py` - исправленный тестовый скрипт
