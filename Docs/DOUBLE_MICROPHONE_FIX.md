# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–æ–π–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ AVFAudioEngine –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ **–¥–≤–æ–π–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞**:

1. **AVFAudioEngine** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω —á–µ—Ä–µ–∑ AVFoundation (macOS –Ω–∞—Ç–∏–≤–Ω—ã–π API)
2. **SpeechRecognizer** —Å–æ–∑–¥–∞–≤–∞–ª `sr.Microphone()` –∏ –≤—ã–∑—ã–≤–∞–ª `adjust_for_ambient_noise()`, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–ª–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω —á–µ—Ä–µ–∑ PyAudio

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –∏ –ø—Ä–æ–±–ª–µ–º–∞–º —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `voice_recognition_integration.py`

1. **–£—Å–ª–æ–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ SpeechRecognizer**:
   ```python
   if self._use_avf:
       # –ù–ï —Å–æ–∑–¥–∞—ë–º SpeechRecognizer –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ AVF
       self._recognizer = None
   elif not self.config.simulate and _REAL_VOICE_AVAILABLE:
       # –°–æ–∑–¥–∞—ë–º SpeechRecognizer —Ç–æ–ª—å–∫–æ –¥–ª—è legacy —Ä–µ–∂–∏–º–∞
       self._recognizer = SpeechRecognizer(DEFAULT_RECOGNITION_CONFIG)
   ```

2. **–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sr.Recognizer()**:
   ```python
   if self._use_avf:
       # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π Recognizer –±–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
       recognizer = sr.Recognizer()
       language = batch_language
   ```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç –ø—Ä—è–º–æ–π —Ä–∞–±–æ—Ç—ã SpeechRecognition
```
‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞ 1.04s!
üìù –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: 'Google stop holding'
```

**–í—ã–≤–æ–¥**: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ SpeechRecognition —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º.

### –¢–µ—Å—Ç —Å AVF (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- ‚úÖ –î–≤–æ–π–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ AVFAudioEngine
- ‚ö†Ô∏è –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤—Å—ë –µ—â—ë –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç UnknownValueError (–≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–∞—á–µ—Å—Ç–≤–æ –∞—É–¥–∏–æ)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –î–≤–æ–π–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –≤ Google API (—Å—Ä–∞–≤–Ω–∏—Ç—å —Å –ø—Ä—è–º—ã–º —Ç–µ—Å—Ç–æ–º)
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å VAD –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ —Ç–∏—à–∏–Ω—ã
4. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥–∞

## –í—ã–≤–æ–¥

–î–≤–æ–π–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –±—ã–ª–∞ **—Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π** –∏ —Ç–µ–ø–µ—Ä—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ SpeechRecognition —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –º–µ–∂–¥—É AVFAudioEngine –∏ SpeechRecognizer.

