# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ª–æ–≥–∏–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏

## ‚úÖ –õ–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### 1. **AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚úÖ
- AVF –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–∞ ~1 —Å–µ–∫—É–Ω–¥—É
- –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
  - –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "System Default Input", "Sergiy's AirPods")
  - UID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  - –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ –∞—É–¥–∏–æ (sample_rate, channels, bit_depth)
  - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ø–µ—Ä–≤—ã–π —á–∞–Ω–∫, RMS, min/max –∑–Ω–∞—á–µ–Ω–∏—è)
- AVF –¥–µ–∑–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω ‚úÖ

**–ö–æ–¥:** `_get_device_info_via_avf()` (—Å—Ç—Ä–æ–∫–∏ 1282-1340)

#### 2. **Google –∞–∫—Ç–∏–≤–∞—Ü–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞** ‚úÖ
- –ü–æ—Å–ª–µ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ AVF (–ø–∞—É–∑–∞ 0.2 —Å–µ–∫)
- –°–æ–∑–¥–∞—ë—Ç—Å—è `sr.Recognizer()` –∏ `sr.Microphone()`
- –ó–∞–ø–∏—Å—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ —á–µ—Ä–µ–∑ `recognizer.listen()`
- `phrase_time_limit=5.0` —Å–µ–∫—É–Ω–¥ (–±—ã—Å—Ç—Ä–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)

**–ö–æ–¥:** `_on_recording_start()` (—Å—Ç—Ä–æ–∫–∏ 724-808)

#### 3. **Google –∑–∞–ø–∏—Å—å —Ä–µ—á–∏** ‚úÖ
- Google –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ PyAudio (–≤–Ω—É—Ç—Ä–∏ `speech_recognition`)
- –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–∑ –∫–æ—Ä–æ–±–∫–∏ (16kHz, int16, –º–æ–Ω–æ)
- –ó–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø—Ä–∏ —Ç–∏—à–∏–Ω–µ –∏–ª–∏ –ø–æ `phrase_time_limit`

**–ö–æ–¥:** `start_listening()` –≤–Ω—É—Ç—Ä–∏ `_on_recording_start()` (—Å—Ç—Ä–æ–∫–∏ 765-785)

#### 4. **Google —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** ‚úÖ
- –ü–æ–ª—É—á–∞–µ–º `sr.AudioData` –æ—Ç Google (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
- –í—ã–∑—ã–≤–∞–µ–º `recognizer.recognize_google(audio_data, language)`
- –ü—É–±–ª–∏–∫—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –æ—Ç AVF

**–ö–æ–¥:** `_recognize_google_audio()` (—Å—Ç—Ä–æ–∫–∏ 1342-1400+)

#### 5. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏** ‚úÖ
- –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ Google (–¥–æ 2 —Å–µ–∫—É–Ω–¥)
- –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç Google
- –†–∞—Å–ø–æ–∑–Ω–∞—ë–º –∏ –ø—É–±–ª–∏–∫—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω

**–ö–æ–¥:** `_on_recording_stop()` (—Å—Ç—Ä–æ–∫–∏ 943-1003)

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:**
- –¢–µ–∫—Å—Ç: **"hey what's up"**
- –ò—Å—Ç–æ—á–Ω–∏–∫: `google_recognition`
- –†–∞–∑–º–µ—Ä –∞—É–¥–∏–æ: 196608 bytes
- –°—Ç–∞—Ç—É—Å: ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã:**
1. ‚úÖ AVF –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –Ω–∞ ~1 —Å–µ–∫—É–Ω–¥—É ‚Üí –ø–æ–ª—É—á–∏–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
2. ‚úÖ AVF –¥–µ–∑–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª
3. ‚úÖ Google –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –º–∏–∫—Ä–æ—Ñ–æ–Ω
4. ‚úÖ Google –∑–∞–ø–∏—Å–∞–ª —Ä–µ—á—å (196608 bytes)
5. ‚úÖ Google —Ä–∞—Å–ø–æ–∑–Ω–∞–ª —Ç–µ–∫—Å—Ç ("hey what's up")
6. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

---

## üìä –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –ü–û–õ–ù–ê–Ø –õ–û–ì–ò–ö–ê –†–ê–°–ü–û–ó–ù–ê–í–ê–ù–ò–Ø –†–ï–ß–ò                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. voice.recording_start
   ‚îÇ
   ‚îú‚îÄ‚ñ∫ _on_recording_start()
   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îú‚îÄ‚ñ∫ –®–ê–ì 1: AVF –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (~1 —Å–µ–∫—É–Ω–¥–∞)
   ‚îÇ   ‚îÇ   ‚îú‚îÄ AVF –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω
   ‚îÇ   ‚îÇ   ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç: device_info, format, diagnostics
   ‚îÇ   ‚îÇ   ‚îî‚îÄ AVF –¥–µ–∑–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç ‚úÖ
   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îú‚îÄ‚ñ∫ –®–ê–ì 2: –ü–∞—É–∑–∞ 0.2 —Å–µ–∫
   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îî‚îÄ‚ñ∫ –®–ê–ì 3: Google –∞–∫—Ç–∏–≤–∞—Ü–∏—è
   ‚îÇ       ‚îú‚îÄ –°–æ–∑–¥–∞—ë–º sr.Recognizer() –∏ sr.Microphone()
   ‚îÇ       ‚îú‚îÄ –ó–∞–ø—É—Å–∫–∞–µ–º recognizer.listen() –≤ –ø–æ—Ç–æ–∫–µ
   ‚îÇ       ‚îî‚îÄ –ü—É–±–ª–∏–∫—É–µ–º microphone.opened
   ‚îÇ
   ‚îî‚îÄ‚ñ∫ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç
       ‚îÇ
       ‚îî‚îÄ‚ñ∫ Google –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ recognizer.listen()

2. voice.recording_stop
   ‚îÇ
   ‚îî‚îÄ‚ñ∫ _on_recording_stop()
       ‚îÇ
       ‚îú‚îÄ‚ñ∫ –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ Google (–¥–æ 2 —Å–µ–∫)
       ‚îÇ
       ‚îú‚îÄ‚ñ∫ –ü–æ–ª—É—á–∞–µ–º AudioData –æ—Ç Google
       ‚îÇ
       ‚îú‚îÄ‚ñ∫ _recognize_google_audio()
       ‚îÇ   ‚îú‚îÄ recognizer.recognize_google(audio_data)
       ‚îÇ   ‚îî‚îÄ –ü—É–±–ª–∏–∫—É–µ–º voice.recognition_completed
       ‚îÇ       ‚îî‚îÄ –° –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –æ—Ç AVF
       ‚îÇ
       ‚îî‚îÄ‚ñ∫ –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω
```

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚úÖ
   - AVF –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω –ø–æ–¥–∫–ª—é—á—ë–Ω
   - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ñ–æ—Ä–º–∞—Ç, –∏–º—è, UID)

2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É** ‚úÖ
   - AVF –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
   - Google –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ä–µ—á–∏
   - –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É AVF –∏ Google

3. **–ó–∞–ø–∏—Å—å —Ä–µ—á–∏** ‚úÖ
   - Google –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   - –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ (16kHz, int16, –º–æ–Ω–æ)

4. **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** ‚úÖ
   - Google —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä–µ—á—å
   - –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

---

## üìù –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ (legacy)
- `_on_mic_data_ready()` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Å—Ç—Ä–æ–∫–∏ 1222-1280)
- `_processed_mic_data_sessions` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ AVF –≤ `_on_recording_stop()` (—Å—Ç—Ä–æ–∫–∏ 1005+)

### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É
- –¢–µ–∫—É—â–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: ~1.2 —Å–µ–∫—É–Ω–¥—ã (1 —Å–µ–∫ AVF + 0.2 —Å–µ–∫ –ø–∞—É–∑–∞)
- –ú–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ ~0.5 —Å–µ–∫—É–Ω–¥—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### 3. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —É–∂–µ –µ—Å—Ç—å, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

---

## üéØ –ò—Ç–æ–≥

**–õ–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!** ‚úÖ

1. ‚úÖ AVF –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
2. ‚úÖ Google –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ—á—å
3. ‚úÖ Google —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä–µ—á—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ:**
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ("hey what's up" —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ)
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É AVF –∏ Google

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!** üöÄ
