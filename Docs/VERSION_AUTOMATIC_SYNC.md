# ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–µ—Ä—Å–∏–π

**–î–∞—Ç–∞:** 11 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéØ –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–ë—É–¥–µ—Ç –ª–∏ –≤–µ—Ä—Å–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ?"

**–î–ê! ‚úÖ** –í–µ—Ä—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏–∑ –µ–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã.

---

## üìç –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

**–§–∞–π–ª:** `VERSION` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–∏ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ, –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `get_version_from_file()`.

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### **1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞:**

–í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–∏—Ç–∞—é—Ç –≤–µ—Ä—Å–∏—é –∏–∑ `VERSION` —Ñ–∞–π–ª–∞ **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

```python
# server/config/unified_config.py
def get_version_from_file() -> str:
    version_file = Path(__file__).parent.parent.parent / "VERSION"
    if version_file.exists():
        return version_file.read_text().strip()
    return os.getenv('SERVER_VERSION', '1.6.0.35')
```

### **2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è:**

‚úÖ **ServerMetadataConfig**
```python
version: str = get_version_from_file()
build: str = get_version_from_file()
```

‚úÖ **UpdateServiceConfig** (–≤ unified_config)
```python
default_version: str = get_version_from_file()
default_build: str = get_version_from_file()
```

‚úÖ **UpdateConfig** (–≤ modules/update/config.py)
```python
default_version: str = get_version_from_file()
default_build: str = get_version_from_file()
```

‚úÖ **main.py**
```python
SERVER_VERSION = server_metadata.version  # –ò–∑ unified_config
SERVER_BUILD = server_metadata.build     # –ò–∑ unified_config
```

---

## ‚ö†Ô∏è –ò—Å–∫–ª—é—á–µ–Ω–∏—è (—Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

### **1. –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã (`server/updates/manifests/manifest.json`)**

–ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã **–ù–ï –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ VERSION —Ñ–∞–π–ª–∞. –û–Ω–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:

- –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç: `server/scripts/sync_version_to_server.sh`
- –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç: `server/scripts/update_version.py` (–æ–±–Ω–æ–≤–ª—è–µ—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- –í—Ä—É—á–Ω—É—é –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ü–æ—á–µ–º—É:** –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏—é, –Ω–æ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö (URL, —Ä–∞–∑–º–µ—Ä, SHA256), –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ.

### **2. YAML –∏ example —Ñ–∞–π–ª—ã**

–§–∞–π–ª—ã `unified_config.yaml` –∏ `config.env.example` –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `update_version.py, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ - –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—Ä–∏–º–µ—Ä—ã.

---

## üîß –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏

### **–í —Ñ—É–Ω–∫—Ü–∏–∏ `get_version_from_file()`:**

1. **VERSION —Ñ–∞–π–ª** (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) ‚úÖ **–ü–†–ò–û–†–ò–¢–ï–¢ 1**
2. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `SERVER_VERSION` (fallback)
3. –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `'1.6.0.35'` (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)

### **–í `ServerMetadataConfig.from_env()`:**

1. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `SERVER_VERSION` ‚úÖ **–ü–†–ò–û–†–ò–¢–ï–¢ 1** (–¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
2. `get_version_from_file()` (fallback)

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –≤ `config.env` —É–∫–∞–∑–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `SERVER_VERSION`, –æ–Ω–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ VERSION —Ñ–∞–π–ª–∞ –≤ `ServerMetadataConfig`, –Ω–æ `UpdateConfig` –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_version_from_file()`, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç VERSION —Ñ–∞–π–ª.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**

```python
from config.unified_config import get_config

config = get_config()
# –í—Å–µ –≤–µ—Ä—Å–∏–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å
assert config.server.version == config.update.default_version
assert config.server.build == config.update.default_build
```

### **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ VERSION —Ñ–∞–π–ª–µ
cat VERSION

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö
python3 -c "from server.config.unified_config import get_config; c = get_config(); print(f'Server: {c.server.version}, Update: {c.update.default_version}')"
```

---

## üöÄ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑–º–µ–Ω–∏—Ç—å VERSION —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é**

```bash
echo "1.6.0.36" > VERSION
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ
- ‚ö†Ô∏è –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é
- ‚ö†Ô∏è YAML –∏ example —Ñ–∞–π–ª—ã –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
python3 server/scripts/update_version.py 1.6.0.36
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ VERSION —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ unified_config.yaml –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ unified_config.py (fallback –∑–Ω–∞—á–µ–Ω–∏—è) –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ config.env.example –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚ö†Ô∏è –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–í–µ—Ä—Å–∏—è –≤ VERSION —Ñ–∞–π–ª–µ:** `1.6.0.35`

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:**
- ‚úÖ ServerMetadataConfig
- ‚úÖ UpdateServiceConfig  
- ‚úÖ UpdateConfig
- ‚úÖ main.py (SERVER_VERSION, SERVER_BUILD)

**–¢—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- ‚ö†Ô∏è –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã (—á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ)
- ‚ö†Ô∏è YAML/example —Ñ–∞–π–ª—ã (—á–µ—Ä–µ–∑ update_version.py)

---

## üéØ –ò—Ç–æ–≥

**–û—Ç–≤–µ—Ç:** ‚úÖ **–î–ê, –≤–µ—Ä—Å–∏—è –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ VERSION —Ñ–∞–π–ª–∞:
- ‚úÖ –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é **–ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞**
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ö†Ô∏è –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (–Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `update_version.py` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ - –æ–Ω –æ–±–Ω–æ–≤–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
