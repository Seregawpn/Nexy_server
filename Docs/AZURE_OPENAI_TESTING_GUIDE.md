# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Azure OpenAI

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-20  
**–¶–µ–ª—å:** –ü–æ–º–æ—á—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Azure OpenAI –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–ø–æ—Å–æ–± 1: Python —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Python —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç **3 —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞** –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export AZURE_OPENAI_API_KEY="–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å"
export AZURE_OPENAI_BASE_URL="https://nexy-ai-core.openai.azure.com"
export AZURE_OPENAI_DEPLOYMENT_NAME="OpenAICreate-2026011"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
python3 scripts/test_azure_openai_config.py
```

**–ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:**

```bash
python3 scripts/test_azure_openai_config.py \
    "https://nexy-ai-core.openai.azure.com" \
    "OpenAICreate-2026011" \
    "–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å"
```

### –°–ø–æ—Å–æ–± 2: Bash —Å–∫—Ä–∏–ø—Ç

```bash
export AZURE_OPENAI_API_KEY="–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å"
./scripts/test_azure_openai_key.sh
```

---

## üìã –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### –§–æ—Ä–º–∞—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Azure OpenAI (URL-only)
- Deployment name —Ç–æ–ª—å–∫–æ –≤ URL
- –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `model` –≤ body
- –§–æ—Ä–º–∞—Ç: `/openai/deployments/{deployment}/chat/completions`

### –§–æ—Ä–º–∞—Ç 2: –° model –≤ body
- Deployment name –≤ URL + `model` –≤ body
- –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö `model` –≤ JSON
- –§–æ—Ä–º–∞—Ç: `/openai/deployments/{deployment}/chat/completions` + `{"model": "..."}`

### –§–æ—Ä–º–∞—Ç 3: OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
- Model —Ç–æ–ª—å–∫–æ –≤ body, –±–µ–∑ deployment –≤ URL
- –§–æ—Ä–º–∞—Ç: `/openai/chat/completions` + `{"model": "..."}`

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞: "model is required"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª–∏–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `model` –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–§–æ—Ä–º–∞—Ç 2** (—Å `model` –≤ body)
2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Cursor —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `model` –≤ –∑–∞–ø—Ä–æ—Å–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Deployment Name –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "model": "OpenAICreate-2026011",
    "messages": [
        {"role": "user", "content": "Hello"}
    ]
}
```

### –û—à–∏–±–∫–∞: "invalid_input"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä (`model`, `messages`)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–≤–µ—Ä–Ω—ã–π API version

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–ø—Ä–æ—Å–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API version (`2024-02-15-preview`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON

### –û—à–∏–±–∫–∞: 401 Unauthorized

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- –ö–ª—é—á –∏—Å—Ç–µ–∫ –∏–ª–∏ —É–¥–∞–ª–µ–Ω
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OpenAI API key –≤–º–µ—Å—Ç–æ Azure OpenAI key

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –≤ Azure Portal ‚Üí Keys and Endpoint
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Azure OpenAI –∫–ª—é—á (–Ω–µ OpenAI API key)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)

### –û—à–∏–±–∫–∞: 404 Not Found

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π Deployment Name
- Deployment –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Base URL

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Deployment Name –≤ Azure Portal ‚Üí Model deployments
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Ä–µ–≥–∏—Å—Ç—Ä –≤–∞–∂–µ–Ω!)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Base URL

---

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### ‚úÖ –£—Å–ø–µ—Ö (HTTP 200)

```
‚úÖ –£–°–ü–ï–•! HTTP 200
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- API –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç
- Deployment —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –≤ Cursor

### ‚ùå –û—à–∏–±–∫–∞ (HTTP 400, 401, 404)

```
‚ùå –û–®–ò–ë–ö–ê! HTTP 400
–¢–∏–ø –æ—à–∏–±–∫–∏: client
–ü—Ä–∏—á–∏–Ω–∞: invalid_input
–°–æ–æ–±—â–µ–Ω–∏–µ: model is required
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ç–∏–ø –æ—à–∏–±–∫–∏ –∏ –ø—Ä–∏—á–∏–Ω—É
2. –°–ª–µ–¥—É–π—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –≤—ã—à–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—à–∏–±–∫–∏
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Cursor

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ —Ä–∞–±–æ—á–∏–π —Ñ–æ—Ä–º–∞—Ç:

### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –§–æ—Ä–º–∞—Ç 1 (URL-only):
```
Base URL: https://nexy-ai-core.openai.azure.com/
Deployment Name: OpenAICreate-2026011
```

### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –§–æ—Ä–º–∞—Ç 2 (—Å model –≤ body):
```
Base URL: https://nexy-ai-core.openai.azure.com/
Deployment Name: OpenAICreate-2026011
Model: OpenAICreate-2026011  (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª–µ Model)
```

### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –§–æ—Ä–º–∞—Ç 3 (OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π):
```
Base URL: https://nexy-ai-core.openai.azure.com/
Deployment Name: OpenAICreate-2026011
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
export AZURE_OPENAI_BASE_URL="https://–≤–∞—à-—Ä–µ—Å—É—Ä—Å.openai.azure.com"
export AZURE_OPENAI_DEPLOYMENT_NAME="–≤–∞—à–µ-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ"
export AZURE_OPENAI_API_KEY="–≤–∞—à-–Ω–æ–≤—ã–π-–∫–ª—é—á"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
python3 scripts/test_azure_openai_config.py
```

### –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (Python)

```python
from scripts.test_azure_openai_config import AzureOpenAITester

tester = AzureOpenAITester(
    base_url="https://nexy-ai-core.openai.azure.com",
    deployment_name="OpenAICreate-2026011",
    api_key="–≤–∞—à_–∫–ª—é—á"
)

# –¢–µ—Å—Ç —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Å model –≤ body
success, result = tester.test_format_2_with_model_in_body()
print(f"–£—Å–ø–µ—Ö: {success}")
print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `Docs/AZURE_OPENAI_CURSOR_SETUP.md` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Cursor
- `Docs/AZURE_OPENAI_FIX_BAD_API_KEY.md` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–ª—é—á–∞
- `Docs/AZURE_OPENAI_CHECKLIST.md` ‚Äî –ø–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- `scripts/test_azure_openai_key.sh` ‚Äî bash —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- `scripts/test_azure_openai_config.py` ‚Äî Python —Å–∫—Ä–∏–ø—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ó–∞–ø—É—â–µ–Ω —Ç–µ—Å—Ç –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω —Ä–∞–±–æ—á–∏–π —Ñ–æ—Ä–º–∞—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Cursor –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞–±–æ—á–µ–º—É —Ñ–æ—Ä–º–∞—Ç—É
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤ Cursor
- [ ] –û—à–∏–±–∫–∞ "model is required" –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (–µ—Å–ª–∏ –±—ã–ª–∞)

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-01-20  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-20
