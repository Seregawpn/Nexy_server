# =====================================================
# КОНФИГУРАЦИЯ ГОЛОСОВОГО АССИСТАНТА
# =====================================================
# ВНИМАНИЕ: Этот файл содержит реальные секреты!
# НЕ КОММИТЬТЕ этот файл в git!

# =====================================================
# ОКРУЖЕНИЕ
# =====================================================
NEXY_ENV=dev
# Варианты: dev, prod, test

# =====================================================
# GEMINI API (Text Processing & Memory)
# =====================================================
GEMINI_API_KEY=AIzaSyAOVxBszxAvBSyM5tx5Dmjl8Etom7uo9c8

# Провайдер обработки текста: 'gemini_live' или 'langchain'
# gemini_live - использует Gemini Live API (лучше качество, медленнее)
# langchain - использует LangChain (быстрее, хорошее качество)
TEXT_PROCESSING_PROVIDER=langchain

# Live API настройки
GEMINI_LIVE_MODEL=gemini-2.5-flash
GEMINI_LIVE_TEMPERATURE=0.4
GEMINI_LIVE_MAX_TOKENS=2048
GEMINI_LIVE_TOOLS=google_search

# LangChain настройки
LANGCHAIN_MODEL=gemini-3-flash-preview
TEXT_PROCESSING_TEMPERATURE=0.4
# Опционально: переопределить system prompt
# GEMINI_SYSTEM_PROMPT=
# MCP Action forwarding feature flag
FORWARD_ASSISTANT_ACTIONS=true
WEB_SEARCH_ENABLED=true

# =====================================================
# AZURE SPEECH TTS (Audio Generation)
# =====================================================
AZURE_SPEECH_KEY=1e6dfbb0170446c3b7eff7d0507f39c8
AZURE_SPEECH_REGION=canadacentral
AZURE_VOICE_NAME=en-US-AriaNeural
AZURE_VOICE_STYLE=friendly
AZURE_SPEECH_RATE=1.0
AZURE_SPEECH_PITCH=1.0
AZURE_SPEECH_VOLUME=1.0
AZURE_AUDIO_FORMAT=riff-48khz-16bit-mono-pcm

# =====================================================
# gRPC SERVER
# =====================================================
# For prod/stage укажите AUTO (или оставьте значение) чтобы использовать 127.0.0.1, для dev можно задать 0.0.0.0
GRPC_HOST=auto
GRPC_PORT=50051
MAX_WORKERS=100
USE_TLS=false

# =====================================================
# HTTP HEALTH/STATUS SERVER
# =====================================================
HTTP_HOST=auto
HTTP_PORT=8080

# =====================================================
# SERVER VERSION (Единый источник истины для всех версий)
# =====================================================
# ВНИМАНИЕ: Версия теперь берется из VERSION файла (корень проекта)
# Не указывайте SERVER_VERSION и SERVER_BUILD здесь, если хотите использовать VERSION файл
# Если нужно переопределить - раскомментируйте и укажите значения:
# SERVER_VERSION=1.6.0.35
# SERVER_BUILD=1.6.0.35
SERVER_CHANNEL=fix

# =====================================================
# UPDATE SERVER
# =====================================================
UPDATE_PORT=8081
UPDATE_HOST=auto
UPDATE_ENABLED=true
UPDATE_CORS=true
UPDATE_REQUIRE_HTTPS=false
UPDATE_VERIFY_SIGNATURES=true
UPDATE_LOG_REQUESTS=true
UPDATE_LOG_DOWNLOADS=true

# =====================================================
# POSTGRESQL DATABASE
# =====================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=voice_assistant_db
DB_USER=nexy_user
DB_PASSWORD=1111

# =====================================================
# AUDIO SETTINGS
# =====================================================
SAMPLE_RATE=48000
CHUNK_SIZE=1024
AUDIO_FORMAT=int16
AUDIO_CODEC=pcm
AUDIO_CHANNELS=1
AUDIO_BITS_PER_SAMPLE=16
STREAMING_CHUNK_SIZE=4096
STREAMING_ENABLED=true

# =====================================================
# IMAGE SETTINGS (Text Processing)
# =====================================================
IMAGE_FORMAT=webp
IMAGE_MIME_TYPE=image/webp
IMAGE_MAX_SIZE=10485760

# =====================================================
# SESSION MANAGEMENT
# =====================================================
MAX_SESSIONS=200
SESSION_TIMEOUT=3600
HARDWARE_ID_LENGTH=32

# =====================================================
# INTERRUPT HANDLING
# =====================================================
GLOBAL_INTERRUPT_ENABLED=true
INTERRUPT_CHECK_INTERVAL=0.1
INTERRUPT_TIMEOUT=5.0
GLOBAL_INTERRUPT_TIMEOUT=300
SESSION_INTERRUPT_TIMEOUT=60
MAX_ACTIVE_SESSIONS=100
SESSION_CLEANUP_DELAY=2.0

# =====================================================
# MEMORY MANAGEMENT
# =====================================================
MAX_SHORT_TERM_MEMORY_SIZE=51200
MAX_LONG_TERM_MEMORY_SIZE=102400
MEMORY_TIMEOUT=2.0
ANALYSIS_TIMEOUT=5.0
MEMORY_ANALYSIS_MODEL=gemini-2.5-flash-lite
MEMORY_ANALYSIS_TEMPERATURE=0.3

# =====================================================
# TEXT PROCESSING
# =====================================================
FALLBACK_TIMEOUT=30
CIRCUIT_BREAKER_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=300
MAX_CONCURRENT_REQUESTS=50
REQUEST_TIMEOUT=60

# =====================================================
# TEXT FILTERING
# =====================================================
TEXT_CLEANING_ENABLED=true
CONTENT_FILTERING_ENABLED=true
MAX_TEXT_LENGTH=10000
MIN_TEXT_LENGTH=1

# =====================================================
# LOGGING
# =====================================================
LOG_LEVEL=INFO
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_FILE=server.log
LOG_MAX_FILE_SIZE=10485760
LOG_BACKUP_COUNT=5

# =====================================================
# PERFORMANCE - Масштабирование для 100 пользователей
# =====================================================
MAX_SENTENCE_LENGTH=200
MAX_REQUESTS_PER_MINUTE=1000
MAX_REQUESTS_PER_USER=10
MAX_MEMORY_USAGE=80

# =====================================================
# BROWSER USE (Web Agents)
# =====================================================
BROWSER_USE_ENABLED=true
BROWSER_USE_PRESET=ultra_fast
BROWSER_USE_KEEP_OPEN=true
BROWSER_USE_TIMEOUT=120
BROWSER_USE_MAX_STEPS=50
BROWSER_USE_MODEL=gemini-2.5-flash

# =====================================================
# MESSAGES / iMESSAGE INTEGRATION
# =====================================================
MESSAGES_ENABLED=true

# =====================================================
# GITHUB (для системы обновлений)
# =====================================================
# GITHUB_TOKEN=YOUR_GITHUB_TOKEN_HERE
# GITHUB_REPO=Seregawpn/Nexy_production
# GITHUB_RELEASE_TAG=Update

# =====================================================
# SUBSCRIPTION / STRIPE CONFIGURATION
# =====================================================
SUBSCRIPTION_ENABLED=true
SUBSCRIPTION_KILL_SWITCH=false
WHATSAPP_ENABLED=true
PAYMENT_USE_ENABLED=false
SUBSCRIPTION_TRIAL_DAYS=0
SUBSCRIPTION_PENDING_TTL=30
SUBSCRIPTION_GRANDFATHERED_ENABLED=true
SUBSCRIPTION_QUOTA_DAILY=25
SUBSCRIPTION_QUOTA_WEEKLY=125
SUBSCRIPTION_QUOTA_MONTHLY=500
STRIPE_SECRET_KEY=sk_test_51SfCTCGo52EfFi5Vz4gnYlHWLnkJfqj2uAfXookkeRM08o3H3BvijyQHg9yPlLKIHugjOMeXVFrdG2r36n0wHNjw00e9sZwIDi
STRIPE_PUBLISHABLE_KEY=pk_test_51SfCTCGo52EfFi5VSjVq5BOH0Ey0OBZBUMnWhmD9NDIsrh9N5Nmd0eU8nHEoeMjlRqt2AF3JyCCZMswbr3sioknh005pksqyM6
STRIPE_WEBHOOK_SECRET=whsec_hTTXARzepf6XsWUJin2m7H3Iwb8Xtn97
STRIPE_TEST_WEBHOOK_SECRET=whsec_hTTXARzepf6XsWUJin2m7H3Iwb8Xtn97
