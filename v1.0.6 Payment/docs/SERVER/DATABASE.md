# üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**‚Üí –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç:** `../DATABASE_MIGRATIONS.md`

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–π –ë–î –≤–∫–ª—é—á–∞–µ—Ç:
- –¢–∞–±–ª–∏—Ü—ã: `subscriptions`, `subscription_events`, `quota_usage`, `payments`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Rollback –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ UNIQUE constraints

---

## üîó –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–º. `../DATABASE_MIGRATIONS.md`** –¥–ª—è:
- –ü–æ–ª–Ω—ã—Ö SQL –º–∏–≥—Ä–∞—Ü–∏–π
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é
- Rollback –ø—Ä–æ—Ü–µ–¥—É—Ä

---

## üìù –ë—ã—Å—Ç—Ä–∞—è —Å—Å—ã–ª–∫–∞

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- `001_create_subscriptions_tables.sql` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- `002_add_subscription_indexes.sql` ‚Äî –∏–Ω–¥–µ–∫—Å—ã
- `ROLLBACK_001.sql` ‚Äî –æ—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π

**–ö–ª—é—á–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `subscriptions` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (PRIMARY KEY: `hardware_id`)
- `subscription_events` ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (PRIMARY KEY: `stripe_event_id`)
- `quota_usage` ‚Äî —Å—á–µ—Ç—á–∏–∫–∏ –∫–≤–æ—Ç (PRIMARY KEY: `hardware_id, period_type, period_start`)
- `payments` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û—Ç–∫—Ä–æ–π—Ç–µ `../DATABASE_MIGRATIONS.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞

