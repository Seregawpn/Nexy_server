# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∞—É–¥–∏–æ –ø—Ä–æ–±–ª–µ–º—ã

## üéØ –¶–µ–ª—å
–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º —Ä–µ—á–∏: –º–∏–∫—Ä–æ—Ñ–æ–Ω –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –∞—É–¥–∏–æ —Å–∏–≥–Ω–∞–ª –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å –Ω—É–ª–µ–≤—ã–º —É—Ä–æ–≤–Ω–µ–º (peak=0, rms=0.0).

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### ‚úÖ –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **config/unified_config.yaml** - –≤–∫–ª—é—á–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∞—É–¥–∏–æ-–ª–æ–≥–∏:
   - `enable_debug_logging: true`
   - `log_health_checks: true` 
   - `log_device_changes: true`

2. **modules/voice_recognition/core/speech_recognizer.py** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
   - –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ –ø–µ—Ä–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—ã—Ä–æ–≥–æ WAV —Ñ–∞–π–ª–∞ –Ω–∞ Desktop

3. **collect_audio_diagnostics.sh** - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ü–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—Å–ª–∏ –æ–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python client/main.py
```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
1. –ù–∞–∂–º–∏—Ç–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ **–ø—Ä–æ–±–µ–ª**
2. –ì–æ–≤–æ—Ä–∏—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: "Hello, this is a test")
3. –û—Ç–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–±–µ–ª
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –®–∞–≥ 3: –°–±–æ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
./collect_audio_diagnostics.sh
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç SwitchAudioSource –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º.

## üìÅ –û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤ `~/Desktop/nexy_diagnostics/` –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:

- **nexy_input_devices.txt** - —Å–ø–∏—Å–æ–∫ –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **nexy_capture.wav** - —Å—ã—Ä–∞—è –∑–∞–ø–∏—Å—å —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- **audio_debug.log** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∞—É–¥–∏–æ –ª–æ–≥–∏
- **app.log** - –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **nexy_tcc_microphone.txt** - —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- **nexy_tcc_input_monitoring.txt** - —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è Input Monitoring
- **nexy_tcc.log** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ TCC
- **nexy_coreaudio.log** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ CoreAudio
- **nexy_codesign.txt** - –ø–æ–¥–ø–∏—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **nexy_diag.txt** - Python –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **nexy_system_audio.txt** - —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∞—É–¥–∏–æ
- **nexy_system_info.txt** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

## üîç –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. WAV —Ñ–∞–π–ª
- **–û—Ç–∫—Ä–æ–π—Ç–µ** `nexy_capture.wav` –≤ –ª—é–±–æ–º –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä–µ
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**: –µ—Å—Ç—å –ª–∏ –∑–≤—É–∫ –≤ —Ñ–∞–π–ª–µ?
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 0 –±–∞–π—Ç

### 2. –õ–æ–≥–∏ –∞—É–¥–∏–æ
- **–ò—â–∏—Ç–µ** –≤ `audio_debug.log`:
  - `Chunk sample: [–∑–Ω–∞—á–µ–Ω–∏—è]` - –ø–µ—Ä–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
  - `üîä –ü–µ—Ä–≤—ã–π —á–∞–Ω–∫ –ø–æ–ª—É—á–µ–Ω` - —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - –û—à–∏–±–∫–∏ –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 3. TCC —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** `nexy_tcc_microphone.txt`:
  - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å `allowed` –∏–ª–∏ `granted`
  - –ï—Å–ª–∏ `denied` - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏

### 4. –ê—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** `nexy_input_devices.txt`:
  - –ö–∞–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã–±—Ä–∞–Ω–æ –∫–∞–∫ input?
  - –ï—Å—Ç—å –ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤ —Å–ø–∏—Å–∫–µ?

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ï—Å–ª–∏ WAV —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π –∏–ª–∏ –±–µ–∑ –∑–≤—É–∫–∞:
1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ TCC –ª–æ–≥–∏
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ CoreAudio –ª–æ–≥–∏

### –ï—Å–ª–∏ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏:
1. **CoreAudio –æ—à–∏–±–∫–∏** - —Å–∏—Å—Ç–µ–º–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
2. **TCC –æ—à–∏–±–∫–∏** - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
3. **Device –æ—à–∏–±–∫–∏** - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º

## üì§ –ü–µ—Ä–µ–¥–∞—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥–∞–π—Ç–µ:

1. **–í—Å–µ —Ñ–∞–π–ª—ã** –∏–∑ `~/Desktop/nexy_diagnostics/`
2. **–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ**:
   - –°–ª—ã—à–µ–Ω –ª–∏ –∑–≤—É–∫ –≤ WAV —Ñ–∞–π–ª–µ?
   - –ö–∞–∫–æ–µ input —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã–±—Ä–∞–ª–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?
   - –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö?

## üßπ –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç–µ** –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **config/unified_config.yaml** - –≤–µ—Ä–Ω–∏—Ç–µ `enable_debug_logging: false`
2. **modules/voice_recognition/core/speech_recognizer.py** - —É–¥–∞–ª–∏—Ç–µ:
   - –°—Ç—Ä–æ–∫—É —Å `logger.debug("Chunk sample: %s", indata[:5].flatten())`
   - –ë–ª–æ–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º WAV —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–æ–∫–∏ 374-383)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è **–≤—Ä–µ–º–µ–Ω–Ω–æ** —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
- WAV —Ñ–∞–π–ª –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å **–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - —É–¥–∞–ª–∏—Ç–µ –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
