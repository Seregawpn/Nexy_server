# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ production —Å–µ—Ä–≤–µ—Ä—É

**–î–∞—Ç–∞:** 2026-01-10  
**–°–µ—Ä–≤–µ—Ä:** 20.151.51.172:443  
**–í–µ—Ä—Å–∏—è –∫–ª–∏–µ–Ω—Ç–∞:** v1.6.0.34

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –¢–∞–π–º–∞—É—Ç gRPC –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–∞–Ω–∞–ª gRPC –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `ready` –≤ —Ç–µ—á–µ–Ω–∏–µ timeout (300 —Å–µ–∫—É–Ω–¥)
- –û—à–∏–±–∫–∞: `connect_failed` –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ ~5 –º–∏–Ω—É—Ç

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **Nginx reverse proxy –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è gRPC —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 443**
   - gRPC —Ç—Ä–µ–±—É–µ—Ç HTTP/2 (ALPN h2)
   - Nginx –¥–æ–ª–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å gRPC —Ç—Ä–∞—Ñ–∏–∫
   - –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/grpc`)

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å SSL/TLS handshake**
   - Self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
   - –ù–æ handshake –º–æ–∂–µ—Ç –Ω–µ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
   - –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `grpc_pass` –≤ Nginx

3. **–¢–∞–π–º–∞—É—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (300 —Å–µ–∫—É–Ω–¥)**
   - –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞ 5-10 —Å–µ–∫—É–Ω–¥, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - 300 —Å–µ–∫—É–Ω–¥ - —ç—Ç–æ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 2. **HTTP endpoints –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç**

**–°–∏–º–ø—Ç–æ–º—ã:**
- `/health` –∏ `/status` —Ç–∞–π–º–∞—É—Ç—è—Ç (5 —Å–µ–∫—É–Ω–¥)
- –ü–æ—Ä—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã, –Ω–æ HTTP –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ endpoints**
   - –í–æ–∑–º–æ–∂–Ω–æ, endpoints –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/health`)
   - –ò–ª–∏ —Ç—Ä–µ–±—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

2. **Nginx –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è HTTP endpoints**
   - –í–æ–∑–º–æ–∂–Ω–æ, —Ç–æ–ª—å–∫–æ gRPC –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∞ HTTP endpoints –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è

### 3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞**

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (timeout: 300s, SSL: True, use_http2: True)
- ‚úÖ –ü–æ—Ä—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ TCP

**–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå gRPC –∫–∞–Ω–∞–ª –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ready
- ‚ùå HTTP endpoints –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (Nginx):

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –¥–ª—è gRPC:**
```nginx
server {
    listen 443 ssl http2;
    
    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    # gRPC –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
    location / {
        grpc_pass grpc://backend:50051;
        grpc_set_header Host $host;
        grpc_set_header X-Real-IP $remote_addr;
    }
}
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ HTTP/2 –≤–∫–ª—é—á–µ–Ω:**
   - `listen 443 ssl http2;` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `http2`

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx:**
   - `/var/log/nginx/error.log` - –¥–ª—è –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - `/var/log/nginx/access.log` - –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

### –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞:

1. **–£–º–µ–Ω—å—à–∏—Ç—å timeout –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
   - –°–µ–π—á–∞—Å: 300 —Å–µ–∫—É–Ω–¥
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 30-60 —Å–µ–∫—É–Ω–¥ –¥–ª—è production

2. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ SSL handshake

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å:**
   - –ï—Å–ª–∏ Nginx —Ç—Ä–µ–±—É–µ—Ç –ø—É—Ç—å `/grpc`, –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```yaml
   production:
     grpc_path: "/grpc"  # –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
   ```

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|-----------|--------|--------|
| TCP –ø–æ—Ä—Ç 443 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |
| TCP –ø–æ—Ä—Ç 50051 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç –¥–æ—Å—Ç—É–ø–µ–Ω |
| SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç | ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è | Self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞–π–¥–µ–Ω |
| gRPC –∫–∞–Ω–∞–ª | ‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è | –¢–∞–π–º–∞—É—Ç `channel_ready()` |
| HTTP endpoints | ‚ùå –ù–µ –æ—Ç–≤–µ—á–∞—é—Ç | –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞ | –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ |

## üéØ –í—ã–≤–æ–¥

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** Nginx reverse proxy –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è gRPC —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 443, –∏–ª–∏ gRPC —Å–µ—Ä–≤–∏—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω/–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ gRPC —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 50051
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ HTTP/2 –≤–∫–ª—é—á–µ–Ω –≤ Nginx
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—É—Ç—å –¥–ª—è gRPC (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/grpc`)

**–ö–ª–∏–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
