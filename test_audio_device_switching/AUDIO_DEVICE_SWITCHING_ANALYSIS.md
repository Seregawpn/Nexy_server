# –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∞—É–¥–∏–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üìã –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **AudioDeviceMonitor** (`modules/voice_recognition/core/audio_device_monitor.py`)
   - Polling –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SwitchAudioSource –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ (–Ω–µ ID)
   - Callback –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

2. **SpeechRecognizer** (`modules/voice_recognition/core/speech_recognizer.py`)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `speech_recognition` –±–∏–±–ª–∏–æ—Ç–µ–∫—É (Google Speech API)
   - –°–æ–∑–¥–∞–µ—Ç `sr.Microphone()` –¥–ª—è –∑–∞–ø–∏—Å–∏
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback –æ—Ç AudioDeviceMonitor
   - –ü—Ä–∏ —Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å (graceful stop)

3. **SequentialSpeechPlayer** (`modules/speech_playback/core/player.py`)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–º–µ–Ω—É OUTPUT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ `_check_and_update_output_device()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SwitchAudioSource –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
   - –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –ø–æ—Ç–æ–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

4. **DeviceManager** (`modules/audio_system/core/device_manager.py`)
   - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - –ö—ç—à–∏—Ä—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ UID/–∏–º–µ–Ω–∏
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

#### INPUT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:
```
AudioDeviceMonitor (polling 0.5s)
  ‚Üì
SwitchAudioSource ‚Üí device_name
  ‚Üì
–ü–æ–∏—Å–∫ device_id –≤ PortAudio –ø–æ –∏–º–µ–Ω–∏
  ‚Üì
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ (–Ω–µ ID)
  ‚Üì
Callback ‚Üí SpeechRecognizer._on_device_changed()
  ‚Üì
–ï—Å–ª–∏ LISTENING ‚Üí graceful_stop_listening()
  ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞–∂–∞—Ç—å SPACE
```

#### OUTPUT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:
```
SequentialSpeechPlayer._check_and_update_output_device()
  ‚Üì
SwitchAudioSource ‚Üí device_name
  ‚Üì
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏
  ‚Üì
–ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å ‚Üí resync_output_device()
  ‚Üì
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –ø–æ—Ç–æ–∫–∞ ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ
```

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (INPUT)**
   - –ü—Ä–æ–±–ª–µ–º–∞: AirPods –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü—Ä–∏—á–∏–Ω–∞: PortAudio –º–æ–∂–µ—Ç –Ω–µ –≤–∏–¥–µ—Ç—å BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å

2. **–û—à–∏–±–∫–∏ PortAudio –Ω–∞ BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ -9986 (Hardware Not Running), -10851 (Invalid Device)
   - –ü—Ä–∏—á–∏–Ω–∞: BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –Ω—É–∂–Ω–æ 2-3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é CoreAudio pipeline
   - –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ: –ü–æ—Ç–æ–∫ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è, –∑–∞–ø–∏—Å—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **–†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É macOS API –∏ PortAudio**
   - –ü—Ä–æ–±–ª–µ–º–∞: SwitchAudioSource –≤–∏–¥–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –Ω–æ PortAudio –µ–≥–æ –Ω–µ –≤–∏–¥–∏—Ç
   - –ü—Ä–∏—á–∏–Ω–∞: PortAudio –∫—ç—à–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
   - –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ device_id

4. **Google Speech Recognizer –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
   - –ü—Ä–æ–±–ª–µ–º–∞: `sr.Microphone()` —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   - –ü—Ä–∏—á–∏–Ω–∞: speech_recognition –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
   - –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ: –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å recognizer –ø—Ä–∏ —Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

5. **Polling –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã**
   - –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
   - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
   - –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

- Device ID –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (–Ω–æ –∏–º—è –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–º –∂–µ) ‚úÖ –†–µ—à–µ–Ω–æ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏)
- BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –Ω—É–∂–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (2-3 —Å–µ–∫) ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ (bt_prestart_delay)
- PortAudio –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ (–Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é)

## üéØ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—à–µ–Ω–∏—é

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ INPUT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω ‚Üí AirPods ‚Üí USB –º–∏–∫—Ä–æ—Ñ–æ–Ω)
2. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ OUTPUT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–¥–∏–Ω–∞–º–∏–∫–∏ ‚Üí AirPods ‚Üí USB –Ω–∞—É—à–Ω–∏–∫–∏)
3. ‚úÖ –†–∞–±–æ—Ç–∞ —Å Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (AirPods, Beats, –¥—Ä—É–≥–∏–µ BT –Ω–∞—É—à–Ω–∏–∫–∏)
4. ‚úÖ –†–∞–±–æ—Ç–∞ —Å USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (USB –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã, USB –Ω–∞—É—à–Ω–∏–∫–∏)
5. ‚úÖ –†–∞–±–æ—Ç–∞ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω, –¥–∏–Ω–∞–º–∏–∫–∏)
6. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Google Speech Recognizer
7. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–µ–µ—Ä–∞

### –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (< 500ms –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, < 3 —Å–µ–∫ –¥–ª—è BT)
2. ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (–Ω–µ polling –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫)
3. ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (–Ω–µ—Ç –æ—à–∏–±–æ–∫ PortAudio –Ω–∞ BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
4. ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (EventBus, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
5. ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ production –∫–æ–¥

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Google Speech Recognizer

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

`speech_recognition` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–æ–∑–¥–∞–µ—Ç `sr.Microphone()` –æ–¥–∏–Ω —Ä–∞–∑ –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ü—Ä–∏ —Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω—É–∂–Ω–æ:

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –∑–∞–ø–∏—Å–∏
2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å `sr.Microphone()` —Å –Ω–æ–≤—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º
3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å `sr.Recognizer()` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –†–µ—à–µ–Ω–∏–µ:

```python
# –ü—Ä–∏ —Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
def _on_device_changed(self, device_name, device_id, device_info):
    # 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫
    if self.is_listening:
        self._graceful_stop_listening(reason="device_changed")
    
    # 2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å recognizer –∏ microphone
    self._init_recognizer()  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç recognizer –∏ microphone
    
    # 3. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å:
    # await self.start_listening()  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- `sr.Microphone()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π default —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å default –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- –î–ª—è BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `device_id=None` (—Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–µ—Ñ–æ–ª—Ç)
- –ù—É–∂–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ 2-3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Telegram/WhatsApp

### Telegram/WhatsApp –ø–æ–¥—Ö–æ–¥—ã:

1. **AVAudioSession Route Change Notifications** (iOS/macOS)
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
   - –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—á–∏–Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

2. **Core Audio Property Listeners** (macOS)
   - –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ PyObjC
   - –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π macOS

3. **Device State Machine**
   - FSM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è–º–∏
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫–∏
   - –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ù–∞—à –ø–æ–¥—Ö–æ–¥ (—Ç–µ–∫—É—â–∏–π):

- Polling –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã ‚ùå (–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- SwitchAudioSource –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- Graceful stop –ø—Ä–∏ —Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ ‚ùå (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é)

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Core Audio Notifications
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
- –ù–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ macOS
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞: 95%

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Hybrid Monitoring
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (–¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞)
- Fallback –Ω–∞ polling –µ—Å–ª–∏ Core Audio –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞: 90%

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ú–æ–∂–µ—Ç –Ω–µ —Ä–µ—à–∏—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞: 70%
