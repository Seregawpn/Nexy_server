{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Unified Config Schema",
  "description": "JSON Schema for unified_config.yaml - single source of truth for Nexy configuration",
  "type": "object",
  "required": ["integrations"],
  "properties": {
    "integrations": {
      "type": "object",
      "description": "Integration configuration",
      "properties": {
        "permission_restart": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean"},
            "restart_delay_sec": {"type": "number", "minimum": 0},
            "poll_interval_sec": {"type": "number", "minimum": 0.5},
            "max_restart_attempts": {"type": "integer", "minimum": 1},
            "respect_active_sessions": {"type": "boolean"},
            "respect_updates": {"type": "boolean"},
            "polling_enabled": {"type": "boolean"},
            "critical_permissions": {
              "type": "array",
              "items": {"type": "string", "enum": ["microphone", "accessibility", "input_monitoring", "screen_capture"]}
            }
          },
          "required": ["enabled"]
        },
        "first_run_permissions": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean"}
          }
        }
      }
    }
  }
}

