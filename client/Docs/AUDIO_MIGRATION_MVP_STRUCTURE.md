# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ MVP: –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞

**–°—Ç–∞—Ç—É—Å**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 2025-01-XX  
**–¶–µ–ª—å**: –ß–µ—Ç–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ MVP

---

## üéØ –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ MVP

–ö–∞–∂–¥—ã–π MVP –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:

1. **–ß–µ—Ç–∫—É—é —Ü–µ–ª—å** (—á—Ç–æ –¥–æ–∫–∞–∑—ã–≤–∞–µ–º)
2. **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (—á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞)
3. **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (—á—Ç–æ –ø–æ–ª—É—á–∞–µ–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ)
4. **–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞** (–∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º, —á—Ç–æ MVP –ø—Ä–æ–π–¥–µ–Ω)
5. **Exit Gate** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É MVP)
6. **–°—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞** (–∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø—Ä–æ—Ç–æ—Ç–∏–ø)
7. **–ú–µ—Ç—Ä–∏–∫–∏** (—á—Ç–æ –∏–∑–º–µ—Ä—è–µ–º)
8. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (—á—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º)

---

## üìã –®–∞–±–ª–æ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä—ã MVP

```python
#!/usr/bin/env python3
"""
MVP-<N>: <–ù–∞–∑–≤–∞–Ω–∏–µ>

–¶–µ–ª—å: <–ß–µ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ —Ü–µ–ª–∏>

Exit Gate:
- [ ] –ö—Ä–∏—Ç–µ—Ä–∏–π 1
- [ ] –ö—Ä–∏—Ç–µ—Ä–∏–π 2
- [ ] –ö—Ä–∏—Ç–µ—Ä–∏–π 3
"""

import sys
import logging
from pathlib import Path

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

class <MVPName>Prototype:
    """
    –ü—Ä–æ—Ç–æ—Ç–∏–ø –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è <—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏>
    
    –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
    1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (setup)
    2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (prepare)
    3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ (run_tests)
    4. –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (collect_metrics)
    5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate (check_exit_gate)
    6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ (generate_report)
    """
    
    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞"""
        self.metrics = {}
        self.results = {}
        self.errors = []
        
    def setup(self) -> bool:
        """
        –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        
        Returns:
            True –µ—Å–ª–∏ setup —É—Å–ø–µ—à–µ–Ω, False –∏–Ω–∞—á–µ
        """
        pass
        
    def prepare(self) -> bool:
        """
        –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        
        Returns:
            True –µ—Å–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞, False –∏–Ω–∞—á–µ
        """
        pass
        
    def run_tests(self) -> dict:
        """
        –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
        
        Returns:
            dict —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
        """
        pass
        
    def collect_metrics(self) -> dict:
        """
        –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
        
        Returns:
            dict —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
        """
        pass
        
    def check_exit_gate(self) -> bool:
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
        
        Returns:
            True –µ—Å–ª–∏ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, False –∏–Ω–∞—á–µ
        """
        pass
        
    def generate_report(self) -> str:
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
        
        Returns:
            str —Å –æ—Ç—á–µ—Ç–æ–º
        """
        pass

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    prototype = <MVPName>Prototype()
    
    if not prototype.setup():
        logger.error("‚ùå Setup –ø—Ä–æ–≤–∞–ª–µ–Ω")
        sys.exit(1)
        
    if not prototype.prepare():
        logger.error("‚ùå –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–≤–∞–ª–µ–Ω–∞")
        sys.exit(1)
        
    results = prototype.run_tests()
    metrics = prototype.collect_metrics()
    
    if prototype.check_exit_gate():
        logger.info("‚úÖ MVP-<N> –ü–†–û–ô–î–ï–ù")
        sys.exit(0)
    else:
        logger.error("‚ùå MVP-<N> –ü–†–û–í–ê–õ–ï–ù")
        sys.exit(1)

if __name__ == "__main__":
    main()
```

---

## üî¨ –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ MVP

### MVP-0: Observability (–ª–æ–≥-—Ñ–æ—Ä–º–∞—Ç)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ª—é–±–æ–π –±–∞–≥ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ –ª–æ–≥–∞–º

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤: `snapshot ‚Üí decision ‚Üí action`
2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ø–æ—á–∫—É: snapshot ‚Üí decision ‚Üí action
4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç decision-–ª–æ–≥–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_observability.py
‚îú‚îÄ‚îÄ LogFormatPrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ define_log_format() - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ create_examples() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_reconstruction() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –ù–µ—Ç (MVP-0 –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ø–æ—á–∫—É: snapshot ‚Üí decision ‚Üí action
- [ ] –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç decision-–ª–æ–≥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω

**Exit Gate**:
- [ ] –õ–æ–≥-—Ñ–æ—Ä–º–∞—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ø–æ—á–∫—É: snapshot ‚Üí decision ‚Üí action

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –ª–æ–≥–æ–≤
- –ü—Ä–æ—Ü–µ–Ω—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 100%)

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏

---

### MVP-1: Device Discovery

**–¶–µ–ª—å**: AVFoundation –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ input —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ AVFoundation
2. –ü–æ–ª—É—á–∏—Ç—å system default input
3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ output —É—Å—Ç—Ä–æ–π—Å—Ç–≤
4. –ü–æ–ª—É—á–∏—Ç—å system default output
5. –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
6. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å transport (Bluetooth/USB/Built-in)
7. –ü–æ–ª—É—á–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (channels, sample rate)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_device_discovery.py
‚îú‚îÄ‚îÄ DeviceDiscoveryPrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup_audio_session() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ AVAudioSession
‚îÇ   ‚îú‚îÄ‚îÄ get_input_devices() - –ø–æ–ª—É—á–µ–Ω–∏–µ input —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ get_current_input() - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ input
‚îÇ   ‚îú‚îÄ‚îÄ get_output_devices() - –ø–æ–ª—É—á–µ–Ω–∏–µ output —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ get_current_output() - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ output
‚îÇ   ‚îú‚îÄ‚îÄ normalize_device_name() - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ detect_transport() - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ run_tests() - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- AVAudioSession (—á–µ—Ä–µ–∑ PyObjC)
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (Bluetooth/USB/Built-in)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –°–ø–∏—Å–æ–∫ input —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- –°–ø–∏—Å–æ–∫ output —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- System default input/output
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π transport –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞–π–¥–µ–Ω—ã
- [ ] System default –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ò–º–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] Transport –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç—Å—è

**Exit Gate**:
- [ ] –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞–π–¥–µ–Ω—ã
- [ ] System default –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ò–º–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] Transport –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö input —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö output —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–µ–Ω
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è transport

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ù–∞–π–¥–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∏–º—è, UID, —Ç–∏–ø, channels)
- System default —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π transport

---

### MVP-1b: Device Identity (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –º—ã –º–æ–∂–µ–º –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ—Å–ª–µ reconnect

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –°–æ—Ö—Ä–∞–Ω—è—Ç—å snapshots —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (UID, name, transport, channels, sample_rate)
2. –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å "–ø–æ–¥–ø–∏—Å–∏" —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏/–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
4. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–º–µ–Ω–µ –ø—Ä–æ—Ñ–∏–ª—è BT (HFP/A2DP)
5. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ/–ø–µ—Ä–µ–ª–æ–≥–∏–Ω–µ
6. –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (UID/name/channels) –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_device_identity.py
‚îú‚îÄ‚îÄ DeviceSignature (dataclass)
‚îÇ   ‚îú‚îÄ‚îÄ uid, name, normalized_name, transport, channels, sample_rate
‚îÇ   ‚îú‚îÄ‚îÄ is_same_device() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ get_changes() - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ DeviceIdentityPrototype
‚îÇ   ‚îú‚îÄ‚îÄ capture_device_signature() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_identity_stability() - —Ç–µ—Å—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_reconnect_scenario() - —Ç–µ—Å—Ç reconnect
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Ç MVP-1 (Device Discovery)
- –°–æ–±—ã—Ç–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è/–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –°–æ–±—ã—Ç–∏—è —Å–º–µ–Ω—ã –ø—Ä–æ—Ñ–∏–ª—è BT

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- DeviceSignature –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–µ–π
- –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ú–µ—Ç—Ä–∏–∫–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] DeviceSignature —Å—Ç–∞–±–∏–ª—å–Ω–∞ –ø—Ä–∏ reconnect (‚â•90%)
- [ ] –ú–æ–∂–Ω–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å: "—ç—Ç–æ —Ç–æ –∂–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è (UID/name/channels) –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

**Exit Gate**:
- [ ] DeviceSignature —Å—Ç–∞–±–∏–ª—å–Ω–∞ –ø—Ä–∏ reconnect (‚â•90%)
- [ ] –ú–æ–∂–Ω–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å: "—ç—Ç–æ —Ç–æ –∂–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ü—Ä–æ—Ü–µ–Ω—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â•90%)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π UID
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π name
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π channels

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- DeviceSignature –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–µ–π
- –ò–∑–º–µ–Ω–µ–Ω–∏—è (UID/name/channels) —Å –¥–µ—Ç–∞–ª—è–º–∏

---

### MVP-2: Device Mapping

**–¶–µ–ª—å**: –ú–∞–ø–ø–∏–Ω–≥ AVFoundation ‚Üí PortAudio —Å ‚â•80% success, FP ‚âà 0

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å DeviceSignature –∏–∑ AVFoundation —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. –ù–∞–π—Ç–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ PortAudio –ø–æ –∏–º–µ–Ω–∏
3. –ù–∞–π—Ç–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ PortAudio –ø–æ channels
4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å confidence (HIGH/MEDIUM/LOW/NONE)
5. –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏
6. Fallback –Ω–∞ system default –ø—Ä–∏ LOW/NONE
7. –ò–∑–±–µ–≥–∞—Ç—å –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (FP ‚âà 0)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_device_mapping.py
‚îú‚îÄ‚îÄ DeviceMappingPrototype
‚îÇ   ‚îú‚îÄ‚îÄ normalize_device_name() - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ find_portaudio_match() - –ø–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ calculate_confidence() - —Ä–∞—Å—á–µ—Ç confidence
‚îÇ   ‚îú‚îÄ‚îÄ cache_mapping() - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ get_device_index() - –ø–æ–ª—É—á–µ–Ω–∏–µ device_index
‚îÇ   ‚îú‚îÄ‚îÄ test_mapping_for_all_devices() - —Ç–µ—Å—Ç –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –º–∞–ø–ø–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Ç MVP-1 (Device Discovery)
- DeviceSignature –æ—Ç MVP-1b (Device Identity)
- –°–ø–∏—Å–æ–∫ PortAudio —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- MappingResult –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (device_index, confidence, reason, score)
- –ö—ç—à –º–∞–ø–ø–∏–Ω–≥–æ–≤
- –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –º–∞–ø–ø–∏–Ω–≥–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] ‚â•80% —É—Å–ø–µ—à–Ω—ã—Ö –º–∞–ø–ø–∏–Ω–≥–æ–≤ (HIGH/MEDIUM confidence)
- [ ] FP ‚âà 0 (–ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã)
- [ ] Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

**Exit Gate**:
- [ ] ‚â•80% success rate
- [ ] FP ‚âà 0
- [ ] Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –º–∞–ø–ø–∏–Ω–≥–æ–≤ (HIGH/MEDIUM)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (FP)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ confidence (HIGH/MEDIUM/LOW/NONE)
- –ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è fallback

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞–ø–ø–∏–Ω–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- Confidence –∏ reason –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ fallback

**–í–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: –ï—Å–ª–∏ –≤—ã–±–æ—Ä –º–µ–∂–¥—É "—É–º–Ω–µ–µ –º–∞–ø–ø–∏–Ω–≥" –∏ "–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ fallback" ‚Üí –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ–º fallback.

---

### MVP-3: Storm/Reconcile (single-flight, debounce)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –±—É—Ä—è–º —Å–æ–±—ã—Ç–∏–π (device storms)

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å 10-30 —Å–æ–±—ã—Ç–∏–π –ø–æ–¥—Ä—è–¥ (–∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π capture)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å single-flight –º–µ—Ö–∞–Ω–∏–∑–º (–æ–¥–∏–Ω reconcile –∑–∞ —Ä–∞–∑)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å pending —Ñ–ª–∞–≥
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å debounce –ø–æ —Ç–∏–ø—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (Bluetooth/USB/Built-in)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–æ–≤ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
6. –ò–∑–º–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ restarts –Ω–∞ –æ–¥–∏–Ω —Ä–µ–∞–ª—å–Ω—ã–π change

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_storm_reconcile.py
‚îú‚îÄ‚îÄ DeviceEvent (dataclass)
‚îÇ   ‚îî‚îÄ‚îÄ event_type, device_name, device_uid, transport, timestamp
‚îú‚îÄ‚îÄ ReconcileEngine
‚îÇ   ‚îú‚îÄ‚îÄ reconcile() - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ reconcile —Å single-flight
‚îÇ   ‚îú‚îÄ‚îÄ _needs_restart() - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ restart
‚îÇ   ‚îî‚îÄ‚îÄ metrics - —Å—á–µ—Ç—á–∏–∫–∏ reconcile/restart
‚îú‚îÄ‚îÄ DebounceManager
‚îÇ   ‚îú‚îÄ‚îÄ get_debounce_delay() - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ debounce
‚îÇ   ‚îî‚îÄ‚îÄ reset_device() - —Å–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
‚îú‚îÄ‚îÄ StormReconcilePrototype
‚îÇ   ‚îú‚îÄ‚îÄ simulate_device_storm() - —Å–∏–º—É–ª—è—Ü–∏—è –±—É—Ä–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ process_events_with_debounce() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å debounce
‚îÇ   ‚îú‚îÄ‚îÄ test_single_flight() - —Ç–µ—Å—Ç single-flight
‚îÇ   ‚îú‚îÄ‚îÄ test_debounce() - —Ç–µ—Å—Ç debounce
‚îÇ   ‚îú‚îÄ‚îÄ test_no_cycles() - —Ç–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ü–∏–∫–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π (DeviceEvent)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è debounce (initial, increment, max –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö reconcile
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ restarts
- –ú–µ—Ç—Ä–∏–∫–∏ debounce
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–∏–∫–ª–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] –ù–µ –±–æ–ª—å—à–µ 1 restart –Ω–∞ –æ–¥–∏–Ω —Ä–µ–∞–ª—å–Ω—ã–π change
- [ ] –ù–µ—Ç —Ü–∏–∫–ª–æ–≤ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- [ ] Debounce —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Single-flight –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ reconcile

**Exit Gate**:
- [ ] –ù–µ –±–æ–ª—å—à–µ 1 restart –Ω–∞ –æ–¥–∏–Ω —Ä–µ–∞–ª—å–Ω—ã–π change
- [ ] –ù–µ—Ç —Ü–∏–∫–ª–æ–≤
- [ ] Debounce —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Single-flight —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ reconcile –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ restarts –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±—É—Ä–∏ —Å–æ–±—ã—Ç–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ pending reconcile

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å timestamp
- –ö–∞–∂–¥—ã–π reconcile —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
- –ö–∞–∂–¥—ã–π restart —Å –ø—Ä–∏—á–∏–Ω–æ–π
- Debounce –∑–∞–¥–µ—Ä–∂–∫–∏

---

### MVP-4: Input Stream Quality (heartbeat, xruns)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å callback –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö xruns

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –û—Ç–∫—Ä—ã—Ç—å InputStream —Å device_index
2. –ò–∑–º–µ—Ä–∏—Ç—å callback interval
3. –ò–∑–º–µ—Ä–∏—Ç—å jitter
4. –û–±–Ω–∞—Ä—É–∂–∏—Ç—å underruns/overflows
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é —á–∞—Å—Ç–æ—Ç—É/–±—É—Ñ–µ—Ä
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å heartbeat

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_input_stream_quality.py
‚îú‚îÄ‚îÄ StreamQualityMetrics (dataclass)
‚îÇ   ‚îî‚îÄ‚îÄ callback_interval, jitter, underruns, overflows, sample_rate, buffer_size
‚îú‚îÄ‚îÄ InputStreamQualityPrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup_stream() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ InputStream
‚îÇ   ‚îú‚îÄ‚îÄ callback() - callback –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ measure_callback_interval() - –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
‚îÇ   ‚îú‚îÄ‚îÄ measure_jitter() - –∏–∑–º–µ—Ä–µ–Ω–∏–µ jitter
‚îÇ   ‚îú‚îÄ‚îÄ detect_xruns() - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ underruns/overflows
‚îÇ   ‚îú‚îÄ‚îÄ measure_sample_rate() - –∏–∑–º–µ—Ä–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_heartbeat() - —Ç–µ—Å—Ç heartbeat
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- device_index –æ—Ç MVP-2 (Device Mapping)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è stream (sample_rate, channels, blocksize)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- StreamQualityMetrics
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ heartbeat
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] Callback interval —Å—Ç–∞–±–∏–ª–µ–Ω (–≤–∞—Ä–∏–∞—Ü–∏—è <10%)
- [ ] –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö xruns (underruns/overflows)
- [ ] Heartbeat —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Latency –ø—Ä–∏–µ–º–ª–µ–º–∞—è

**Exit Gate**:
- [ ] Callback interval —Å—Ç–∞–±–∏–ª–µ–Ω (<10% –≤–∞—Ä–∏–∞—Ü–∏—è)
- [ ] –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö xruns
- [ ] Heartbeat —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Latency –ø—Ä–∏–µ–º–ª–µ–º–∞—è

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –°—Ä–µ–¥–Ω–∏–π callback interval
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ callback interval (jitter)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ underruns
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ overflows
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è sample rate
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π buffer size

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥—ã–π callback —Å timestamp
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ xruns
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ heartbeat

---

### MVP-5: Input ‚Üí Google SR Pipeline (restart, MIC_BUSY)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É restart/rollback –∏ MIC_BUSY

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É —á–µ—Ä–µ–∑ Google SR
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å MIC_BUSY (–º–∏–∫—Ä–æ—Ñ–æ–Ω –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º)
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å backoff + stop –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å rollback —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (last working device ‚Üí system default)
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_input_google_sr_pipeline.py
‚îú‚îÄ‚îÄ InputState (enum)
‚îÇ   ‚îî‚îÄ‚îÄ STOPPED, STARTING, ACTIVE, STOPPING, FAILED, MIC_BUSY
‚îú‚îÄ‚îÄ GoogleSRPipelinePrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup_microphone() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_device_connection() - —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_device_switching() - —Ç–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_mic_busy() - —Ç–µ—Å—Ç MIC_BUSY
‚îÇ   ‚îú‚îÄ‚îÄ test_backoff() - —Ç–µ—Å—Ç backoff
‚îÇ   ‚îú‚îÄ‚îÄ test_rollback() - —Ç–µ—Å—Ç rollback
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- device_index –æ—Ç MVP-2 (Device Mapping)
- –°–∏–º—É–ª—è—Ü–∏—è MIC_BUSY (–¥—Ä—É–≥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ—Ä–∂–∏—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ MIC_BUSY
- –ú–µ—Ç—Ä–∏–∫–∏ backoff –∏ rollback

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º device_index
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- [ ] MIC_BUSY –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–Ω–µ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è)
- [ ] Backoff —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Rollback —Ä–∞–±–æ—Ç–∞–µ—Ç

**Exit Gate**:
- [ ] –ú–∏–∫—Ä–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] MIC_BUSY –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- [ ] Backoff —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Rollback —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ MIC_BUSY —Å–æ–±—ã—Ç–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π backoff
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π rollback

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å device_index
- –ö–∞–∂–¥–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏
- –ö–∞–∂–¥–æ–µ MIC_BUSY —Å–æ–±—ã—Ç–∏–µ
- –ö–∞–∂–¥–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ backoff/rollback

---

### MVP-6: Output Playback

**–¶–µ–ª—å**: AVAudioEngine –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∞—É–¥–∏–æ

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å AVAudioEngine
2. –°–æ–∑–¥–∞—Ç—å AVAudioPlayerNode
3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å numpy array ‚Üí AVAudioPCMBuffer
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å sample rate conversion (16kHz ‚Üí 48kHz)
5. –í—ã–ø–æ–ª–Ω–∏—Ç—å channel conversion (mono ‚Üí stereo, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
6. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ AVAudioEngine
7. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –º–µ–∂–¥—É output —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_output_playback.py
‚îú‚îÄ‚îÄ OutputPlaybackPrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup_audio_session() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ AVAudioSession
‚îÇ   ‚îú‚îÄ‚îÄ initialize_engine() - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AVAudioEngine
‚îÇ   ‚îú‚îÄ‚îÄ generate_test_audio() - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞—É–¥–∏–æ
‚îÇ   ‚îú‚îÄ‚îÄ numpy_to_pcm_buffer() - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è numpy ‚Üí PCM
‚îÇ   ‚îú‚îÄ‚îÄ convert_sample_rate() - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è sample rate
‚îÇ   ‚îú‚îÄ‚îÄ convert_channels() - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è channels
‚îÇ   ‚îú‚îÄ‚îÄ play_audio_chunk() - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —á–∞–Ω–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_basic_playback() - —Ç–µ—Å—Ç –±–∞–∑–æ–≤–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_format_conversion() - —Ç–µ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –¢–µ—Å—Ç–æ–≤–æ–µ –∞—É–¥–∏–æ (numpy array)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ (sample_rate, channels)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] AVAudioEngine –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- [ ] –ê—É–¥–∏–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

**Exit Gate**:
- [ ] AVAudioEngine —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê—É–¥–∏–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –í—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ AVAudioEngine
- –í—Ä–µ–º—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –í—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AVAudioEngine
- –ö–∞–∂–¥–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞
- –ö–∞–∂–¥–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- –ö–∞–∂–¥–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

---

### MVP-6b: Output Recreate Mid-Play (–æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç recreate –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ TTS/—Ç–æ–Ω
2. –¢—Ä–∏–≥–≥–µ—Ä recreate –≤–æ –≤—Ä–µ–º—è playback (—Å–∏–º—É–ª—è—Ü–∏—è "—Å–º–µ–Ω—ã output")
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç recreate
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ deadlock
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ RECREATING
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ recreate

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_output_recreate_midplay.py
‚îú‚îÄ‚îÄ ChunkQueue
‚îÇ   ‚îú‚îÄ‚îÄ enqueue() - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞–Ω–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ dequeue() - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —á–∞–Ω–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ size() - —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏
‚îú‚îÄ‚îÄ OutputRecreatePrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup_playback() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ enqueue_chunks() - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –≤ –æ—á–µ—Ä–µ–¥—å
‚îÇ   ‚îú‚îÄ‚îÄ trigger_recreate() - —Ç—Ä–∏–≥–≥–µ—Ä recreate
‚îÇ   ‚îú‚îÄ‚îÄ test_queue_survives() - —Ç–µ—Å—Ç –≤—ã–∂–∏–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_no_deadlock() - —Ç–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è deadlock
‚îÇ   ‚îú‚îÄ‚îÄ test_no_infinite_recreating() - —Ç–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ RECREATING
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –°–ø–∏—Å–æ–∫ –∞—É–¥–∏–æ —á–∞–Ω–∫–æ–≤
- –¢—Ä–∏–≥–≥–µ—Ä recreate (—Å–∏–º—É–ª—è—Ü–∏—è —Å–º–µ–Ω—ã output)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–∂–∏–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ deadlock
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ RECREATING
- –ú–µ—Ç—Ä–∏–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] –û—á–µ—Ä–µ–¥—å –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ recreate
- [ ] –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ recreate
- [ ] –ù–µ—Ç deadlock
- [ ] –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ RECREATING

**Exit Gate**:
- [ ] –û—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç recreate
- [ ] –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
- [ ] –ù–µ—Ç deadlock
- [ ] –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ RECREATING

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏ –¥–æ/–ø–æ—Å–ª–µ recreate
- –í—Ä–µ–º—è recreate
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π recreate

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞–Ω–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å
- –ö–∞–∂–¥—ã–π recreate —Å –¥–µ—Ç–∞–ª—è–º–∏
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –¥–æ/–ø–æ—Å–ª–µ recreate
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

---

### MVP-7: Permissions Gate (–¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –±–µ–∑ –ø—Ä–∞–≤)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω permission
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é (–Ω–µ –ø—ã—Ç–∞–µ–º—Å—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å input –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å user messaging (–ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å input –±–µ–∑ –ø—Ä–∞–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_permissions_gate.py
‚îú‚îÄ‚îÄ PermissionStatus (enum)
‚îÇ   ‚îî‚îÄ‚îÄ GRANTED, DENIED, NOT_DETERMINED
‚îú‚îÄ‚îÄ PermissionsGatePrototype
‚îÇ   ‚îú‚îÄ‚îÄ check_microphone_permission() - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_degradation() - —Ç–µ—Å—Ç –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_user_messaging() - —Ç–µ—Å—Ç user messaging
‚îÇ   ‚îú‚îÄ‚îÄ test_no_hidden_attempts() - —Ç–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (GRANTED/DENIED/NOT_DETERMINED)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã user messaging
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] Permission –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ –ø—ã—Ç–∞–µ–º—Å—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –±–µ–∑ –ø—Ä–∞–≤)
- [ ] User messaging –ø–æ–Ω—è—Ç–Ω–æ–µ
- [ ] –ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**Exit Gate**:
- [ ] Permission –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
- [ ] –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] User messaging –ø–æ–Ω—è—Ç–Ω–æ–µ
- [ ] –ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –ö–∞–∂–¥–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
- –ö–∞–∂–¥–æ–µ user messaging
- –ö–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å—Ç–∞—Ä—Ç–∞ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

---

### MVP-8: End-to-End (3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è)

**–¶–µ–ª—å**: –î–æ–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å**:
1. **–°—Ü–µ–Ω–∞—Ä–∏–π 1**: BT disconnect during listening
   - Input –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ fallback
   - –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ reconnect
2. **–°—Ü–µ–Ω–∞—Ä–∏–π 2**: Output switch during speaking
   - Output –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –û—á–µ—Ä–µ–¥—å –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
3. **–°—Ü–µ–Ω–∞—Ä–∏–π 3**: Mic busy then recovered
   - MIC_BUSY –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
   - –ù–µ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
test_end_to_end.py
‚îú‚îÄ‚îÄ EndToEndPrototype
‚îÇ   ‚îú‚îÄ‚îÄ setup_full_system() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ scenario_1_bt_disconnect() - —Å—Ü–µ–Ω–∞—Ä–∏–π 1
‚îÇ   ‚îú‚îÄ‚îÄ scenario_2_output_switch() - —Å—Ü–µ–Ω–∞—Ä–∏–π 2
‚îÇ   ‚îú‚îÄ‚îÄ scenario_3_mic_busy() - —Å—Ü–µ–Ω–∞—Ä–∏–π 3
‚îÇ   ‚îú‚îÄ‚îÄ collect_metrics() - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ check_exit_gate() - –ø—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Input + Output)
- –°–∏–º—É–ª—è—Ü–∏—è —Å–æ–±—ã—Ç–∏–π (disconnect, switch, busy)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö 3 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
- –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- [ ] –í—Å–µ 3 —Å—Ü–µ–Ω–∞—Ä–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–µ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

**Exit Gate**:
- [ ] –í—Å–µ 3 —Å—Ü–µ–Ω–∞—Ä–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –í—Ä–µ–º—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ fallback
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)
- –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π backoff/rollback

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ö–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å –¥–µ—Ç–∞–ª—è–º–∏
- –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

## üìä –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ MVP

### 1. –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ

–í—Å–µ MVP –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å –µ–¥–∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (setup)
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (prepare)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ (run_tests)
- –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (collect_metrics)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate (check_exit_gate)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ (generate_report)

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ MVP –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:
- –ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
- –û—à–∏–±–∫–∏
- –ú–µ—Ç—Ä–∏–∫–∏

### 3. –ú–µ—Ç—Ä–∏–∫–∏

–í—Å–µ MVP –¥–æ–ª–∂–Ω—ã —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö/–ø—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (success rate, latency, etc.)

### 4. Exit Gate

–í—Å–µ MVP –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —á–µ—Ç–∫–∏–µ Exit Gate:
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å–µ MVP –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å:
- –ß–µ—Ç–∫—É—é —Ü–µ–ª—å
- –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

---

## ‚úÖ –ò—Ç–æ–≥

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–≥–æ MVP –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞**:
- –ß–µ—Ç–∫–∞—è —Ü–µ–ª—å
- –í—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- Exit Gate
- –ú–µ—Ç—Ä–∏–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

---

**–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö MVP.**

