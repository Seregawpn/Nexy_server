# –£—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–°—Ç–∞—Ç—É—Å**: –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–ª—è –≤—Å–µ—Ö –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º  
**–û—Å–Ω–æ–≤–∞–Ω –Ω–∞**: `AUDIO_MIGRATION_DEEP_ANALYSIS.md`  
**–î–∞—Ç–∞**: 2025-12-23

---

## üéØ –¶–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —É—Ç–æ—á–Ω—è–µ—Ç –ø–ª–∞–Ω –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (`AUDIO_MIGRATION_GRADUAL_INTEGRATION_PLAN.md`) —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏–∑ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- Race conditions –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏

---

## üìã –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è**:
- `SpeechRecognizer` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω —á–µ—Ä–µ–∑ `sounddevice.InputStream`
- `activate_microphone()` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω —á–µ—Ä–µ–∑ `sounddevice.InputStream`
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç**: –û–±–∞ –º–æ–≥—É—Ç –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ**:
1. **MVP-INT-5 (Input Adapter)**: –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π `AVFInputAdapter` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
2. **MVP-INT-10 (–ê–¥–∞–ø—Ç–∞—Ü–∏—è VoiceRecognitionIntegration)**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `SpeechRecognizer` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ `AudioRouteManager` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
3. **MVP-INT-10 (–ê–¥–∞–ø—Ç–∞—Ü–∏—è FirstRunPermissionsIntegration)**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `activate_microphone()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `AudioRouteManager`

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- Feature flag `audio_route_manager.enabled: false` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- Kill-switch `audio_route_manager.kill_switch: true` –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `is_input_active` –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –≤ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è**:
- `SpeechRecognizer._refresh_device_cache()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `SequentialSpeechPlayer._query_default_output_device()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ output —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `activate_microphone()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ input —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–†–µ—à–µ–Ω–∏–µ**:
1. **MVP-INT-1 (Device Discovery)**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ `DeviceDiscovery`
2. **MVP-INT-2 (Device Mapping)**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ `DeviceMapping`
3. **MVP-INT-7 (Route Manager Core)**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ `RouteManager`
4. **MVP-INT-10, MVP-INT-11 (–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π)**: –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –º–æ–¥—É–ª–µ–π

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ fallback –ø—Ä–∏ `audio_route_manager.enabled: false`
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –∫–æ–¥–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã: `AudioRouteManager`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Race conditions –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è**:
- `SpeechRecognizer.listen_thread` –∏ `AudioDeviceMonitor._monitor_thread` –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å
- `SequentialSpeechPlayer._playback_thread` –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å
- **Race conditions**: –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. **MVP-INT-3 (State Machines)**: –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–µ state machines –¥–ª—è input/output —Å locks
2. **MVP-INT-4 (Reconcile Engine)**: –°–æ–∑–¥–∞—Ç—å reconcile loop —Å single-flight –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
3. **MVP-INT-12 (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤)**: –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π monitoring thread –≤ `AudioRouteManagerIntegration`
4. **MVP-INT-10, MVP-INT-11 (–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π)**: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ monitoring threads

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –í—Å–µ shared state –∑–∞—â–∏—â–µ–Ω–æ locks (`threading.RLock`)
- Single-flight –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ reconcile
- –ï–¥–∏–Ω—ã–π monitoring thread –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏

---

## üîÑ –£—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (13 MVP-INT —ç—Ç–∞–ø–æ–≤)

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (MVP-INT-1..MVP-INT-2)

#### MVP-INT-1: Device Discovery (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å DeviceDiscovery –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/device_discovery.py` (–∏–∑ MVP-1 –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞)
- `modules/audio_route_manager/core/contracts.py` (DeviceInfo, DeviceTransport)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –°–æ–∑–¥–∞—Ç—å `modules/audio_route_manager/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `device_discovery.py` –∏–∑ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞
3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_device_discovery.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–∑–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `sd.query_devices()`)
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (—Å—Ä–∞–≤–Ω–∏—Ç—å —Å `SpeechRecognizer._refresh_device_cache()`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions

**Exit Gate**:
- [ ] –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º –ø–æ–∫–∞–∑–∞–ª–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Ä–µ–º—è**: 1-2 –¥–Ω—è

**Feature Flag**: `audio_route_manager.device_discovery.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

#### MVP-INT-2: Device Mapping (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å DeviceMapping –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/device_mapping.py` (–∏–∑ MVP-2 –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞)
- –û–±–Ω–æ–≤–∏—Ç—å `contracts.py` (MappingResult, Confidence)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å `device_mapping.py` –≤ –º–æ–¥—É–ª—å
2. –û–±–Ω–æ–≤–∏—Ç—å `contracts.py` —Å MappingResult
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_device_mapping.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –º–∞–ø–ø–∏–Ω–≥ AVFoundation ‚Üí PortAudio (–∑–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `sd.query_devices()`)
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–∞–ø–ø–∏–Ω–≥ AVFoundation ‚Üí PortAudio
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å DeviceDiscovery
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (—Å—Ä–∞–≤–Ω–∏—Ç—å —Å `SpeechRecognizer._get_device_name_by_id()`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions

**Exit Gate**:
- [ ] –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º –ø–æ–∫–∞–∑–∞–ª–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Ä–µ–º—è**: 1-2 –¥–Ω—è

**Feature Flag**: `audio_route_manager.device_mapping.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-1 (DeviceDiscovery)

---

### –§–∞–∑–∞ 2: State Machines –∏ Reconcile (MVP-INT-3..MVP-INT-4)

#### MVP-INT-3: State Machines (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Input/Output State Machines –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/input_state_machine.py`
- `modules/audio_route_manager/core/output_state_machine.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å state machines –≤ –º–æ–¥—É–ª—å
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_state_machines.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã race conditions**:
- ‚úÖ –ï–¥–∏–Ω—ã–µ state machines –¥–ª—è input/output —Å locks
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ –ó–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ state management –≤ `SpeechRecognizer` –∏ `SequentialSpeechPlayer`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ state machines (`SpeechRecognizer._stream_state`, `SequentialSpeechPlayer.state_manager`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions (—Ç–µ—Å—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏)

**Exit Gate**:
- [ ] State machines –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –ø–æ–∫–∞–∑–∞–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.state_machines.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-1, MVP-INT-2

---

#### MVP-INT-4: Reconcile Engine (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Reconcile Engine —Å single-flight –º–µ—Ö–∞–Ω–∏–∑–º–æ–º

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/reconcile_engine.py`
- `modules/audio_route_manager/core/debounce_manager.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å reconcile engine –≤ –º–æ–¥—É–ª—å
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_reconcile.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã race conditions**:
- ‚úÖ Single-flight –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ reconcile
- ‚úÖ Debounce –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "device storm"
- ‚úÖ –ó–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ `SpeechRecognizer`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (single-flight, debounce)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: device storm (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å state machines
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions (single-flight —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–µ—Å—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ reconcile)

**Exit Gate**:
- [ ] Reconcile engine –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (device storm)
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ reconcile –ø–æ–∫–∞–∑–∞–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.reconcile.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-3 (State Machines)

---

### –§–∞–∑–∞ 3: Adapters (MVP-INT-5..MVP-INT-6)

#### MVP-INT-5: Input Adapter (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AVFInputAdapter –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/adapters/avf_input_adapter.py` (–∏–∑ MVP-5, MVP-11 –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å adapter –≤ –º–æ–¥—É–ª—å
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_input_adapter.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞**:
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ `AVFInputAdapter`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `is_input_active` –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- ‚úÖ –ó–∞–º–µ–Ω—è–µ—Ç –ø—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –≤ `SpeechRecognizer` –∏ `activate_microphone()`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ input stream
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `SpeechRecognizer` (feature flag OFF)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions (locks —Ä–∞–±–æ—Ç–∞—é—Ç)
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

**Exit Gate**:
- [ ] Input adapter –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –ø–æ–∫–∞–∑–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.input_adapter.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-4 (Reconcile Engine)

---

#### MVP-INT-6: Output Adapter (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AVFOutputAdapter –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü output

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/adapters/avf_output_adapter.py` (–∏–∑ MVP-6, MVP-12 –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å adapter –≤ –º–æ–¥—É–ª—å
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_output_adapter.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü output —á–µ—Ä–µ–∑ `AVFOutputAdapter`
- ‚úÖ –ó–∞–º–µ–Ω—è–µ—Ç –ø—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ output –≤ `SequentialSpeechPlayer`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `SequentialSpeechPlayer` (feature flag OFF)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è output
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions (engine_lock —Ä–∞–±–æ—Ç–∞–µ—Ç)

**Exit Gate**:
- [ ] Output adapter –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.output_adapter.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-4 (Reconcile Engine)

---

### –§–∞–∑–∞ 4: Route Manager –∏ Integration (MVP-INT-7..MVP-INT-9)

#### MVP-INT-7: Route Manager Core (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å RouteManager (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/route_manager.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å route_manager.py –≤ –º–æ–¥—É–ª—å
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (DeviceDiscovery, DeviceMapping, StateMachines, ReconcileEngine, Adapters)
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_route_manager.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (–∑–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª (start input ‚Üí stop input)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (—Å—Ä–∞–≤–Ω–∏—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions

**Exit Gate**:
- [ ] RouteManager –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º –ø–æ–∫–∞–∑–∞–ª–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.route_manager.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-5, MVP-INT-6 (Adapters)

---

#### MVP-INT-8: AudioRouteManagerIntegration (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç)

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é AudioRouteManagerIntegration –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ SimpleModuleCoordinator

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `integration/integrations/audio_route_manager_integration.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ `SimpleModuleCoordinator._create_integrations()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –°–æ–∑–¥–∞—Ç—å `audio_route_manager_integration.py`
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `SimpleModuleCoordinator` (–ø–æ–∑–∏—Ü–∏—è 5, –ø–æ—Å–ª–µ PermissionRestart)
3. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `unified_config.yaml`
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_integration.py`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions

**Exit Gate**:
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ SimpleModuleCoordinator
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-7 (Route Manager Core)

---

#### MVP-INT-9: EventBus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ EventBus –≤ AudioRouteManagerIntegration

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è: `voice.recording_start`, `voice.recording_stop`, `app.mode_changed`, `permissions.first_run_*`
- –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π: `audio.input.active`, `audio.output.ready`, `audio.device.changed`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –≤ `audio_route_manager_integration.py`
2. –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ `audio_route_manager_integration.py`
3. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é payload (–∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ EventBus)
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_eventbus.py`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–ø–æ–¥–ø–∏—Å–∫–∏/–ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (EventBus —Å–æ–±—ã—Ç–∏—è)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: —Å–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è/–ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –≤–∞–ª–∏–¥–∞—Ü–∏—è payload —Ä–∞–±–æ—Ç–∞–µ—Ç

**Exit Gate**:
- [ ] –ü–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è payload —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.eventbus.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-8 (AudioRouteManagerIntegration)

---

### –§–∞–∑–∞ 5: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (MVP-INT-10..MVP-INT-11)

#### MVP-INT-10: –ê–¥–∞–ø—Ç–∞—Ü–∏—è VoiceRecognitionIntegration (feature flag)

**–¶–µ–ª—å**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å VoiceRecognitionIntegration –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AudioRouteManager

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- Feature flag –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `VoiceRecognitionIntegration`
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `audio.input.active`
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ-–¥–∞–Ω–Ω—ã—Ö –∏–∑ AudioRouteManager (–≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å feature flag –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `voice_recognition_integration.py`
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ `audio.input.active`
3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è –∞—É–¥–∏–æ-–¥–∞–Ω–Ω—ã—Ö
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É
5. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_voice_recognition_integration_audio_route.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞**:
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –ø—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏–∑ `SpeechRecognizer`
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `AudioRouteManager` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü)
- ‚úÖ –†–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å `activate_microphone()`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏–∑ `SpeechRecognizer`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ `AudioRouteManager`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã race conditions**:
- ‚úÖ –£–¥–∞–ª—è–µ—Ç `listen_thread` –∏–∑ `SpeechRecognizer`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π monitoring thread –∏–∑ `AudioRouteManagerIntegration`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (feature flag OFF –∏ ON)
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (—Å—Ç–∞—Ä–∞—è –∏ –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: push-to-talk —Ä–∞–±–æ—Ç–∞–µ—Ç (feature flag OFF)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: push-to-talk —Ä–∞–±–æ—Ç–∞–µ—Ç (feature flag ON)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

**Exit Gate**:
- [ ] Feature flag —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å AudioRouteManager)
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (–æ–±–∞ —Ä–µ–∂–∏–º–∞)
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –ø–æ–∫–∞–∑–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-9 (EventBus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

---

#### MVP-INT-11: –ê–¥–∞–ø—Ç–∞—Ü–∏—è SpeechPlaybackIntegration (feature flag)

**–¶–µ–ª—å**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å SpeechPlaybackIntegration –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AudioRouteManager

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- Feature flag –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `SpeechPlaybackIntegration`
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `audio.output.ready`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AVAudioEngine —á–µ—Ä–µ–∑ AudioRouteManager (–≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è output)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å feature flag –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `speech_playback_integration.py`
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ `audio.output.ready`
3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É
5. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_speech_playback_integration_audio_route.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏–∑ `SequentialSpeechPlayer`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ `AudioRouteManager`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã race conditions**:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π monitoring thread –∏–∑ `AudioRouteManagerIntegration`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç engine_lock –¥–ª—è –∑–∞—â–∏—Ç—ã AVAudioEngine

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (feature flag OFF –∏ ON)
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (—Å—Ç–∞—Ä–∞—è –∏ –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (feature flag OFF)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (feature flag ON)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è output
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions

**Exit Gate**:
- [ ] Feature flag —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å AudioRouteManager)
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (–æ–±–∞ —Ä–µ–∂–∏–º–∞)
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-9 (EventBus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

---

### –§–∞–∑–∞ 6: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ E2E (MVP-INT-12..MVP-INT-13)

#### MVP-INT-12: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (thread)

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ AudioRouteManagerIntegration

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- Thread –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –î–æ–±–∞–≤–∏—Ç—å monitoring thread –≤ `audio_route_manager_integration.py`
2. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤
3. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_audio_route_manager_monitoring.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã race conditions**:
- ‚úÖ –ï–¥–∏–Ω—ã–π monitoring thread –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏
- ‚úÖ –ó–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ monitoring threads (`AudioDeviceMonitor._monitor_thread`)

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (monitoring thread)
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ/–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Å—Ç–∞—Ä—ã–π `AudioDeviceMonitor` –æ—Ç–∫–ª—é—á–µ–Ω)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç race conditions (thread-safe)
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç device storm –ø–æ–∫–∞–∑–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race conditions

**Exit Gate**:
- [ ] Monitoring thread —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Integration —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç device storm –ø–æ–∫–∞–∑–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.monitoring.enabled: false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-10, MVP-INT-11 (–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π)

---

#### MVP-INT-13: End-to-End —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å**: –ü–æ–ª–Ω–æ–µ end-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º**:
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: push-to-talk ‚Üí —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ ‚Üí –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- Device storm (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è)
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ)
- **Race conditions**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
1. –°–æ–∑–¥–∞—Ç—å end-to-end —Ç–µ—Å—Ç—ã `tests/integration/test_audio_route_manager_e2e.py`
2. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [ ] End-to-end —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: device storm –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –ø–æ–∫–∞–∑–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç race conditions –ø–æ–∫–∞–∑–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–æ–Ω–æ–∫

**Exit Gate**:
- [ ] End-to-end —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/race conditions
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç SLO
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –í—Å–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: true` (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-12 (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤)

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π –ø—Ä–æ–±–ª–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | MVP-INT —ç—Ç–∞–ø—ã |
|----------|---------|---------------|
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ | –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü —á–µ—Ä–µ–∑ AVFInputAdapter | MVP-INT-5, MVP-INT-10 |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –≤ AudioRouteManager | MVP-INT-1, MVP-INT-2, MVP-INT-7, MVP-INT-10, MVP-INT-11 |
| Race conditions | –ï–¥–∏–Ω—ã–µ state machines + single-flight + –µ–¥–∏–Ω—ã–π monitoring thread | MVP-INT-3, MVP-INT-4, MVP-INT-12 |

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [x] –í—Å–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã MVP-0..MVP-12 –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- [x] –ò–¥–µ–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- [x] –ö–æ–Ω—Ç—Ä–∞–∫—Ç EventBus —Å–æ–∑–¥–∞–Ω
- [x] –ü–ª–∞–Ω –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω
- [x] –¶–∏–∫–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- [x] **–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω** ‚úÖ
- [x] **–£—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω** ‚úÖ
- [ ] Impact Map —Å–æ–∑–¥–∞–Ω –¥–ª—è MVP-INT-1 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –í–æ –≤—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [ ] –ö–∞–∂–¥—ã–π MVP –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –ö–∞–∂–¥—ã–π MVP –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ö–∞–∂–¥—ã–π MVP –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ/race conditions
- [ ] Exit Gate –ø—Ä–æ–π–¥–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –¢–µ—Å—Ç—ã –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–π–¥–µ–Ω—ã

### –ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [ ] End-to-end —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç SLO
- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –í—Å–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å** `Docs/AUDIO_MIGRATION_DEEP_ANALYSIS.md` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
2. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å** `Docs/AUDIO_MIGRATION_REFINED_PLAN.md` (—ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)
3. **–ù–∞—á–∞—Ç—å MVP-INT-1** (Device Discovery)
4. **–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ü–∏–∫–ª** –¥–ª—è MVP-INT-1 —Å —É—á–µ—Ç–æ–º —É—Ç–æ—á–Ω–µ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
5. **–ü—Ä–æ–π—Ç–∏ Exit Gate** –¥–ª—è MVP-INT-1
6. **–ü–µ—Ä–µ–π—Ç–∏ –∫ MVP-INT-2** —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP-INT-1

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –≥–æ—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —É—á—Ç–µ–Ω—ã

