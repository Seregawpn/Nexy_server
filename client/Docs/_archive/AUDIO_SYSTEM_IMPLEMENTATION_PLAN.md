# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—É–¥–∏–æ-—Å–∏—Å—Ç–µ–º—ã Nexy

**–°—Ç–∞—Ç—É—Å**: –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 2025-12-23  
**–û—Å–Ω–æ–≤–∞–Ω –Ω–∞**: –í—Å–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è, —É—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω, workflow, –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è](#1-–æ–±—â–∞—è-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è)
2. [–ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (13 MVP-INT —ç—Ç–∞–ø–æ–≤)](#2-–ø–ª–∞–Ω-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏-13-mvp-int-—ç—Ç–∞–ø–æ–≤)
3. [Workflow –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP-INT](#3-workflow-–¥–ª—è-–∫–∞–∂–¥–æ–≥–æ-mvp-int)
4. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#4-—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#5-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏](#6-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–º–µ—Ç—Ä–∏–∫–∏)
7. [–†–æ–ª–ª–∞—É—Ç –∏ –æ—Ç–∫–∞—Ç](#7-—Ä–æ–ª–ª–∞—É—Ç-–∏-–æ—Ç–∫–∞—Ç)

---

## 1. –û–±—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### 1.1. –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: MVP –∑–∞ MVP, —Ç–µ—Å—Ç–∏—Ä—É–µ–º, –ø—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
2. **–ü–æ–ª–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∫–∞–∂–¥–æ–≥–æ MVP-INT**: –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É, –ø–æ–∫–∞ —Ç–µ–∫—É—â–∏–π –Ω–µ –∑–∞–∫—Ä—ã—Ç
3. **Feature flags**: –í—Å–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã feature flags (OFF –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
4. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**: –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ fallback
5. **Kill-switch**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ kill-switch

### 1.2. –ü—Ä–∞–≤–∏–ª–æ "–ó–∞–∫—Ä—ã–≤–∞–µ–º —á–∞—Å—Ç—å –∑–∞ —á–∞—Å—Ç—å—é"

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç**:
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π MVP-INT –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å**:
- ‚ùå –ù–µ –Ω–∞—á–∏–Ω–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π MVP-INT, –ø–æ–∫–∞ —Ç–µ–∫—É—â–∏–π –Ω–µ –∑–∞–∫—Ä—ã—Ç
- ‚ùå –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚ùå –ù–µ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ MVP-INT –≤ –æ–¥–∏–Ω
- ‚ùå –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å Exit Gate

---

## 2. –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (13 MVP-INT —ç—Ç–∞–ø–æ–≤)

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (MVP-INT-1..MVP-INT-2)

#### MVP-INT-1: Device Discovery

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å DeviceDiscovery –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/device_discovery.py`
- `modules/audio_route_manager/core/contracts.py` (DeviceInfo, DeviceTransport)

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–í—Ä–µ–º—è**: 1-2 –¥–Ω—è

**Feature Flag**: `audio_route_manager.device_discovery.enabled: false`

---

#### MVP-INT-2: Device Mapping

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å DeviceMapping –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/device_mapping.py`
- –û–±–Ω–æ–≤–∏—Ç—å `contracts.py` (MappingResult, Confidence)

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–í—Ä–µ–º—è**: 1-2 –¥–Ω—è

**Feature Flag**: `audio_route_manager.device_mapping.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-1

---

### –§–∞–∑–∞ 2: State Machines –∏ Reconcile (MVP-INT-3..MVP-INT-4)

#### MVP-INT-3: State Machines

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Input/Output State Machines

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/input_state_machine.py`
- `modules/audio_route_manager/core/output_state_machine.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: Race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.state_machines.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-1, MVP-INT-2

---

#### MVP-INT-4: Reconcile Engine

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Reconcile Engine

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/reconcile_engine.py`
- `modules/audio_route_manager/core/debounce_manager.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: Race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.reconcile.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-3

---

### –§–∞–∑–∞ 3: Adapters (MVP-INT-5..MVP-INT-6)

#### MVP-INT-5: Input Adapter

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AVFInputAdapter –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/adapters/avf_input_adapter.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.input_adapter.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-4

---

#### MVP-INT-6: Output Adapter

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AVFOutputAdapter –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü output

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/adapters/avf_output_adapter.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.output_adapter.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-4

---

### –§–∞–∑–∞ 4: Route Manager –∏ Integration (MVP-INT-7..MVP-INT-9)

#### MVP-INT-7: Route Manager Core

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å RouteManager (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `modules/audio_route_manager/core/route_manager.py`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.route_manager.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-5, MVP-INT-6

---

#### MVP-INT-8: AudioRouteManagerIntegration

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é AudioRouteManagerIntegration –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ SimpleModuleCoordinator

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- `integration/integrations/audio_route_manager_integration.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ `SimpleModuleCoordinator._create_integrations()`

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-7

---

#### MVP-INT-9: EventBus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ EventBus

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
- –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è payload

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.eventbus.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-8

---

### –§–∞–∑–∞ 5: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (MVP-INT-10..MVP-INT-11)

#### MVP-INT-10: –ê–¥–∞–ø—Ç–∞—Ü–∏—è VoiceRecognitionIntegration

**–¶–µ–ª—å**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å VoiceRecognitionIntegration –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AudioRouteManager

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- Feature flag –ø—Ä–æ–≤–µ—Ä–∫–∞
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `audio.input.active`
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ-–¥–∞–Ω–Ω—ã—Ö –∏–∑ AudioRouteManager

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, race conditions

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: false` (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-9

---

#### MVP-INT-11: –ê–¥–∞–ø—Ç–∞—Ü–∏—è SpeechPlaybackIntegration

**–¶–µ–ª—å**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å SpeechPlaybackIntegration –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AudioRouteManager

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- Feature flag –ø—Ä–æ–≤–µ—Ä–∫–∞
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `audio.output.ready`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AVAudioEngine —á–µ—Ä–µ–∑ AudioRouteManager

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, race conditions

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: false` (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-9

---

### –§–∞–∑–∞ 6: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ E2E (MVP-INT-12..MVP-INT-13)

#### MVP-INT-12: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ AudioRouteManagerIntegration

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º**:
- Thread –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: Race conditions

**–í—Ä–µ–º—è**: 2-3 –¥–Ω—è

**Feature Flag**: `audio_route_manager.monitoring.enabled: false`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-10, MVP-INT-11

---

#### MVP-INT-13: End-to-End —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å**: –ü–æ–ª–Ω–æ–µ end-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º**:
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: push-to-talk ‚Üí —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ ‚Üí –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- Device storm
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- Race conditions

**–í—Ä–µ–º—è**: 3-4 –¥–Ω—è

**Feature Flag**: `audio_route_manager.enabled: true` (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: MVP-INT-12

---

## 3. Workflow –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP-INT

### 3.1. 6 —ç—Ç–∞–ø–æ–≤ workflow

**–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** (15-30 –º–∏–Ω—É—Ç)
- –ò–∑—É—á–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è MVP-INT
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ä–∞–±–æ—á—É—é —Å—Ä–µ–¥—É

**–≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (2-4 —á–∞—Å–∞)
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏–∑ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞
- –î–æ–±–∞–≤–∏—Ç—å feature flag
- –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

**–≠—Ç–∞–ø 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (1-2 —á–∞—Å–∞)
- Unit —Ç–µ—Å—Ç—ã (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- Integration —Ç–µ—Å—Ç—ã
- –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (feature flag OFF –∏ ON)

**–≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã** (1-2 —á–∞—Å–∞)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ race conditions
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–≠—Ç–∞–ø 5: Exit Gate** (30 –º–∏–Ω—É—Ç)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Exit Gate –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

**–≠—Ç–∞–ø 6: –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É MVP-INT**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É
- –ù–∞—á–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π MVP-INT

---

### 3.2. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):
- –ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- Feature flag –¥–æ–±–∞–≤–ª–µ–Ω
- Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç race conditions
- Exit Gate –ø—Ä–æ–π–¥–µ–Ω

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏** (–∏–∑ —É—Ç–æ—á–Ω–µ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞):
- –¢–µ—Å—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –ø—Ä–æ–π–¥–µ–Ω (–¥–ª—è MVP-INT-5, MVP-INT-10)
- –¢–µ—Å—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–π–¥–µ–Ω (–¥–ª—è –≤—Å–µ—Ö MVP-INT)
- –¢–µ—Å—Ç race conditions –ø—Ä–æ–π–¥–µ–Ω (–¥–ª—è MVP-INT-3, MVP-INT-4, MVP-INT-12)
- –¢–µ—Å—Ç device storm –ø—Ä–æ–π–¥–µ–Ω (–¥–ª—è MVP-INT-4, MVP-INT-12)

---

## 4. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### 4.1. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: `SpeechRecognizer` –∏ `activate_microphone()` –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω

**–†–µ—à–µ–Ω–∏–µ**:
- MVP-INT-5: Input Adapter –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- MVP-INT-10: –ê–¥–∞–ø—Ç–∞—Ü–∏—è VoiceRecognitionIntegration
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `is_input_active` –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- Feature flag `audio_route_manager.enabled: false` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- Kill-switch `audio_route_manager.kill_switch: true` –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

---

### 4.2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

**–†–µ—à–µ–Ω–∏–µ**:
- MVP-INT-1: Device Discovery (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è)
- MVP-INT-2: Device Mapping (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è)
- MVP-INT-7: Route Manager Core (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è)
- MVP-INT-10, MVP-INT-11: –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –∫–æ–¥–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ fallback
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –∫–æ–¥–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞

---

### 4.3. Race conditions

**–ü—Ä–æ–±–ª–µ–º–∞**: –ì–æ–Ω–∫–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ**:
- MVP-INT-3: State Machines (–µ–¥–∏–Ω—ã–µ state machines —Å locks)
- MVP-INT-4: Reconcile Engine (single-flight –º–µ—Ö–∞–Ω–∏–∑–º)
- MVP-INT-12: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–µ–¥–∏–Ω—ã–π monitoring thread)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –í—Å–µ shared state –∑–∞—â–∏—â–µ–Ω–æ locks
- Single-flight –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ reconcile
- –ï–¥–∏–Ω—ã–π monitoring thread –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏

---

## 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 5.1. Unit —Ç–µ—Å—Ç—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ**: ‚â•80% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP-INT

**–¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**:
- DeviceDiscovery: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω
- DeviceMapping: –º–∞–ø–ø–∏–Ω–≥, confidence model
- StateMachines: –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ReconcileEngine: single-flight, debounce
- Adapters: –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ stream, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

---

### 5.2. Integration —Ç–µ—Å—Ç—ã

**–¢–µ—Å—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**:
- DeviceDiscovery + DeviceMapping
- RouteManager + Adapters
- AudioRouteManagerIntegration + EventBus
- VoiceRecognitionIntegration + AudioRouteManagerIntegration
- SpeechPlaybackIntegration + AudioRouteManagerIntegration

---

### 5.3. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP-INT**:
- Feature flag OFF ‚Üí —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Feature flag ON ‚Üí –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- Device storm
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (–¥–ª—è MVP-INT-5, MVP-INT-10)
- Race conditions (–¥–ª—è MVP-INT-3, MVP-INT-4, MVP-INT-12)

---

### 5.4. End-to-End —Ç–µ—Å—Ç—ã

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è MVP-INT-13**:
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: push-to-talk ‚Üí —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ ‚Üí –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- Device storm
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- Race conditions

---

## 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### 6.1. –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**:
- `decision_rate{type}` ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π (start/abort/retry/degrade)
- `tcc_prompt_duration_ms` ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (p95, —Ü–µ–ª—å: ‚â§ 5 —Å–µ–∫)
- `permission_flow_success` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏–π –ø–æ—Ç–æ–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (—Ü–µ–ª—å: ‚â• 99%)
- `permission_restart_success_rate` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤ (—Ü–µ–ª—å: ‚â• 98%)
- `permission_restart_latency_ms` ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (p95, —Ü–µ–ª—å: ‚â§ 15 —Å–µ–∫)
- `input_switch_latency_ms` ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è input —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (p95)
- `output_recreate_latency_ms` ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è output —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (p95)
- `callback_interval_stable` ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å callback interval (–≤–∞—Ä–∏–∞—Ü–∏—è <15%)

---

### 6.2. Decision-–ª–æ–≥–∏

**–ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç** (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω):
```
decision=<start|abort|retry|degrade> ctx={mic=...,screen=...,device=...,network=...,firstRun=...,appMode=...} source=<domain> duration_ms=<int>
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ**: –í—Å–µ gateways –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –≤ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

---

## 7. –†–æ–ª–ª–∞—É—Ç –∏ –æ—Ç–∫–∞—Ç

### 7.1. Feature Flags

**–ì–ª–∞–≤–Ω—ã–π feature flag**:
```yaml
audio_route_manager:
  enabled: false  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω–æ
```

**–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ feature flags**:
```yaml
audio_route_manager:
  device_discovery:
    enabled: false
  device_mapping:
    enabled: false
  # ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
```

**–≠—Ç–∞–ø—ã —Ä–æ–ª–ª–∞—É—Ç–∞**:
1. 1% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
2. 25% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. 50% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. 75% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. 100% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### 7.2. Kill-Switch

**–¢—Ä–∏ —É—Ä–æ–≤–Ω—è –æ—Ç–∫–∞—Ç–∞**:
1. **Kill-switch**: `audio_route_manager.kill_switch: true` ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç
2. **Feature flag OFF**: `audio_route_manager.enabled: false` ‚Üí –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç
3. **–£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç

---

### 7.3. Fallback –º–µ—Ö–∞–Ω–∏–∑–º

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback**:
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É
- –ü—Ä–∏ kill-switch ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É
- –ü—Ä–∏ feature flag OFF ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–ª–∞–Ω–∞

| MVP-INT | –ù–∞–∑–≤–∞–Ω–∏–µ | –§–∞–∑–∞ | –í—Ä–µ–º—è | –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã | Feature Flag |
|---------|----------|------|-------|------------------|--------------|
| 1 | Device Discovery | 1 | 1-2 –¥–Ω—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | `device_discovery.enabled` |
| 2 | Device Mapping | 1 | 1-2 –¥–Ω—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | `device_mapping.enabled` |
| 3 | State Machines | 2 | 2-3 –¥–Ω—è | Race conditions | `state_machines.enabled` |
| 4 | Reconcile Engine | 2 | 2-3 –¥–Ω—è | Race conditions | `reconcile.enabled` |
| 5 | Input Adapter | 3 | 2-3 –¥–Ω—è | –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ | `input_adapter.enabled` |
| 6 | Output Adapter | 3 | 2-3 –¥–Ω—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | `output_adapter.enabled` |
| 7 | Route Manager Core | 4 | 3-4 –¥–Ω—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | `route_manager.enabled` |
| 8 | AudioRouteManagerIntegration | 4 | 2-3 –¥–Ω—è | - | `enabled` |
| 9 | EventBus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | 4 | 2-3 –¥–Ω—è | - | `eventbus.enabled` |
| 10 | –ê–¥–∞–ø—Ç–∞—Ü–∏—è VoiceRecognitionIntegration | 5 | 3-4 –¥–Ω—è | –ö–æ–Ω—Ñ–ª–∏–∫—Ç, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, race | `enabled` |
| 11 | –ê–¥–∞–ø—Ç–∞—Ü–∏—è SpeechPlaybackIntegration | 5 | 3-4 –¥–Ω—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, race | `enabled` |
| 12 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ | 6 | 2-3 –¥–Ω—è | Race conditions | `monitoring.enabled` |
| 13 | End-to-End —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 6 | 3-4 –¥–Ω—è | –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã | `enabled` |

**–ò—Ç–æ–≥–æ**: ~30-40 –¥–Ω–µ–π –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ (`AUDIO_SYSTEM_ARCHITECTURE.md`)
- [x] –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã (`AUDIO_SYSTEM_REQUIREMENTS.md`)
- [x] –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω (`AUDIO_SYSTEM_IMPLEMENTATION_PLAN.md`)
- [x] Workflow –æ–ø—Ä–µ–¥–µ–ª–µ–Ω (`AUDIO_MIGRATION_IMPLEMENTATION_WORKFLOW.md`)
- [x] –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω (`AUDIO_MIGRATION_DEEP_ANALYSIS.md`)
- [x] –£—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω —Å–æ–∑–¥–∞–Ω (`AUDIO_MIGRATION_REFINED_PLAN.md`)
- [x] –í—Å–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã MVP-0..MVP-12 –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

### –í–æ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] –ö–∞–∂–¥—ã–π MVP-INT –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –ö–∞–∂–¥—ã–π MVP-INT –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ö–∞–∂–¥—ã–π MVP-INT –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã/–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ/race conditions
- [ ] Exit Gate –ø—Ä–æ–π–¥–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP-INT
- [ ] –û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ MVP-INT

### –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] End-to-end —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç SLO
- [ ] –í—Å–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å** `Docs/AUDIO_SYSTEM_ARCHITECTURE.md` (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å** `Docs/AUDIO_SYSTEM_REQUIREMENTS.md` (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
3. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å** `Docs/AUDIO_SYSTEM_IMPLEMENTATION_PLAN.md` (–ø–ª–∞–Ω)
4. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å** `Docs/AUDIO_MIGRATION_IMPLEMENTATION_WORKFLOW.md` (workflow)
5. **–ù–∞—á–∞—Ç—å MVP-INT-1** (Device Discovery) —Å–ª–µ–¥—É—è workflow

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–ª–∞–Ω –≥–æ—Ç–æ–≤, –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

