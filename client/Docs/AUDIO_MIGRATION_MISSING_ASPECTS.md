# –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞**: 2025-01-XX  
**–°—Ç–∞—Ç—É—Å**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤

---

## üîç –ß—Ç–æ –º—ã –µ—â–µ –Ω–µ —É—á–ª–∏

–ü–æ—Å–ª–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã:

---

## 1. Entitlements –∏ macOS Security

### 1.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ entitlements –¥–ª—è AVFoundation

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] AVFoundation –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö entitlements (–µ—Å–ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω —É–∂–µ —Ä–∞–∑—Ä–µ—à–µ–Ω)
- [ ] `com.apple.security.device.microphone` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `packaging/entitlements.plist` ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
- [ ] `com.apple.security.device.audio-input` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `packaging/entitlements.plist` ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ sandbox –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (sandbox –≤—ã–∫–ª—é—á–µ–Ω ‚úÖ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ Hardened Runtime —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–§–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏**: `packaging/entitlements.plist`

**–î–µ–π—Å—Ç–≤–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ entitlements –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã –¥–ª—è AVFoundation.

---

### 1.2 Code Signing –∏ Notarization

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –¥–ª—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] PyObjC —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- [ ] AVFoundation —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ bundle
- [ ] –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `xcrun stapler validate` –ø–æ—Å–ª–µ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 2. –ú–µ—Ç—Ä–∏–∫–∏ –∏ SLO

### 2.1 –†–µ–µ—Å—Ç—Ä –º–µ—Ç—Ä–∏–∫

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤ `client/metrics/registry.md`**:

```markdown
## Audio Route Manager Metrics

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–∏–ø | –°–µ–º–∞–Ω—Ç–∏–∫–∞ | –ü–æ—Ä–æ–≥ SLO (p95) | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|-----|-----------|-----------------|----------|
| `device_discovery_latency_ms{source}` | histogram | –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (event/polling) | event: 0ms, polling: ‚â§2000ms | `AVFoundationDeviceMonitor` |
| `input_switch_duration_ms{transport}` | histogram | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è input —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ | Bluetooth: ‚â§1200ms, USB: ‚â§800ms, Built-in: ‚â§600ms | `AudioRouteManager` |
| `output_recreate_duration_ms` | histogram | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è output | ‚â§600ms (target), ‚â§900ms (–¥–æ–ø—É—Å—Ç–∏–º–æ) | `AVFoundationAudioPlayback` |
| `mapping_confidence_distribution` | histogram | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ confidence –º–∞–ø–ø–∏–Ω–≥–∞ | HIGH ‚â•80%, MEDIUM ‚â•15%, LOW ‚â§5% | `DeviceMapper` |
| `reconcile_duration_ms` | histogram | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å reconcile –æ–ø–µ—Ä–∞—Ü–∏–π | ‚â§50ms | `AudioRouteManager` |
| `reconcile_pending_count` | gauge | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ pending reconcile | ‚â§1 | `AudioRouteManager` |
| `active_device_signatures{transport}` | gauge | –ê–∫—Ç–∏–≤–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ —Ç–∏–ø—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ | N/A | `AudioRouteManager` |
| `route_manager_decision_rate{type}` | counter | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π RouteManager | N/A | `AudioRouteManager` |
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –≤ `client/metrics/registry.md`.

---

### 2.2 –¢–µ—Å—Ç—ã SLO

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ —Å–æ–∑–¥–∞–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å**:
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –≤ `tests/perf/test_slo.py`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ SLO –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

**–î–µ–π—Å—Ç–≤–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫.

---

## 3. Decision Logs (–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç)

### 3.1 –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –¥–ª—è RouteManager

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω

**–¢—Ä–µ–±—É–µ—Ç—Å—è**:
- [ ] RouteManager –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è –≤ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:
  ```
  decision=<start|abort|retry|degrade> ctx={mic=...,screen=...,device=...,network=...,firstRun=...,appMode=...} source=route_manager duration_ms=<int>
  ```
- [ ] –í—Å–µ —Ä–µ—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ Snapshot
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (1 –ø–æ–∑–∏—Ç–∏–≤ + 1 –Ω–µ–≥–∞—Ç–∏–≤)

**–ü—Ä–∏–º–µ—Ä**:
```python
# –í route_manager.py
_log_decision(
    level="info",
    decision=Decision.START,
    s=snapshot,
    source="route_manager",
    reason="device_changed",
    duration_ms=reconcile_duration_ms
)
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –≤ RouteManager.

---

### 3.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ª–æ–≥–∞–º–∏

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `YYYY-MM-DD HH:MM:SS - Nexy - LEVEL - [session_id] - Message`
- [ ] –í—Å–µ —Å–æ–±—ã—Ç–∏—è –≤–∫–ª—é—á–∞—é—Ç `session_id`
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: `module.start|ok|fail` —Å session_id, duration_ms, –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**–î–µ–π—Å—Ç–≤–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ RouteManager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## 4. STATE_CATALOG –∏ interaction_matrix

### 4.1 –ù–æ–≤—ã–µ –æ—Å–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞

**–í–æ–ø—Ä–æ—Å**: –ù—É–∂–Ω—ã –ª–∏ –Ω–æ–≤—ã–µ –æ—Å–∏ –¥–ª—è –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã?

**–í–æ–∑–º–æ–∂–Ω—ã–µ –Ω–æ–≤—ã–µ –æ—Å–∏**:
- `audio.input.device` - —Ç–µ–∫—É—â–µ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ input —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (DeviceSignature)
- `audio.output.device` - —Ç–µ–∫—É—â–µ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ output —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (DeviceSignature)
- `audio.route.desired` - –∂–µ–ª–∞–µ–º—ã–π –º–∞—Ä—à—Ä—É—Ç (system/manual)
- `audio.route.active` - –∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç

**–¢—Ä–µ–±—É–µ—Ç—Å—è**:
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω—ã –ª–∏ –Ω–æ–≤—ã–µ –æ—Å–∏
- [ ] –ï—Å–ª–∏ –¥–∞ ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –≤ `Docs/STATE_CATALOG.md`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ `config/interaction_matrix.yaml`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `integration/core/selectors.py`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å gateways –∏ —Ç–µ—Å—Ç—ã

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –Ω–æ–≤—ã—Ö –æ—Å–µ–π.

---

### 4.2 –ü—Ä–∞–≤–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞**:
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ RouteManager –ø—Ä–∏ `first_run=true`
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ RouteManager –ø—Ä–∏ `permission_restart.scheduled`
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ RouteManager –ø—Ä–∏ `update_in_progress=true`
- [ ] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ—à–µ–Ω–∏–π (hard_stop/graceful/preference)

**–î–µ–π—Å—Ç–≤–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ `config/interaction_matrix.yaml` –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ RouteManager.

---

## 5. ADR –∏ Change Impact

### 5.1 ADR –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ —Å–æ–∑–¥–∞–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å**:
- [ ] `Docs/ADRs/ADR_YYYY-MM-DD_avfoundation_audio_migration.md`
- [ ] –ú–∏–∫—Ä–æ-ADR —Å–æ–≥–ª–∞—Å–Ω–æ —à–∞–±–ª–æ–Ω—É `Docs/templates/ADR_MIN.md`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ ADR**:
- –ß—Ç–æ: –ú–∏–≥—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã –Ω–∞ AVFoundation
- –ü–æ—á–µ–º—É: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ PortAudio
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: –£–ª—É—á—à–µ–Ω–∏–µ PortAudio –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CoreAudio –Ω–∞–ø—Ä—è–º—É—é
- –†–µ—à–µ–Ω–∏–µ: AVFoundation –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ output, PortAudio –¥–ª—è input
- –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è: –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, feature flags, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —Ä–æ–ª–ª–∞—É—Ç
- –î–∞—Ç–∞: YYYY-MM-DD
- –û—Ç–∫–∞—Ç: Kill-switches –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å ADR –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 5.2 Change Impact Assessment

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ —Å–æ–∑–¥–∞–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å**:
- [ ] `.impact/change_impact_avfoundation_audio.yaml`
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ —à–∞–±–ª–æ–Ω—É `Docs/templates/change_impact.yaml`

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã**:
- `axes_touched` - –∫–∞–∫–∏–µ –æ—Å–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
- `invariants` - –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è
- `guards_updated` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ guards
- `interaction_matrix_updated` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏ –º–∞—Ç—Ä–∏—Ü–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- `required_test_plans` - –ø–ª–∞–Ω—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `pairwise_tests_min` - –º–∏–Ω–∏–º—É–º pairwise —Ç–µ—Å—Ç–æ–≤ (‚â•8-14)
- `metrics` - –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `rollout` - –ø–ª–∞–Ω —Ä–æ–ª–ª–∞—É—Ç–∞ —Å feature flags
- `test_strategy` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `risks` - —Ä–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å change_impact.yaml –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 6. Error Handling –∏ Recovery

### 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AudioRecoveryManager

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å**:
- [ ] –ö–∞–∫ RouteManager –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `AudioRecoveryManager`
- [ ] –ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ recovery: RouteManager –∏–ª–∏ AudioRecoveryManager?
- [ ] –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–¢–µ–∫—É—â–∏–π AudioRecoveryManager**:
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏ "—Ç–∏—à–∏–Ω–µ" CoreAudio
- –ü–æ—Ä–æ–≥–∏: 10 ‚Üí reprime, 50 ‚Üí recreate 44.1kHz, 100 ‚Üí toggle device, 150+ ‚Üí ffmpeg probe

**–í–æ–ø—Ä–æ—Å**: –ù—É–∂–µ–Ω –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π recovery –¥–ª—è RouteManager –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π?

**–î–µ–π—Å—Ç–≤–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é recovery –¥–ª—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.

---

### 6.2 Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ç–æ—á–Ω–∏—Ç—å**:
- [ ] Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ PyObjC ‚úÖ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)
- [ ] Fallback –Ω–∞ system default –ø—Ä–∏ LOW/NONE confidence ‚úÖ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)
- [ ] Fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö AVFoundation (–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)
- [ ] Fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –º–∞–ø–ø–∏–Ω–≥–∞ (–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)

**–î–µ–π—Å—Ç–≤–∏–µ**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

---

## 7. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Observability

### 7.1 –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å**:
- [ ] –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è RouteManager (DEBUG/INFO/WARN/ERROR)
- [ ] –ß—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ production (—Ç–æ–ª—å–∫–æ —Ä–µ—à–µ–Ω–∏—è –∏–ª–∏ –¥–µ—Ç–∞–ª–∏ reconcile)
- [ ] –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (`audio.route.snapshot`)

**–î–µ–π—Å—Ç–≤–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### 7.2 Health Checks

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å**:
- [ ] Health check –¥–ª—è RouteManager
- [ ] Health check –¥–ª—è AVFoundationDeviceMonitor
- [ ] Health check –¥–ª—è AVFoundationAudioPlayback
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ health checks

**–î–µ–π—Å—Ç–≤–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å health checks –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

## 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8.1 Golden Tests –¥–ª—è –ª–æ–≥–æ–≤

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å**:
- [ ] Golden —Ç–µ—Å—Ç—ã –¥–ª—è –ª–æ–≥–æ–≤ RouteManager (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `test_golden_first_run_logs.py`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ decision-–ª–æ–≥–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å golden —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 8.2 Pairwise —Ç–µ—Å—Ç—ã –¥–ª—è RouteManager

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å**:
- [ ] ‚â•8-14 pairwise —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] 2 –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Å—Ç–∞
- [ ] –¢–µ—Å—Ç—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π decision-–ª–æ–≥–æ–≤

**–û—Å–∏ –¥–ª—è pairwise**:
- `permissions.mic` (granted/denied/prompt_blocked)
- `device.input` (default_ok/busy)
- `network` (online/offline)
- `firstRun` (true/false)
- `appMode` (SLEEPING/LISTENING/PROCESSING)
- `update_in_progress` (true/false)

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å pairwise —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ RouteManager.

---

## 9. –£–ø–∞–∫–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ

### 9.1 PyObjC –≤ PyInstaller

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] PyObjC –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ `.app`
- [ ] AVFoundation —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ bundle
- [ ] Runtime hooks —Ä–∞–±–æ—Ç–∞—é—Ç (`packaging/runtime_hook_pyobjc_fix.py`)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —á–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ (–±–µ–∑ PyObjC)

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É–ø–∞–∫–æ–≤–∫—É –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 9.2 Packaging Regression Checklist

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–∏—Ç—å**:
- [ ] PyInstaller —Å–±–æ—Ä–∫–∞ (`rebuild_from_scratch.sh`) - –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω
- [ ] `pkgbuild` + `productbuild` + notarization dry-run - –∫–æ–º–∞–Ω–¥—ã –∏ —Å—Ç–∞—Ç—É—Å—ã
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è `unified_config.yaml` - –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] Smoke-—Ç–µ—Å—Ç `cold_start_diagnostics.sh` - –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ (ffmpeg, assets) - –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –≤ –ø–∞–∫–µ—Ç–µ

**–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–ø–æ–ª–Ω–∏—Ç—å checklist –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 10. 4-–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–Ω—ã–π –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç

### 10.1 –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**:
- [ ] `Docs/STATE_CATALOG.md` –æ–±–Ω–æ–≤–ª–µ–Ω (–µ—Å–ª–∏ –æ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω—ã)
- [ ] `config/interaction_matrix.yaml` –æ–±–Ω–æ–≤–ª–µ–Ω (–µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑–º–µ–Ω–µ–Ω—ã)
- [ ] `integration/core/gateways.py` –æ–±–Ω–æ–≤–ª–µ–Ω (–µ—Å–ª–∏ –ª–æ–≥–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞)
- [ ] –¢–µ—Å—Ç—ã gateways –æ–±–Ω–æ–≤–ª–µ–Ω—ã (‚â•8-14 pairwise + 2 –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö)

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
- [ ] –í—Å–µ –æ—Å–∏ –∏–∑ STATE_CATALOG.md –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ interaction_matrix.yaml
- [ ] –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ interaction_matrix.yaml —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ gateways.py
- [ ] –í—Å–µ gateways –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏ —Å decision-–ª–æ–≥–∞–º–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 10.2 Machine-enforced –ø—Ä–∞–≤–∏–ª–∞

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] `scripts/verify_no_direct_state_access.py` - –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é
- [ ] `scripts/validate_schemas.py` - —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–Ω—ã
- [ ] `scripts/verify_rule_coverage.py` - –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–∫—Ä—ã—Ç—ã
- [ ] `scripts/verify_feature_flags.py` - feature flags –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã

**–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 11. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 11.1 README –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ —Å–æ–∑–¥–∞–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å**:
- [ ] `modules/voice_recognition/core/avfoundation/README.md`
- [ ] –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] Troubleshooting

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å README –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 11.2 –ö–æ–Ω—Ç—Ä–∞–∫—Ç EventBus

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å**:
- [ ] –í—Å–µ —Å–æ–±—ã—Ç–∏—è RouteManager —Å payload —Å—Ö–µ–º–∞–º–∏
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

**–î–µ–π—Å—Ç–≤–∏–µ**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç EventBus.

---

### 11.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å**:
- [ ] `Docs/AUDIO_SYSTEM_ARCHITECTURE.md` - –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- [ ] `Docs/ARCHITECTURE_OVERVIEW.md` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- [ ] `Docs/CURRENT_STATUS_REPORT.md` - –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∏–≥—Ä–∞—Ü–∏–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 12. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 12.1 –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å**:
- [ ] –ë–µ–Ω—á–º–∞—Ä–∫–∏ latency –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] CPU usage –ø—Ä–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] Memory usage RouteManager
- [ ] Overhead –æ—Ç reconcile –æ–ø–µ—Ä–∞—Ü–∏–π

**–î–µ–π—Å—Ç–≤–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 12.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å**:
- [ ] Debounce (per-device) - —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ ‚úÖ
- [ ] Polling –∏–Ω—Ç–µ—Ä–≤–∞–ª (1-2s) - —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ ‚úÖ
- [ ] Single-flight reconcile - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] Memory leaks - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## 13. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 13.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (PyObjC –æ–±—ä–µ–∫—Ç—ã)
- [ ] –ù–µ—Ç race conditions
- [ ] –ù–µ—Ç deadlocks
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–î–µ–π—Å—Ç–≤–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 14. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### 14.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AudioRecoveryManager

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–í–æ–ø—Ä–æ—Å**: –ö–∞–∫ RouteManager –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å AudioRecoveryManager?

**–í–∞—Ä–∏–∞–Ω—Ç—ã**:
1. RouteManager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AudioRecoveryManager –¥–ª—è recovery
2. RouteManager –∏–º–µ–µ—Ç —Å–≤–æ–π recovery –º–µ—Ö–∞–Ω–∏–∑–º
3. RouteManager –∏ AudioRecoveryManager —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**–î–µ–π—Å—Ç–≤–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

---

### 14.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ workflows

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] `ListeningWorkflow` - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å RouteManager
- [ ] `ProcessingWorkflow` - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å RouteManager
- [ ] –í—Å–µ workflows —á–∏—Ç–∞—é—Ç —Å–æ–±—ã—Ç–∏—è RouteManager –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## 15. –†–æ–ª–ª–∞—É—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 15.1 –ü–ª–∞–Ω —Ä–æ–ª–ª–∞—É—Ç–∞

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ç–æ—á–Ω–∏—Ç—å**:
- [ ] Shadow-mode —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π)
- [ ] –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏ (1% ‚Üí 25% ‚Üí 100%)
- [ ] –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ç–∫–∞—Ç–∞
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

**–î–µ–π—Å—Ç–≤–∏–µ**: –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω —Ä–æ–ª–ª–∞—É—Ç–∞.

---

### 15.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å**:
- [ ] –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ SLO
- [ ] –î–∞—à–±–æ—Ä–¥ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ —Ä–æ–ª–ª–∞—É—Ç–∞.

---

## –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–±–ª–æ–∫–∏—Ä—É—é—Ç –º–∏–≥—Ä–∞—Ü–∏—é)

- [ ] **ADR —Å–æ–∑–¥–∞–Ω** - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ
- [ ] **Change Impact —Å–æ–∑–¥–∞–Ω** - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–ª–∏—è–Ω–∏–µ
- [ ] **–ú–µ—Ç—Ä–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ registry.md** - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] **Decision logs –≤ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ** - –¥–ª—è observability
- [ ] **–ü—Ä–∞–≤–∏–ª–∞ –≤ interaction_matrix.yaml** - –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- [ ] **Entitlements –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã** - –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏

### –í–∞–∂–Ω—ã–µ (–≤–ª–∏—è—é—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ)

- [ ] **–¢–µ—Å—Ç—ã SLO —Å–æ–∑–¥–∞–Ω—ã** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä–æ–≥–æ–≤
- [ ] **Pairwise —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã** - –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- [ ] **Golden —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–æ–≤
- [ ] **Health checks –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã** - –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- [ ] **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã** - –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AudioRecoveryManager –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞** - –¥–ª—è recovery

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (—É–ª—É—á—à–∞—é—Ç —Å–∏—Å—Ç–µ–º—É)

- [ ] **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** - –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- [ ] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** - –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –¥–ª—è production
- [ ] **Packaging checklist –∑–∞–ø–æ–ª–Ω–µ–Ω** - –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å ADR
2. –°–æ–∑–¥–∞—Ç—å Change Impact Assessment
3. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ registry.md
4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ interaction_matrix.yaml
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å entitlements

### –í–æ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å decision logs –≤ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å AudioRecoveryManager
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
4. –°–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

### –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –°–æ–∑–¥–∞—Ç—å golden —Ç–µ—Å—Ç—ã
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å packaging checklist
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ–≥–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤**: 15 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, ~50+ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö**: 6  
**–í–∞–∂–Ω—ã—Ö**: 6  
**–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö**: 3

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ù–∞—á–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

