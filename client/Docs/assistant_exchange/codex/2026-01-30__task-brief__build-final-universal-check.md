# Build Final Universal Python Check

## Метаданные
- Ассистент: codex
- Тип: task-brief
- Дата: 2026-01-30
- ID (INS-###): N/A

## Diagnosis
Сборка Universal 2 могла запускать x86_64 PyInstaller через BUILD_PYTHON, который не поддерживает x86_64, что приводит к сбоям и отсутствию зависимостей.

## Root Cause
Нет явной проверки, что BUILD_PYTHON способен запускаться под x86_64 (Rosetta).

## Optimal Fix
Добавить guard: проверка запуска BUILD_PYTHON под x86_64 перед началом dual-arch сборки.

## Verification
- При отсутствии x86_64 поддержки скрипт падает с понятной ошибкой.
- При universal python/venv сборка продолжается.

## Запрос/цель
Добавить в упаковочный скрипт проверку корректности окружения для universal сборки.

## Контекст
- Файлы: `packaging/build_final.sh`

## Решения/выводы
- Добавлена проверка `arch -x86_64 $BUILD_PYTHON` перед PyInstaller.

## Открытые вопросы
- Нужна ли отдельная проверка arm64 в случае запуска из x86_64 окружения?

## Следующие шаги
- Запустить `./packaging/build_final.sh` и убедиться, что guard корректно отрабатывает.
