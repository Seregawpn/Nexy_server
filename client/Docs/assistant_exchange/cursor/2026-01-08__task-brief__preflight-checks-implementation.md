# –û—Ç—á—ë—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

**–î–∞—Ç–∞:** 2026-01-08  
**–¢–∏–ø:** task-brief  
**–ê–≤—Ç–æ—Ä:** Cursor Assistant  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üìã –ó–∞–¥–∞—á–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (preflight checks) —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É `Docs/PREFLIGHT_IMPLEMENTATION_PLAN.md`.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `scripts/verify_imports.py` ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö .py —Ñ–∞–π–ª–æ–≤ (main.py, simple_module_coordinator.py, core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –≤—Å–µ—Ö 22 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (EventBus, StateManager, ErrorHandler, SimpleModuleCoordinator)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ PyObjC –º–æ–¥—É–ª–µ–π (AppKit, Foundation, Quartz, AVFoundation)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PYTHONPATH (–∫–∞–∫ –≤ main.py)
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –ø—É—Ç—è–º–∏ —Ñ–∞–π–ª–æ–≤
- Exit code 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
$ python3 scripts/verify_imports.py
‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

### 2. `scripts/verify_pyinstaller.py` ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–∞—Ä—Å–∏–Ω–≥ `packaging/Nexy.spec`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `hiddenimports` –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É (–≤—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, core –º–æ–¥—É–ª–∏, PyObjC, gRPC)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `datas` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ (config, assets, resources, integration)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `runtime_hooks` (runtime_hook_pyobjc_fix.py)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `info_plist` –Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (CFBundleVersion, NSMicrophoneUsageDescription, –∏ —Ç.–¥.)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `bundle_identifier` –≤ BUNDLE

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –£–º–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
- –£—á–µ—Ç bundle_identifier –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã CFBundleIdentifier –≤ info_plist
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
$ python3 scripts/verify_pyinstaller.py
‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

### 3. `scripts/diagnose.sh` ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –û–ø—Ü–∏–∏: `--logs`, `--analyze`, `--cold`, `--crash`, `--all`, `--quick`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ (view_nexy_logs.sh, analyze_logs.sh, cold_start_diagnostics.sh)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ä–µ–∂–∏–º–µ `--all`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ Nexy
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ TCC —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ entitlements

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- Exit code 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `scripts/pre_build_gate.sh` ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –û–±–Ω–æ–≤–ª–µ–Ω–æ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "0. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò" –≤ –Ω–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤ (`verify_imports.py`)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`check_dependencies.py`)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–µ–∫—Ü–∏—é "3. –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò":
  - –í–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec (`verify_pyinstaller.py`)

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞, –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ.

### 5. `Docs/PREFLIGHT_CHECKS.md` ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫
- –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- FAQ

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### verify_imports.py
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ –í—Å–µ core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –í—Å–µ 21 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –í—Å–µ PyObjC –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

### verify_pyinstaller.py
- ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ hiddenimports (131 –º–æ–¥—É–ª–µ–π)
- ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ datas (5 —Ä–µ—Å—É—Ä—Å–æ–≤)
- ‚úÖ Runtime hooks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (2 hooks)
- ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ info_plist (8 –∫–ª—é—á–µ–π)

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [x] `verify_imports.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö .py —Ñ–∞–π–ª–æ–≤
- [x] `verify_imports.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö 22 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [x] `verify_imports.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–º–ø–æ—Ä—Ç PyObjC –º–æ–¥—É–ª–µ–π
- [x] `verify_imports.py` Exit code 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [x] `verify_pyinstaller.py` –ø–∞—Ä—Å–∏—Ç Nexy.spec
- [x] `verify_pyinstaller.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç hiddenimports –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É
- [x] `verify_pyinstaller.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç datas –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
- [x] `verify_pyinstaller.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç runtime_hooks
- [x] `diagnose.sh` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–ø—Ü–∏—è–º–∏ --logs, --analyze, --cold, --all
- [x] `pre_build_gate.sh` –≤—ã–∑—ã–≤–∞–µ—Ç verify_imports.py –ø–µ—Ä–≤—ã–º
- [x] `pre_build_gate.sh` –≤—ã–∑—ã–≤–∞–µ—Ç verify_pyinstaller.py
- [x] `pre_build_gate.sh` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `scripts/verify_imports.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤
2. `scripts/verify_pyinstaller.py` - –≤–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec
3. `scripts/diagnose.sh` - –µ–¥–∏–Ω—ã–π wrapper –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. `Docs/PREFLIGHT_CHECKS.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `scripts/pre_build_gate.sh` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ü–µ–Ω–∫–∞ | –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è |
|-----------|--------|-------------------|
| verify_imports.py | 1 —á–∞—Å | ~1 —á–∞—Å |
| verify_pyinstaller.py | 1 —á–∞—Å | ~1 —á–∞—Å |
| diagnose.sh | 30 –º–∏–Ω | ~30 –º–∏–Ω |
| pre_build_gate.sh (update) | 15 –º–∏–Ω | ~15 –º–∏–Ω |
| PREFLIGHT_CHECKS.md | 30 –º–∏–Ω | ~30 –º–∏–Ω |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 30 –º–∏–Ω | ~30 –º–∏–Ω |
| **–ò–¢–û–ì–û** | **~4 —á–∞—Å–∞** | **~4 —á–∞—Å–∞** |

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ–≥–Ω–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª `pre_build_gate.sh`
2. ‚úÖ –°–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `rebuild_from_scratch.sh`
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
4. ‚úÖ –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `Docs/PREFLIGHT_IMPLEMENTATION_PLAN.md` - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- `Docs/PREFLIGHT_CHECKS.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- `scripts/pre_build_gate.sh` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
