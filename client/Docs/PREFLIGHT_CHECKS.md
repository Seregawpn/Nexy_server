# üîç –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ Nexy

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (preflight checks) –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º **–î–û** —É–ø–∞–∫–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π —Å–±–æ—Ä–∫–∏.

## üéØ –¶–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã

- **–í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –¥–æ —É–ø–∞–∫–æ–≤–∫–∏**: —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã, –Ω–µ–ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PyInstaller
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**: –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∏—Ç–µ—Ä–∞—Ü–∏–π**: –º–µ–Ω—å—à–µ —Å–±–æ—Ä–æ–∫ = –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. `verify_imports.py` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –ø–µ—Ä–µ–¥ —É–ø–∞–∫–æ–≤–∫–æ–π.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç (14 –ø—Ä–æ–≤–µ—Ä–æ–∫):**
1. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö .py —Ñ–∞–π–ª–æ–≤ (`main.py`, `simple_module_coordinator.py`, core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
2. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (ffmpeg, flac, SwitchAudioSource, icons)
3. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (unified_config.yaml, interaction_matrix.yaml, tray_config.yaml)
4. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ packaging —Ñ–∞–π–ª–æ–≤ (Nexy.spec, entitlements.plist, runtime_hook –∏ —Ç.–¥.)
5. –ò–º–ø–æ—Ä—Ç core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (EventBus, StateManager, ErrorHandler, SimpleModuleCoordinator)
6. –ò–º–ø–æ—Ä—Ç gateways (9 –º–æ–¥—É–ª–µ–π)
7. –ò–º–ø–æ—Ä—Ç workflows (4 –º–æ–¥—É–ª—è)
8. –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö 20 –º–æ–¥—É–ª–µ–π –∏–∑ `modules/`
9. –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö 21 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
10. –ò–º–ø–æ—Ä—Ç PyObjC –º–æ–¥—É–ª–µ–π (AppKit, Foundation, Quartz, AVFoundation)
11. –ò–º–ø–æ—Ä—Ç utils (4 –º–æ–¥—É–ª—è)
12. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (codesign, xcrun, pkgbuild, productbuild, lipo, python3)
13. –ü—Ä–∞–≤–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ (ffmpeg, flac, SwitchAudioSource)
14. Proto —Ñ–∞–π–ª—ã –∏ pb2.py (streaming.proto ‚Üí streaming_pb2.py)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 scripts/verify_imports.py
```

**Exit codes:**
- `0` ‚Äî –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- `1` ‚Äî –µ—Å—Ç—å –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏–ª–∏ –∏–º–ø–æ—Ä—Ç–æ–≤

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5 —Å–µ–∫—É–Ω–¥

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤...

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤...
   ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤...
   ‚úÖ –í—Å–µ 4 —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞–π–¥–µ–Ω—ã

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤...
   ‚úÖ –í—Å–µ 3 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞–π–¥–µ–Ω—ã

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è packaging —Ñ–∞–π–ª–æ–≤...
   ‚úÖ –í—Å–µ 5 packaging —Ñ–∞–π–ª–æ–≤ –Ω–∞–π–¥–µ–Ω—ã

5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤...
   ‚úÖ –í—Å–µ core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ gateways...
   ‚úÖ –í—Å–µ 9 gateways –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ workflows...
   ‚úÖ –í—Å–µ 4 workflows –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π...
   ‚úÖ –í—Å–µ 20 –º–æ–¥—É–ª–µ–π –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π...
   ‚úÖ –í—Å–µ 21 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

10. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ PyObjC –º–æ–¥—É–ª–µ–π...
    ‚úÖ –í—Å–µ PyObjC –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

11. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ utils...
    ‚úÖ –í—Å–µ 4 utils –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

12. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤...
    ‚úÖ –í—Å–µ 6 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã

13. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤...
    ‚úÖ –í—Å–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ

14. –ü—Ä–æ–≤–µ—Ä–∫–∞ proto —Ñ–∞–π–ª–æ–≤...
    ‚úÖ –í—Å–µ proto —Ñ–∞–π–ª—ã –∏ pb2.py –Ω–∞–π–¥–µ–Ω—ã

‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

---

### 2. `verify_pyinstaller.py` ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç `packaging/Nexy.spec` –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –í—Å–µ –º–æ–¥—É–ª–∏ –∏–∑ `modules/` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `hiddenimports`
- –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏–∑ `integration/integrations/` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `hiddenimports`
- PyObjC –º–æ–¥—É–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `hiddenimports`
- gRPC –∏ protobuf –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `hiddenimports`
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `datas` (config, assets, resources, integration)
- `runtime_hooks` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- `Info.plist` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (CFBundleIdentifier, NSMicrophoneUsageDescription, –∏ —Ç.–¥.)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 scripts/verify_pyinstaller.py
```

**Exit codes:**
- `0` ‚Äî –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- `1` ‚Äî –µ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ imports/data/hooks

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3 —Å–µ–∫—É–Ω–¥—ã

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üîç –í–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec...

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ hiddenimports...
   ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ hiddenimports (245 –º–æ–¥—É–ª–µ–π)

2. –ü—Ä–æ–≤–µ—Ä–∫–∞ datas...
   ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ datas (5 —Ä–µ—Å—É—Ä—Å–æ–≤)

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ runtime_hooks...
   ‚úÖ Runtime hooks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (1 hooks)

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ info_plist...
   ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ info_plist (8 –∫–ª—é—á–µ–π)

‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

---

### 3. `diagnose.sh` ‚Äî –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
./scripts/diagnose.sh --logs

# –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏
./scripts/diagnose.sh --analyze

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
./scripts/diagnose.sh --cold

# –ê–Ω–∞–ª–∏–∑ crash –ª–æ–≥–æ–≤
./scripts/diagnose.sh --crash

# –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
./scripts/diagnose.sh --all

# –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏)
./scripts/diagnose.sh --quick
```

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç `--all`:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (`view_nexy_logs.sh`)
- –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ (`analyze_logs.sh`)
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ (`cold_start_diagnostics.sh`)
- –ê–Ω–∞–ª–∏–∑ crash –ª–æ–≥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ Nexy
- –ü—Ä–æ–≤–µ—Ä–∫–∞ TCC —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ entitlements

**Exit codes:**
- `0` ‚Äî –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- `1` ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

---

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `pre_build_gate.sh`

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ `pre_build_gate.sh`:

**–°–µ–∫—Ü–∏—è "0. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò":**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤ (`verify_imports.py`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`check_dependencies.py`)

**–°–µ–∫—Ü–∏—è "3. –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò":**
- –í–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec (`verify_pyinstaller.py`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
./scripts/pre_build_gate.sh

# –° –æ–ø—Ü–∏—è–º–∏
./scripts/pre_build_gate.sh --skip-tests    # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
./scripts/pre_build_gate.sh --skip-lint     # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã
./scripts/pre_build_gate.sh --verbose       # –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
```

---

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏

#### `packaging/build_final.sh` (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏)

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ **–æ—Å–Ω–æ–≤–Ω–æ–≥–æ** —Å–∫—Ä–∏–ø—Ç–∞ —Å–±–æ—Ä–∫–∏ `./packaging/build_final.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è preflight –ø—Ä–æ–≤–µ—Ä–∫–∏:

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. –†–∞–∑–±–æ—Ä CLI —Ñ–ª–∞–≥–æ–≤ (`--skip-build`, `--clean-install`)
2. **PREFLIGHT –ü–†–û–í–ï–†–ö–ò** ‚Üê –Ω–æ–≤—ã–π —ç—Ç–∞–ø
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ protobuf —Ñ–∞–π–ª–æ–≤
4. –°—Ç–µ–π–¥–∂–∏–Ω–≥ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
5. PyInstaller —Å–±–æ—Ä–∫–∞
6. –ü–æ–¥–ø–∏—Å—å –∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
7. ...

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- `verify_imports.py` ‚Äî 14 –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –∏–º–ø–æ—Ä—Ç–æ–≤, —Ä–µ—Å—É—Ä—Å–æ–≤
- `verify_pyinstaller.py` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec

**–õ–æ–≥ –æ—à–∏–±–æ–∫:** `build_logs/preflight_YYYYMMDD_HHMMSS.log`

---

#### `rebuild_from_scratch.sh` (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞)

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `./rebuild_from_scratch.sh` preflight –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–ø–µ—Ä–µ–¥** –æ—á–∏—Å—Ç–∫–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è:

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- `verify_imports.py` ‚Äî 14 –ø—Ä–æ–≤–µ—Ä–æ–∫
- `verify_pyinstaller.py` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è Nexy.spec
- `check_dependencies.py` ‚Äî –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤

**–õ–æ–≥ –æ—à–∏–±–æ–∫:** `rebuild_logs/preflight_YYYYMMDD_HHMMSS.log`

---

#### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ preflight

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë          ‚ùå PREFLIGHT –ü–†–û–í–ï–†–ö–ò –ù–ï –ü–†–û–ô–î–ï–ù–´!                              ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

–°–±–æ—Ä–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ preflight –ø—Ä–æ–≤–µ—Ä–æ–∫.
–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ –ª–æ–≥–µ: build_logs/preflight_20260108_123456.log

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–û–®–ò–ë–ö–ò –ò–ó PREFLIGHT –õ–û–ì–ê:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ùå resources/ffmpeg/ffmpeg: —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
‚ùå integration.core.event_bus: ImportError: No module named 'xyz'
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

---

### 6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –Ω–∞ **–ª—é–±–æ–º —ç—Ç–∞–ø–µ** —Å–±–æ—Ä–∫–∏ (–Ω–µ —Ç–æ–ª—å–∫–æ preflight), —Å–∫—Ä–∏–ø—Ç:

1. **–ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É** —á–µ—Ä–µ–∑ `trap ERR`
2. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —ç—Ç–∞–ø** –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
3. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª–Ω—ã–π –ª–æ–≥** –≤ `build_logs/build_YYYYMMDD_HHMMSS.log`
4. **–í—ã–≤–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–±–æ—Ä–∫–∏

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    ‚ùå –û–®–ò–ë–ö–ê –°–ë–û–†–ö–ò!                                      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

–≠—Ç–∞–ø: –®–∞–≥ 3: –ü–æ–¥–ø–∏—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–°—Ç—Ä–æ–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞: 785
–ö–æ–¥ –æ—à–∏–±–∫–∏: 1

–ü–æ–ª–Ω—ã–π –ª–æ–≥ —Å–±–æ—Ä–∫–∏: build_logs/build_20260108_143022.log

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–ü–û–°–õ–ï–î–ù–ò–ï 30 –°–¢–†–û–ö –õ–û–ì–ê:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[2026-01-08 14:30:20] >>> –≠–¢–ê–ü: –®–∞–≥ 3: –ü–æ–¥–ø–∏—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∏...
codesign --force --timestamp --options=runtime ...
error: The specified item could not be found in the keychain.
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

```
build_logs/
‚îú‚îÄ‚îÄ build_20260108_143022.log      # –ü–æ–ª–Ω—ã–π –ª–æ–≥ —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ preflight_20260108_143022.log  # –õ–æ–≥ preflight –ø—Ä–æ–≤–µ—Ä–æ–∫
‚îî‚îÄ‚îÄ ...
```

#### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —ç—Ç–∞–ø—ã

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:-----|:---------|
| PREFLIGHT –ü–†–û–í–ï–†–ö–ò | verify_imports.py, verify_pyinstaller.py |
| –®–∞–≥ 1 | –û—á–∏—Å—Ç–∫–∞ –∏ Universal 2 —Å–±–æ—Ä–∫–∞ |
| –®–∞–≥ 2 | –°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Å—Ç–æ–π –∫–æ–ø–∏–∏ |
| –®–∞–≥ 3 | –ü–æ–¥–ø–∏—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| –®–∞–≥ 4 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| –®–∞–≥ 5 | –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| –®–∞–≥ 6 | –°–æ–∑–¥–∞–Ω–∏–µ DMG |
| –®–∞–≥ 6.1 | –ü–æ–¥–ø–∏—Å—å DMG |
| –®–∞–≥ 7 | –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è DMG |
| –®–∞–≥ 8 | –°–æ–∑–¥–∞–Ω–∏–µ PKG |
| –®–∞–≥ 9 | –ù–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è PKG |
| –®–∞–≥ 10 | –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| –®–∞–≥ 11 | –ò—Ç–æ–≥–æ–≤–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ |

---

## üîß –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø –ü–†–û–í–ï–†–û–ö                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

  –®–ê–ì 1                  –®–ê–ì 2                  –®–ê–ì 3                  –®–ê–ì 4
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    ‚îÇ                      ‚îÇ                      ‚îÇ                      ‚îÇ
    ‚ñº                      ‚ñº                      ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇverify_  ‚îÇ          ‚îÇverify_  ‚îÇ          ‚îÇdiagnose ‚îÇ          ‚îÇpre_build‚îÇ
‚îÇimports  ‚îÇ   ‚îÄ‚îÄ‚îÄ‚ñ∂   ‚îÇpyinst.  ‚îÇ   ‚îÄ‚îÄ‚îÄ‚ñ∂   ‚îÇ.sh      ‚îÇ   ‚îÄ‚îÄ‚îÄ‚ñ∂   ‚îÇ_gate.sh ‚îÇ
‚îÇ.py      ‚îÇ          ‚îÇ.py      ‚îÇ          ‚îÇ         ‚îÇ          ‚îÇ(update) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ                      ‚îÇ                      ‚îÇ                      ‚îÇ
    ‚îÇ ~5 —Å–µ–∫              ‚îÇ ~3 —Å–µ–∫              ‚îÇ ~30 —Å–µ–∫             ‚îÇ ~2-5 –º–∏–Ω
    ‚îÇ                      ‚îÇ                      ‚îÇ                      ‚îÇ
    ‚ñº                      ‚ñº                      ‚ñº                      ‚ñº
  [–¢–ï–°–¢]               [–¢–ï–°–¢]               [–¢–ï–°–¢]               [–¢–ï–°–¢]
```

---

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `main.py`

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå main.py: SyntaxError: invalid syntax
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `main.py` –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python3 -m py_compile main.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
3. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–Ω–æ–≤–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `hiddenimports`

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ hiddenimports: integration.integrations.xxx_integration
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `packaging/Nexy.spec`
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é `hiddenimports=[]`
3. –î–æ–±–∞–≤—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é: `"integration.integrations.xxx_integration"`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–Ω–æ–≤–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ—Å—É—Ä—Å –≤ `datas`

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ—Å—É—Ä—Å –≤ datas: config -> config
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `packaging/Nexy.spec`
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é `datas=[]`
3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ—Ä—Ç–µ–∂: `(str(client_dir / "config"), "config")`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–Ω–æ–≤–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª—é—á –≤ `Info.plist`

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª—é—á –≤ info_plist: NSMicrophoneUsageDescription
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `packaging/Nexy.spec`
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é `info_plist={}`
3. –î–æ–±–∞–≤—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –∫–ª—é—á —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–Ω–æ–≤–∞

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

### ‚úÖ `verify_imports.py`
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö .py —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö 21 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–º–ø–æ—Ä—Ç PyObjC –º–æ–¥—É–ª–µ–π
- [ ] Exit code 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –ø—É—Ç—è–º–∏ —Ñ–∞–π–ª–æ–≤

### ‚úÖ `verify_pyinstaller.py`
- [ ] –ü–∞—Ä—Å–∏—Ç `Nexy.spec`
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `hiddenimports` –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `datas` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `runtime_hooks`
- [ ] Exit code 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### ‚úÖ `diagnose.sh`
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ–ø—Ü–∏—è–º–∏ `--logs`, `--analyze`, `--cold`, `--all`
- [ ] –í—ã–∑—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ü–æ–Ω—è—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚úÖ `pre_build_gate.sh` (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π)
- [ ] –í—ã–∑—ã–≤–∞–µ—Ç `verify_imports.py` –ø–µ—Ä–≤—ã–º
- [ ] –í—ã–∑—ã–≤–∞–µ—Ç `check_dependencies.py`
- [ ] –í—ã–∑—ã–≤–∞–µ—Ç `verify_pyinstaller.py`
- [ ] –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –°—Ü–µ–Ω–∞—Ä–∏–π | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|---------------------|
| –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã | Exit 0, –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ PASSED |
| –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `main.py` | Exit 1, —É–∫–∞–∑–∞–Ω —Ñ–∞–π–ª –∏ —Å—Ç—Ä–æ–∫–∞ |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥—É–ª—å –≤ `hiddenimports` | Exit 1, —Å–ø–∏—Å–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ—Å—É—Ä—Å –≤ `datas` | Exit 1, –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É |

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç verify_imports.py
python3 scripts/verify_imports.py

# –¢–µ—Å—Ç verify_pyinstaller.py  
python3 scripts/verify_pyinstaller.py

# –¢–µ—Å—Ç diagnose.sh
./scripts/diagnose.sh --all

# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω
./scripts/pre_build_gate.sh
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `Docs/PREFLIGHT_IMPLEMENTATION_PLAN.md` ‚Äî –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã
- `scripts/pre_build_gate.sh` ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫
- `packaging/Nexy.spec` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PyInstaller
- `Docs/PACKAGING_FINAL_GUIDE.md` ‚Äî –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ø–∞–∫–æ–≤–∫–µ

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

| –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| 2026-01-08 | –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ |

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º** ‚Äî —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--quick` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏** ‚Äî –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--all` –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** ‚Äî –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –≤ CI/CD** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π

---

## ‚ùì FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏?**  
A: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–∞, –Ω–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∏ –º–æ–≥—É—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å —á–∞—Å—ã –Ω–∞ –æ—Ç–ª–∞–¥–∫–µ.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–¥–∞–µ—Ç –≤ CI?**  
A: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ —Å `--verbose` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏.

**Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É?**  
A: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –≤ `scripts/` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤—ã–∑–æ–≤ –≤ `pre_build_gate.sh` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å–µ–∫—Ü–∏—é.

---

**–ê–≤—Ç–æ—Ä:** Cursor Assistant  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-08  
**–í–µ—Ä—Å–∏—è:** 1.0
