# MCP Server –¥–ª—è Messages –Ω–∞ macOS

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Python, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Messages –Ω–∞ macOS: –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã, —á–∏—Ç–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 1. [ANALYSIS.md](./ANALYSIS.md) - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–µ—à–µ–Ω–∏—è —Å –æ—Ü–µ–Ω–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö —Ä–µ—à–µ–Ω–∏—è
- –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 2. [ARCHITECTURE.md](./ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã
- –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ JSON-RPC 2.0
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Messages
- –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤

### 3. [SCHEMA.md](./SCHEMA.md) - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã
- –î–∏–∞–≥—Ä–∞–º–º—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ª–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤

### 4. [QUICK_START.md](./QUICK_START.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å
- –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤

## üéØ –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å

**–î–∞, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä –Ω–∞ Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Messages –Ω–∞ macOS!**

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å:
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ –ß–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ iMessage –∏–ª–∏ SMS

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- macOS 11+
- Python 3.10+
- Full Disk Access (–¥–ª—è —á—Ç–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Messages.app (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)

## üìê –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã (–∫—Ä–∞—Ç–∫–æ)

```
MCP Client (Claude/Cursor)
        ‚îÇ
        ‚îÇ JSON-RPC 2.0 (stdio)
        ‚îÇ
        ‚ñº
MCP Server (Python)
        ‚îÇ
        ‚îú‚îÄ‚îÄ> SQLite (chat.db) - –¥–ª—è —á—Ç–µ–Ω–∏—è
        ‚îî‚îÄ‚îÄ> AppleScript (Messages.app) - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
```

## üì® –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ (–ø—Ä–∏–º–µ—Ä)

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "find_contact",
    "arguments": {
      "query": "John"
    }
  }
}
```

## üì® –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (–ø—Ä–∏–º–µ—Ä)

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "Found 1 contact:\n\nJohn Doe\nPhone: +1 (555) 123-4567"
      }
    ]
  }
}
```

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 1. `find_contact` - –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞
–ù–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞, email –∏–ª–∏ –∏–º–µ–Ω–∏.

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
- `query` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, email –∏–ª–∏ –∏–º—è –¥–ª—è –ø–æ–∏—Å–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```json
// –ü–æ –Ω–æ–º–µ—Ä—É
{
  "name": "find_contact",
  "arguments": {"query": "+14388554334"}
}

// –ü–æ –∏–º–µ–Ω–∏
{
  "name": "find_contact",
  "arguments": {"query": "Sophia"}
}
```

### 2. `read_messages` - –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π ‚≠ê (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
–ß–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, –Ω–æ–º–µ—Ä—É –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
- `contact` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, email –∏–ª–∏ "last" –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `limit` (integer, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10, –º–∞–∫—Å–∏–º—É–º 50) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä—ã:**
```json
// –ü–æ –∏–º–µ–Ω–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±)
{
  "name": "read_messages",
  "arguments": {
    "contact": "Sophia",
    "limit": 5
  }
}

// –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
{
  "name": "read_messages",
  "arguments": {
    "contact": "last",
    "limit": 1
  }
}
```

### 3. `send_message` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è ‚≠ê (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—É. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, –Ω–æ–º–µ—Ä—É –∏–ª–∏ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞.

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
- `contact` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ email
- `message` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `phone_number` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ (–µ—Å–ª–∏ —É –∫–æ–Ω—Ç–∞–∫—Ç–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä–æ–≤)

**–ü—Ä–∏–º–µ—Ä—ã:**
```json
// –ü–æ –∏–º–µ–Ω–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±)
{
  "name": "send_message",
  "arguments": {
    "contact": "Sophia",
    "message": "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
  }
}

// –° —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–æ–º–µ—Ä–∞
{
  "name": "send_message",
  "arguments": {
    "contact": "Sophia",
    "message": "–ü—Ä–∏–≤–µ—Ç!",
    "phone_number": "+14388554334"
  }
}
- `message` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "name": "send_message",
  "arguments": {
    "recipient": "+1 (555) 123-4567",
    "message": "Hello!"
  }
}
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

Messages —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ SQLite –±–∞–∑–µ: `~/Library/Messages/chat.db`

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `handle` - –ö–æ–Ω—Ç–∞–∫—Ç—ã (–Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤, email)
- `chat` - –ß–∞—Ç—ã
- `message` - –°–æ–æ–±—â–µ–Ω–∏—è
- `chat_handle_join` - –°–≤—è–∑—å —á–∞—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- `chat_message_join` - –°–≤—è–∑—å —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [ARCHITECTURE.md](./ARCHITECTURE.md)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - –ù–∞—á–Ω–∏—Ç–µ —Å [QUICK_START.md](./QUICK_START.md) –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤
   - –ò–∑—É—á–∏—Ç–µ [ARCHITECTURE.md](./ARCHITECTURE.md) –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [SCHEMA.md](./SCHEMA.md) –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

2. **–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
   - –°–º. [ANALYSIS.md](./ANALYSIS.md) –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –í–∞—Ä–∏–∞–Ω—Ç 2 (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)

3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (MCP SDK, SQLite)
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è macOS

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç JSON-RPC 2.0
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: stdio (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞)
- –¢—Ä–µ–±—É–µ—Ç—Å—è Full Disk Access –¥–ª—è —á—Ç–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Messages.app –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [MCP –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://modelcontextprotocol.io/)
- [JSON-RPC 2.0 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](https://www.jsonrpc.org/specification)
- [SQLite –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.sqlite.org/docs.html)
- [AppleScript –¥–ª—è Messages](https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptLangGuide/)

---

**–°—Ç–∞—Ç—É—Å:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞. –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏! üéâ


