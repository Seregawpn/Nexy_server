# =====================================================
# КОНФИГУРАЦИЯ ГОЛОСОВОГО АССИСТАНТА - ПРИМЕР
# =====================================================
# Скопируйте этот файл в config.env и заполните реальными значениями
# НЕ КОММИТЬТЕ config.env с реальными секретами!

# =====================================================
# ОКРУЖЕНИЕ
# =====================================================
NEXY_ENV=prod
# Варианты: dev, prod, test

# =====================================================
# GEMINI API (Text Processing & Memory)
# =====================================================
GEMINI_API_KEY=YOUR_GEMINI_API_KEY_HERE

# LangChain настройки (единственный поддерживаемый провайдер)
LANGCHAIN_MODEL=gemini-3-flash-preview

# Общие настройки text processing
# Поддерживаются старые переменные GEMINI_LIVE_* для обратной совместимости
TEXT_PROCESSING_TEMPERATURE=0.7
TEXT_PROCESSING_MAX_TOKENS=2048
TEXT_PROCESSING_TOOLS=google_search

# Опционально: переопределить system prompt
# GEMINI_SYSTEM_PROMPT=

# =====================================================
# MCP ACTION FORWARDING (close_app/open_app)
# =====================================================
# ⚠️  ВАЖНО: По умолчанию выключено для безопасности
# Включите осознанно только в production/staging после проверки готовности
# CRITICAL: Must be true for close_app/open_app to work
# ⚠️  НЕ включайте в dev/локальном окружении без необходимости
FORWARD_ASSISTANT_ACTIONS=false
# CRITICAL: Must be false for close_app/open_app to work
# If set to true, command forwarding will be disabled immediately
NEXY_KS_DISABLE_FORWARD_ASSISTANT_ACTIONS=false

# =====================================================
# AZURE SPEECH TTS (Audio Generation)
# =====================================================
AZURE_SPEECH_KEY=YOUR_AZURE_SPEECH_KEY_HERE
AZURE_SPEECH_REGION=canadacentral
AZURE_VOICE_NAME=en-US-AriaNeural
AZURE_VOICE_STYLE=friendly
AZURE_SPEECH_RATE=1.0
AZURE_SPEECH_PITCH=1.0
AZURE_SPEECH_VOLUME=1.0
AZURE_AUDIO_FORMAT=riff-48khz-16bit-mono-pcm

# =====================================================
# gRPC SERVER
# =====================================================
# For prod/stage укажите AUTO (или оставьте значение) чтобы использовать 127.0.0.1, для dev можно задать 0.0.0.0
GRPC_HOST=auto
GRPC_PORT=50051
MAX_WORKERS=100
USE_TLS=false

# =====================================================
# HTTP HEALTH/STATUS SERVER
# =====================================================
HTTP_HOST=auto
HTTP_PORT=8080

# =====================================================
# SERVER VERSION (Единый источник истины для всех версий)
# =====================================================
SERVER_VERSION=1.6.0.43
SERVER_BUILD=1.6.0.43
SERVER_CHANNEL=stable

# =====================================================
# UPDATE SERVER
# =====================================================
UPDATE_PORT=8081
UPDATE_HOST=auto
UPDATE_ENABLED=true
UPDATE_CORS=true
UPDATE_REQUIRE_HTTPS=false
UPDATE_VERIFY_SIGNATURES=true
UPDATE_LOG_REQUESTS=true
UPDATE_LOG_DOWNLOADS=true

# =====================================================
# POSTGRESQL DATABASE
# =====================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=voice_assistant_db
DB_USER=YOUR_DB_USER_HERE
DB_PASSWORD=YOUR_DB_PASSWORD_HERE

# =====================================================
# AUDIO SETTINGS
# =====================================================
# Default: 48000 (48kHz) - синхронизировано с клиентом
# Supported: 8000, 16000, 22050, 24000, 44100, 48000
SAMPLE_RATE=48000
CHUNK_SIZE=1024
AUDIO_FORMAT=int16
AUDIO_CHANNELS=1
AUDIO_BITS_PER_SAMPLE=16
STREAMING_CHUNK_SIZE=4096
STREAMING_ENABLED=true

# =====================================================
# IMAGE SETTINGS (Text Processing)
# =====================================================
IMAGE_FORMAT=webp
IMAGE_MIME_TYPE=image/webp
IMAGE_MAX_SIZE=10485760

# =====================================================
# SESSION MANAGEMENT
# =====================================================
MAX_SESSIONS=200
SESSION_TIMEOUT=3600
HARDWARE_ID_LENGTH=32

# =====================================================
# INTERRUPT HANDLING
# =====================================================
GLOBAL_INTERRUPT_ENABLED=true
INTERRUPT_CHECK_INTERVAL=0.1
INTERRUPT_TIMEOUT=5.0
GLOBAL_INTERRUPT_TIMEOUT=300
SESSION_INTERRUPT_TIMEOUT=60
MAX_ACTIVE_SESSIONS=100
SESSION_CLEANUP_DELAY=2.0

# =====================================================
# MEMORY MANAGEMENT
# =====================================================
MAX_SHORT_TERM_MEMORY_SIZE=51200
MAX_LONG_TERM_MEMORY_SIZE=102400
MEMORY_TIMEOUT=2.0
ANALYSIS_TIMEOUT=5.0
MEMORY_ANALYSIS_MODEL=gemini-2.5-flash-lite
MEMORY_ANALYSIS_TEMPERATURE=0.3

# =====================================================
# TEXT PROCESSING
# =====================================================
FALLBACK_TIMEOUT=30
CIRCUIT_BREAKER_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=300
MAX_CONCURRENT_REQUESTS=50
REQUEST_TIMEOUT=60

# =====================================================
# TEXT FILTERING
# =====================================================
TEXT_CLEANING_ENABLED=true
CONTENT_FILTERING_ENABLED=true
MAX_TEXT_LENGTH=10000
MIN_TEXT_LENGTH=1

# =====================================================
# LOGGING
# =====================================================
LOG_LEVEL=INFO
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_FILE=server.log
LOG_MAX_FILE_SIZE=10485760
LOG_BACKUP_COUNT=5

# =====================================================
# PERFORMANCE - Масштабирование для 100 пользователей
# =====================================================
MAX_SENTENCE_LENGTH=200
MAX_REQUESTS_PER_MINUTE=1000
MAX_REQUESTS_PER_USER=10
MAX_MEMORY_USAGE=80

# =====================================================
# GITHUB (для системы обновлений)
# =====================================================
# GITHUB_TOKEN=YOUR_GITHUB_TOKEN_HERE
# GITHUB_REPO=Seregawpn/Nexy_production
# GITHUB_RELEASE_TAG=Update
