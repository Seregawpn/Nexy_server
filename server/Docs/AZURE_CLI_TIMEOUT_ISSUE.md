# ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð·Ð°Ð²Ð¸ÑÐ°Ð½Ð¸ÐµÐ¼ ÐºÐ¾Ð¼Ð°Ð½Ð´ Azure CLI

**Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ:** 2 Ð¾ÐºÑ‚ÑÐ±Ñ€Ñ 2025  
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** âœ… ÐÐºÑ‚Ð¸Ð²Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ

---

## ðŸ“‹ **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°**

ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Azure CLI `az vm run-command invoke` Ð½Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐ°ÑŽÑ‚ÑÑ Ð¸Ð»Ð¸ Ð·Ð°Ð²Ð¸ÑÐ°ÑŽÑ‚.

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹:**
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð¾Ð»Ð³Ð¾ (Ð±Ð¾Ð»ÐµÐµ 5-10 Ð¼Ð¸Ð½ÑƒÑ‚)
- ÐžÑˆÐ¸Ð±ÐºÐ°: `ERROR: (Conflict) Run command extension execution is in progress`
- ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ñ Ð½Ðµ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹

---

## ðŸ” **ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ñ‹**

### **1. Ð”Ð¾Ð»Ð³Ð¸Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð² ÑÐºÑ€Ð¸Ð¿Ñ‚Ðµ**
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ `sleep` Ð¸Ð»Ð¸ Ð´Ð¾Ð»Ð³Ð¸Ð¼Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑÐ¼Ð¸
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¶Ð´ÑƒÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð±ÐµÐ· Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ð¾Ð²

### **2. ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¶Ð´ÑƒÑ‚ Ð²Ð²Ð¾Ð´Ð°**
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹, Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‰Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð±ÐµÐ· Ñ„Ð»Ð°Ð³Ð¾Ð² `--yes` Ð¸Ð»Ð¸ `-y`
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¶Ð´ÑƒÑ‚ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ

### **3. ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ð¾Ð¼ Azure CLI**
- Azure CLI Ð¸Ð¼ÐµÐµÑ‚ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´ (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ 90 ÑÐµÐºÑƒÐ½Ð´)
- Ð•ÑÐ»Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð´Ð¾Ð»ÑŒÑˆÐµ, Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð·Ð°Ð²Ð¸ÑÐ½ÑƒÑ‚ÑŒ
- ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ ÐºÐµÑˆÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Azure CLI

### **4. Ð¤Ð¾Ð½Ð¾Ð²Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹**
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ Ñ„Ð¾Ð½Ð¾Ð²Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹
- ÐŸÑ€Ð¾Ñ†ÐµÑÑÑ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐ°ÑŽÑ‚ÑÑ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾
- ÐŸÑ€Ð¾Ñ†ÐµÑÑÑ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑŽÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

---

## ðŸ”§ **Ð ÐµÑˆÐµÐ½Ð¸Ñ**

### **Ð ÐµÑˆÐµÐ½Ð¸Ðµ 1: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹**

**âŒ ÐŸÐ»Ð¾Ñ…Ð¾:**
```bash
az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "
    echo '1'
    sleep 5
    echo '2'
    sleep 5
    echo '3'
  "
```

**âœ… Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾:**
```bash
# Ð Ð°Ð·Ð±Ð¸Ñ‚ÑŒ Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´
az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "echo '1'"

az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "echo '2'"
```

---

### **Ð ÐµÑˆÐµÐ½Ð¸Ðµ 2: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ñ‹**

**âŒ ÐŸÐ»Ð¾Ñ…Ð¾:**
```bash
--scripts "curl http://example.com"
```

**âœ… Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾:**
```bash
--scripts "timeout 10 curl http://example.com || echo 'Timeout'"
```

---

### **Ð ÐµÑˆÐµÐ½Ð¸Ðµ 3: Ð—Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð² Ñ„Ð¾Ð½Ðµ Ñ Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼**

**âŒ ÐŸÐ»Ð¾Ñ…Ð¾:**
```bash
--scripts "python long_script.py"
```

**âœ… Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾:**
```bash
--scripts "nohup python long_script.py > /tmp/script.log 2>&1 & echo 'Started'"
```

---

### **Ð ÐµÑˆÐµÐ½Ð¸Ðµ 4: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ SSH Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ**

Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿:
```bash
ssh azureuser@20.151.51.172
# Ð—Ð°Ñ‚ÐµÐ¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ
sudo systemctl restart voice-assistant.service
```

---

### **Ð ÐµÑˆÐµÐ½Ð¸Ðµ 5: Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ**

**Ð¨Ð°Ð³ 1: Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€**
```bash
az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "cat > /home/azureuser/fix_502.sh << 'SCRIPT'
#!/bin/bash
# ... ÑÐºÑ€Ð¸Ð¿Ñ‚ ...
SCRIPT
chmod +x /home/azureuser/fix_502.sh
"
```

**Ð¨Ð°Ð³ 2: Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ð¾Ð·Ð¶Ðµ**
```bash
az vm run-command invoke \
  --resource-group Nexy \
  --name nexy-regular \
  --command-id RunShellScript \
  --scripts "bash /home/azureuser/fix_502.sh"
```

---

## ðŸš¨ **ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹**

### **âŒ ÐÐ• Ð”Ð•Ð›ÐÐ™Ð¢Ð•:**
- âŒ ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾Ð¼ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
- âŒ ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `sleep` Ð±ÐµÐ· Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸
- âŒ ÐÐµ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ð¹Ñ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
- âŒ ÐÐµ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ð¹Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð±ÐµÐ· Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ð¾Ð²

### **âœ… ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐž:**
- âœ… Ð Ð°Ð·Ð±Ð¸Ð²Ð°Ð¹Ñ‚Ðµ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð½Ð° ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ
- âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ñ‹ Ð´Ð»Ñ ÑÐµÑ‚ÐµÐ²Ñ‹Ñ… Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
- âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ„Ð»Ð°Ð³Ð¸ `--yes` Ð¸Ð»Ð¸ `-y` Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´
- âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹

