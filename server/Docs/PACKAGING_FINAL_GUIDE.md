# PACKAGING FINAL GUIDE ‚Äî –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É–ø–∞–∫–æ–≤–∫–µ, –ø–æ–¥–ø–∏—Å–∏ –∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ Nexy

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2.10.2025

–¶–µ–ª—å: –µ–¥–∏–Ω–∞—è, —Ç–æ—á–Ω–∞—è –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è. –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–±–æ—Ä–∫—É, –ø–æ–¥–ø–∏—Å—å, –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é, —Å–æ–∑–¥–∞–Ω–∏–µ DMG –∏ PKG (—Å—Ç—Ä–æ–≥–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ /Applications) –∏ –æ—Å—Ç–∞–≤–∏—Ç –≤ dist/ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.

## üöÄ **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–´–ú –ü–õ–ê–ù–û–ú**

–≠—Ç–æ—Ç –≥–∞–π–¥ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é **–ü–û–¢–û–ö–ê 1** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ —É–ø–∞–∫–æ–≤–∫–∏ –∏ –¥–µ–ø–ª–æ—è:
- **–ü–û–¢–û–ö 1:** –£–ø–∞–∫–æ–≤–∫–∞ PKG/DMG (2-3 —á–∞—Å–∞) - –ø–æ–¥–ø–∏—Å—å + –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è ‚Üê **–≠–¢–û–¢ –ì–ê–ô–î**
- **–ü–û–¢–û–ö 2:** –î–µ–ø–ª–æ–π —Å–µ—Ä–≤–µ—Ä–∞ (1-2 —á–∞—Å–∞) - Azure VM + gRPC + AppCast ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**
- **–ü–û–¢–û–ö 3:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (30 –º–∏–Ω) - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–∫–∏

**–≠–ö–û–ù–û–ú–ò–Ø –í–†–ï–ú–ï–ù–ò:** 1-2 —á–∞—Å–∞ –∑–∞ —Å—á–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤.

## ‚úÖ **–ù–û–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø (–û–ö–¢–Ø–ë–†–¨ 2025)**

### **–ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï –î–û 100 –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô:**
- ‚úÖ **gRPC —Å–µ—Ä–≤–µ—Ä:** –£–≤–µ–ª–∏—á–µ–Ω—ã –ª–∏–º–∏—Ç—ã —Å 10 –¥–æ 100 –≤–æ—Ä–∫–µ—Ä–æ–≤
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **Connection pooling:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è 100 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ **–ü–∞–º—è—Ç—å:** –£–≤–µ–ª–∏—á–µ–Ω—ã –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏ –≤ 5-10 —Ä–∞–∑

### **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ú–û–î–£–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:**
- ‚úÖ **gRPC —Ñ–∞–π–ª—ã:** –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–∑ –∫–æ—Ä–Ω—è –≤ `modules/grpc_service/`
- ‚úÖ **Protobuf:** –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **–ò–º–ø–æ—Ä—Ç—ã:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

### **–°–ò–°–¢–ï–ú–ê –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê:**
- ‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, RPS, –æ—à–∏–±–æ–∫
- ‚úÖ **–ê–ª–µ—Ä—Ç—ã:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU, –ø–∞–º—è—Ç–∏, –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞

### **AZURE VM –ò –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô:**
- ‚úÖ **–°–µ—Ä–≤–µ—Ä:** –†–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Azure VM (20.151.51.172)
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –°—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–æ–∫
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:** GitHub Actions + —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ò –ù–Æ–ê–ù–°–´

### –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- **PyInstaller —Å–±–æ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5-15 –º–∏–Ω—É—Ç** –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (scipy, numpy, grpcio, PyObjC)
- **–ù–ï –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ scipy –º–æ–¥—É–ª—è—Ö** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, PyInstaller –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö

### Extended Attributes (–ö–†–ò–¢–ò–ß–ù–û!)
- **macOS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç extended attributes** –ø—Ä–∏ –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å —Ñ–∞–π–ª–∞–º–∏
- **–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É** –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏** - —ç—Ç–æ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ PKG/DMG
- **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã (PKG/DMG) –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã** –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ Apple

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **PyInstaller —Ä–µ–∂–∏–º**: onedir (–Ω–µ onefile) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —É–ø–∞–∫–æ–≤–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: arm64 –¥–ª—è Apple Silicon, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- **Python –≤–µ—Ä—Å–∏—è**: 3.11+ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ), —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å 3.9+
- **–†–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: ~121 –ú–ë (–≤–∫–ª—é—á–∞—è –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- **–í—Ä–µ–º—è –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏**: 2-5 –º–∏–Ω—É—Ç –Ω–∞ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª (app, DMG, PKG)
- **–ü–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∏**: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ Mach-O ‚Üí –≤–µ—Å—å .app ‚Üí PKG

### –£–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: scipy, numpy, grpcio, PyObjC —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏, speech_recognition, pydub
- **–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã**: ffmpeg (arm64), –≤—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ macOS
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: unified_config.yaml, –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–†–µ—Å—É—Ä—Å—ã**: –∏–∫–æ–Ω–∫–∏, –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã, –ª–æ–≥–æ—Ç–∏–ø—ã
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –º–∏–∫—Ä–æ—Ñ–æ–Ω, –∑–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞, VoiceOver, —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–†–∞–∑–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞**: 127 –ú–ë (–≤–∫–ª—é—á–∞—è –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

‚Äî

1) –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Xcode: `xcode-select --install`
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python –≤–µ—Ä—Å–∏—é**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 3.11+ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ 3.11+)
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**: arm64 –¥–ª—è Apple Silicon, x86_64 –¥–ª—è Intel
- **–ö–†–ò–¢–ò–ß–ù–û: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ Keychain:**
  - Developer ID Application (–¥–ª—è –ø–æ–¥–ø–∏—Å–∏ .app)
  - Developer ID Installer (–¥–ª—è –ø–æ–¥–ø–∏—Å–∏ PKG)
- **–ö–†–ò–¢–ò–ß–ù–û: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ Apple:**
  - `xcrun notarytool store-credentials nexy-notary --apple-id seregawpn@gmail.com --team-id 5NKLL2CLB9 --password <APP_SPECIFIC_PASSWORD>`
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ ffmpeg**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `resources/ffmpeg/ffmpeg` –∏ –∏–º–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

2) –ï–¥–∏–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —É–ø–∞–∫–æ–≤–∫–∏
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞: `./packaging/build_final.sh`
- **‚ö†Ô∏è –ù–ï –ü–†–ï–†–´–í–ê–ô–¢–ï –ü–†–û–¶–ï–°–°** - —Å–±–æ—Ä–∫–∞ PyInstaller –∑–∞–Ω–∏–º–∞–µ—Ç 5-15 –º–∏–Ω—É—Ç
- –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç:
  - —Å–±–æ—Ä–∫—É .app —á–µ—Ä–µ–∑ PyInstaller (–¥–æ–ª–≥–∏–π —ç—Ç–∞–ø - –∂–¥–∏—Ç–µ!);
  - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É extended attributes –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ;
  - –ø–æ–¥–ø–∏—Å—å –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö Mach‚ÄëO –∏ –≤—Å–µ–≥–æ .app (Hardened Runtime + entitlements);
  - –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é .app –∏ stapler;
  - —Å–æ–∑–¥–∞–Ω–∏–µ DMG (drag‚Äëand‚Äëdrop);
  - —Å–æ–∑–¥–∞–Ω–∏–µ component PKG —Å install-location `/Applications`;
  - —Å–±–æ—Ä–∫—É distribution PKG (–¥–æ–º–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∏: —Ç–æ–ª—å–∫–æ system);
  - –ø–æ–¥–ø–∏—Å—å PKG (Developer ID Installer) –∏ –Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—é PKG;
  - —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—á–∏—Å—Ç–∫—É –º—É—Å–æ—Ä–∞.

3) –†–µ–∑—É–ª—å—Ç–∞—Ç
- –í `dist/` –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –¥–≤–∞ —Ñ–∞–π–ª–∞:
- `Nexy.pkg` (127 –ú–ë) ‚Äî –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π –∏ –ø—Ä–æ–Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –≤ `/Applications`
- `Nexy.dmg` (127 –ú–ë) ‚Äî –æ–±—Ä–∞–∑ –¥–ª—è drag-and-drop —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- **–†–∞–∑–º–µ—Ä—ã —É–∫–∞–∑–∞–Ω—ã –¥–ª—è arm64 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** (Apple Silicon)

4) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PKG (—Å—Ç—Ä–æ–≥–æ /Applications)
- –û—á–∏—Å—Ç–∏—Ç–µ –ø—Ä–µ–∂–Ω–∏–µ —Å–ª–µ–¥—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:
  - `sudo pkgutil --forget com.nexy.assistant.pkg || true`
  - `rm -rf ~/Applications/Nexy.app /Applications/Nexy.app`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
- GUI: –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ `dist/Nexy.pkg`
- CLI: `sudo installer -pkg dist/Nexy.pkg -target /`
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `ls -la /Applications/Nexy.app`

5) –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –∏ –ø–µ—á–∞—Ç–µ–π
- PKG:
  - `pkgutil --check-signature dist/Nexy.pkg`
  - `xcrun stapler validate dist/Nexy.pkg`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ):
  - `codesign --verify --deep --strict --verbose=2 /Applications/Nexy.app`

6) –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—É–∂–µ —É—á—Ç–µ–Ω—ã)
- PKG: `--install-location /Applications`
- distribution.xml: `<domains enable_localSystem="true" enable_currentUserHome="false"/>`
- PKG –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º Developer ID Installer
- Hardened Runtime + `com.apple.security.cs.disable-library-validation`
- –ü–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∏: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ Mach‚ÄëO ‚Üí –≤–µ—Å—å .app
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `ditto --noextattr --noqtn` + `xattr -cr`
- –í PyInstaller –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `exclude_binaries=True`
- VoiceOver —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: –≤–∫–ª—é—á–µ–Ω—ã –≤ entitlements.plist –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VoiceOver

7) –°–±—Ä–æ—Å TCC (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
- `./packaging/reset_permissions.sh` ‚Äî —Å–±—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–º–∏–∫—Ä–æ—Ñ–æ–Ω, —ç–∫—Ä–∞–Ω, VoiceOver –∏ —Ç.–¥.)

8) –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ö—É–¥–∞ —Å—Ç–∞–≤–∏—Ç PKG:
  - `pkgutil --expand dist/Nexy.pkg /tmp/nexy_check`
  - `grep -R "install-location" /tmp/nexy_check` ‚Üí `/Applications`
- –î–æ–º–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
  - `packaging/distribution.xml` ‚Üí `<domains enable_localSystem="true" enable_currentUserHome="false"/>`

9) –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- **¬´resource fork, Finder information, or similar detritus not allowed¬ª** ‚Üí —Å–∫—Ä–∏–ø—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É, –Ω–æ macOS –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã —Å–Ω–æ–≤–∞
- **¬´Failed to load Python shared library¬ª** ‚Üí –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `exclude_binaries=True` –≤ PyInstaller
- **¬´nested code is not signed at all¬ª** ‚Üí –ø–æ–¥–ø–∏—à–∏—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ Mach‚ÄëO –¥–æ –ø–æ–¥–ø–∏—Å–∏ –±–∞–Ω–¥–ª–∞ (—É–∂–µ –≤ —Å–∫—Ä–∏–ø—Ç–µ)
- **PKG ¬´no signature¬ª** ‚Üí –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ PKG —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º Developer ID Installer (—É–∂–µ –≤ —Å–∫—Ä–∏–ø—Ç–µ)
- **PyInstaller –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ scipy** ‚Üí —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∂–¥–∏—Ç–µ 5-15 –º–∏–Ω—É—Ç
- **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ extended attributes** ‚Üí —ç—Ç–æ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ PKG/DMG
- **spctl –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç** ‚Üí –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–ø—Ä–æ–Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ PKG/DMG –ø—Ä–æ–Ω–æ—Ç–∞—Ä–∏–∑–æ–≤–∞–Ω—ã

‚Äî

–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É—Å–ø–µ—Ö–∞
- [ ] `./packaging/build_final.sh` –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í `dist/` —Ç–æ–ª—å–∫–æ `Nexy.pkg` –∏ `Nexy.dmg` (–ø–ª—é—Å –≤—Ä–µ–º–µ–Ω–Ω—ã–π `Nexy` —Ñ–∞–π–ª)
- [ ] `pkgutil --check-signature dist/Nexy.pkg` ‚Äî OK
- [ ] `xcrun stapler validate dist/Nexy.pkg` ‚Äî OK
- [ ] `xcrun stapler validate dist/Nexy.dmg` ‚Äî OK
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ PKG –ø–æ–º–µ—â–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `/Applications/Nexy.app`
- [ ] **–†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤**: PKG ~127 –ú–ë, DMG ~127 –ú–ë (–¥–ª—è arm64)

## üìã –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ PKG
```bash
# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å PKG –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
pkgutil --expand dist/Nexy.pkg /tmp/nexy_check
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å install-location
grep -R "install-location" /tmp/nexy_check
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: install-location="/"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É ffmpeg
file resources/ffmpeg/ffmpeg
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: Mach-O 64-bit executable arm64 (–¥–ª—è Apple Silicon)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Python –ø–∞–∫–µ—Ç—ã
pip3 list | grep -E "(grpcio|PyAudio|sounddevice|Pillow|mss|numpy|pydub|scipy|rich|pynput|urllib3|pynacl|PyYAML|rumps|aiohttp|psutil|pyobjc)"
```

–≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É–ø–∞–∫–æ–≤–∫–µ Nexy.

---

## üöÄ **–°–ò–°–¢–ï–ú–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ß–ï–†–ï–ó GITHUB**

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è PKG/DMG —Ñ–∞–π–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ GitHub:

### **üìã –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. **–£–ø–∞–∫–æ–≤–∫–∞** ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ DMG —Ñ–∞–π–ª–∞ (—ç—Ç–æ—Ç –≥–∞–π–¥)
2. **–î–µ–ø–ª–æ–π** ‚Üí `scripts/deploy.sh Nexy.dmg`
3. **GitHub Release** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ —Å —Ç–µ–≥–æ–º `Update`
4. **Azure —Å–µ—Ä–≤–µ—Ä** ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∏ AppCast XML
5. **–ö–ª–∏–µ–Ω—Ç—ã** ‚Üí –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ GitHub CDN

### **üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è:**
- ‚úÖ **GitHub CLI** (`brew install gh && gh auth login`)
- ‚úÖ **Azure CLI** (`brew install azure-cli && az login`)
- ‚úÖ **DMG —Ñ–∞–π–ª** –≥–æ—Ç–æ–≤ –∫ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é `Seregawpn/Nexy_production`

### **üöÄ –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è:**
```bash
cd scripts/
./deploy.sh ../Nexy.dmg
```

### **üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **GitHub —Ä–µ–ª–∏–∑** —Å–æ–∑–¥–∞–Ω —Å —Ç–µ–≥–æ–º `Update`
- ‚úÖ **DMG —Ñ–∞–π–ª** –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ GitHub CDN
- ‚úÖ **Azure —Å–µ—Ä–≤–µ—Ä** –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤–æ–π —Å—Å—ã–ª–∫–æ–π
- ‚úÖ **AppCast XML** –æ–±–Ω–æ–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–ö–ª–∏–µ–Ω—Ç—ã** –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ GitHub CDN

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `Docs/GITHUB_UPDATE_SYSTEM.md`
