$schema: "https://json-schema.org/draft/2020-12/schema"
$title: Nexy Change Impact Schema
$type: object
required: [axes, invariants, guards, test_plan, metrics, rollout]
properties:
  axes:
    type: array
    items:
      type: object
      required: [name, values]
      properties:
        name: { type: string }
        values: { type: array, items: { type: string } }
  invariants:
    type: array
    items: { type: string }
  guards:
    type: array
    items:
      type: object
      required: [domain, condition, decision]
      properties:
        domain: { type: string }
        condition: { type: string }
        decision: { type: string }
  test_plan:
    type: object
    required: [pairwise_min, negatives]
    properties:
      pairwise_min: { type: integer, minimum: 8 }
      negatives: { type: integer, minimum: 2 }
  metrics:
    type: array
    items: { type: string }
  rollout:
    type: object
    required: [flag, stages]
    properties:
      flag: { type: string }
      stages:
        type: array
        items: { type: string }
      kill_switch: { type: string }
